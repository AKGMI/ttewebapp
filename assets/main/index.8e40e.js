System.register("chunks:///_virtual/AdsGramSDK.ts",["cc"],(function(n){var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"2cca8schZdGnrn6iv0rp1sY","AdsGramSDK",void 0),n("AdsGramSDK",function(){function n(){this.initializedControllers=new Map,this.rewardToBlockMap=new Map}n.getInstance=function(){return n.instance||(n.instance=new n),n.instance};var i=n.prototype;return i.registerBlockId=function(n,i){this.rewardToBlockMap.set(n,i)},i.getBlockId=function(n){return this.rewardToBlockMap.get(n)||null},i.initialize=function(n){if(this.initializedControllers.has(n))return this.initializedControllers.get(n);if("undefined"!=typeof window&&window.Adsgram){var i=window.Adsgram.init({blockId:n});return this.initializedControllers.set(n,i),console.log("AdsGram SDK успешно инициализирован для blockId: "+n),i}return console.error("AdsGram SDK не найден. Проверьте подключение скрипта sad.min.js."),null},i.showAd=function(n,i,e){var r=this.getBlockId(n);if(r){var t=this.initialize(r);t?t.show().then((function(n){n.done&&i&&i()})).catch((function(i){console.error('Ошибка при показе рекламы для RewardID "'+n+'":',i.description),e&&e(i.description)})):console.error("AdsGram SDK не инициализирован. Проверьте настройки blockId и скрипта.")}else console.error('BlockId для RewardID "'+n+'" не зарегистрирован.')},n}()).instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEventInjector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,a=t.Component}],execute:function(){var i;e._RF.push({},"fe030NY2C5AC74Yu17jtwQy","AnimationEventInjector",void 0);var r=o.ccclass;o.property,t("AnimationEventInjector",r("AnimationEventInjector")(i=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=this.node.getComponent("CharacterAnimationController");if(t&&t.skeletalAnimation){var n=t.skeletalAnimation.clips.find((function(t){return"attack1"===t.name}));if(n){n.events&&0!==n.events.length||(n.events=[]);var e=n.events.some((function(t){return"AttackHitMoment"===t.functionName}));console.log("events",n.events),e||(n.events.push({frame:n.duration*n.sample*.3,functionName:"AttackHitMoment",params:[]}),console.log("AttackHitMoment событие добавлено в анимацию attack1")),console.log("events2",n.events)}else console.warn('Анимация "attack1" не найдена')}else console.warn("Нет CharacterAnimationController или SkeletalAnimation")},e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/ApiClient.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,a,o;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.extends},function(e){a=e.cclegacy,o=e._decorator}],execute:function(){var i,c;a._RF.push({},"46f40IKQKRGDYkjLUlE65IH","ApiClient",void 0);var s=o.ccclass;e("ApiClient",s("ApiClient")(((c=function(){function e(){this.baseUrl="https://bbagp9ltptvbuth42hra.containers.yandexcloud.net"}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var a=e.prototype;return a.fetchWithRetry=function(){var e=t(r().mark((function e(t,a,o,i){var c,s,u,p=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===o&&(o=1),void 0===i&&(i=5e3),c=r().mark((function e(){var c,s,h,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new AbortController,s=c.signal,h=setTimeout((function(){return c.abort()}),i),e.next=6,fetch(t,n({},a,{signal:s}));case 6:if(l=e.sent,clearTimeout(h),!l.ok){e.next=12;break}return e.abrupt("return",{v:l.json()});case 12:console.warn("Ошибка сети (попытка "+(u+1)+"/"+o+"): "+l.status);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),"AbortError"===e.t0.name?console.warn("Таймаут запроса (попытка "+(u+1)+"/"+o+")"):console.error("Ошибка при выполнении запроса (попытка "+(u+1)+"/"+o+"):",e.t0);case 18:if(!(u<o-1)){e.next=21;break}return e.next=21,p.delay(1e3);case 21:case"end":return e.stop()}}),e,null,[[0,15]])})),u=0;case 4:if(!(u<o)){e.next=12;break}return e.delegateYield(c(),"t0",6);case 6:if(!(s=e.t0)){e.next=9;break}return e.abrupt("return",s.v);case 9:u++,e.next=4;break;case 12:throw new Error("Превышено количество попыток отправки запроса");case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),a.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},a.post=function(){var e=t(r().mark((function e(t,n,a,o){var i,c,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=1),void 0===o&&(o=5e3),i=localStorage.getItem("authToken"),c=""+this.baseUrl+t,s={method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":i?"Bearer "+i:void 0},body:JSON.stringify(n)},e.abrupt("return",this.fetchWithRetry(c,s,a,o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),a.get=function(){var e=t(r().mark((function e(t,n,a){var o,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=1),void 0===a&&(a=5e3),o=localStorage.getItem("authToken"),i=""+this.baseUrl+t,c={method:"GET",headers:{"Content-Type":"application/json","X-Auth-Token":o?"Bearer "+o:void 0}},e.abrupt("return",this.fetchWithRetry(i,c,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),a.delete=function(){var e=t(r().mark((function e(t,n,a){var o,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=1),void 0===a&&(a=5e3),o=localStorage.getItem("authToken"),i=""+this.baseUrl+t,c={method:"DELETE",headers:{"Content-Type":"application/json","X-Auth-Token":o?"Bearer "+o:void 0}},e.abrupt("return",this.fetchWithRetry(i,c,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),e}()).instance=void 0,i=c))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/AttackConeMesh.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,a,s,o,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Material,l=e.utils,c=e.MeshRenderer,u=e.Component}],execute:function(){var h,p,f,d,g,m,M,b;a._RF.push({},"2f3d9rpbC5PgKmg7xheVraS","AttackConeMesh",void 0);var v=s.ccclass,y=s.property;e("AttackConeMesh",(h=v("AttackConeMesh"),p=y(o),h((g=t((d=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"coneAngle",g,i(t)),n(t,"radius",m,i(t)),n(t,"segments",M,i(t)),n(t,"lineMaterial",b,i(t)),t._meshRenderer=null,t}r(t,e);var a=t.prototype;return a.start=function(){this.createCone()},a.createCone=function(){var e=[];e.push(0,0,0);for(var t=0;t<=this.segments;t++){var r=(t/this.segments-.5)*this.coneAngle*Math.PI/180,n=Math.sin(r)*this.radius,i=Math.cos(r)*this.radius;e.push(n,0,i)}for(var a=1;a<=this.segments;a++);var s=l.MeshUtils.createMesh({positions:e});this._meshRenderer=this.node.addComponent(c),this._meshRenderer.mesh=s,this.lineMaterial&&this._meshRenderer.setMaterial(this.lineMaterial,0)},t}(u)).prototype,"coneAngle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),m=t(d.prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),M=t(d.prototype,"segments",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),b=t(d.prototype,"lineMaterial",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/AttackTriggerCone.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,a,s,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,c=e.Collider,l=e.Vec3,u=e.Component}],execute:function(){var d,g,h;a._RF.push({},"a71b7GWwUxIC6sbvvJLSV5x","AttackTriggerCone",void 0);var p=s.ccclass,f=s.property;e("AttackTriggerCone",p("AttackTriggerCone")((h=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"attackRadius",h,i(t)),t._enteredEnemies=new Set,t}r(t,e);var a=t.prototype;return a.start=function(){var e=this.getComponent(c);if(e){e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this);var t=e.size.clone();t.x=2*this.attackRadius,t.y=2,t.z=2*this.attackRadius,e.size=t}},a.onTriggerEnter=function(e){var t=e.otherCollider.node;t!==this.node.parent&&null!==t.getComponent("EnemyAI")&&this._enteredEnemies.add(t)},a.onTriggerExit=function(e){var t=e.otherCollider.node;this._enteredEnemies.delete(t)},a.getEnemiesInCone=function(e,t,r,n){for(var i,a=[],s=o(this._enteredEnemies);!(i=s()).done;){var c=i.value;if(c&&c.isValid){var u=new l;if(l.subtract(u,e,c.worldPosition),!(l.len(u)>r)){u.normalize();var d=l.dot(t,u);Math.acos(d)*(180/Math.PI)<=n/2&&a.push(c)}}}return a},a.findNearestEnemy=function(){for(var e,t=1/0,r=null,n=o(this._enteredEnemies);!(e=n()).done;){var i=e.value;if(i&&i.isValid){var a=l.distance(this.node.parent.worldPosition,i.worldPosition);a<t&&(t=a,r=i)}}return r},t}(u)).prototype,"attackRadius",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),d=g))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/AxisRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,r,e,n,a,s,c,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Vec3,c=t.tween,l=t.Component}],execute:function(){var u,p,h,y,f,x,A,b,D;n._RF.push({},"7d16f33KhdId7Hd/uY6MDJg","AxisRotator",void 0);var d=a.ccclass,g=a.property;t("AxisRotator",(u=d("AxisRotator"),p=g(Number),h=g({type:Number,tooltip:"1 for clockwise, -1 for counterclockwise"}),y=g({type:String,tooltip:"Axis of rotation: x, y, or z"}),u((A=i((x=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,r(i,"rotateTime",A,e(i)),r(i,"rotationDirection",b,e(i)),r(i,"rotationAxis",D,e(i)),i}return o(i,t),i.prototype.start=function(){["x","y","z"].includes(this.rotationAxis)||(console.warn('rotationAxis должен быть "x", "y" или "z". Установлено значение "y".'),this.rotationAxis="y"),1!==this.rotationDirection&&-1!==this.rotationDirection&&(console.warn("rotationDirection должен быть 1 (по часовой) или -1 (против часовой). Установлено значение -1."),this.rotationDirection=-1);var t=new s("x"===this.rotationAxis?360*this.rotationDirection:0,"y"===this.rotationAxis?360*this.rotationDirection:0,"z"===this.rotationAxis?360*this.rotationDirection:0);c(this.node).repeatForever(c().by(this.rotateTime,{eulerAngles:t})).start()},i}(l)).prototype,"rotateTime",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=i(x.prototype,"rotationDirection",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),D=i(x.prototype,"rotationAxis",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"y"}}),f=x))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts"],(function(e){var n,t,i,o,r,s,a,c,l,u,d,h,p,g,f,b,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,c=e.BlockInputEvents,l=e.UIOpacity,u=e.tween,d=e.Vec3,h=e.resources,p=e.assetManager,g=e.Component,f=e.Prefab,b=e.SpriteFrame},function(e){v=e.UIManager}],execute:function(){var k,m,C,y,w,P,A,E,L,S;r._RF.push({},"16d0a5olKpLr7LGehTEWhcp","BaseWindow",void 0);var B=s.ccclass,D=s.property;e("BaseWindow",(k=B("BaseWindow"),m=D(a),C=D(a),k((P=n((w=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,i(n,"background",P,o(n)),i(n,"content",A,o(n)),i(n,"closeOnShadowClick",E,o(n)),i(n,"useAnimation",L,o(n)),i(n,"animationDuration",S,o(n)),n.isProcessingClick=!1,n.eventListenersAdded=!1,n.originalScale=null,n.closeCallback=null,n.resourcesForPreload=[],n.bundlesForPreload=[],n.resourcesPreloaded=!1,n}t(n,e);var r=n.prototype;return r.onLoad=function(){this.content||(this.content=this.node),this.originalScale=this.content.getScale().clone()},r.init=function(e){},r.close=function(){this.removeEventListeners(),this.useAnimation?this.playCloseAnimation():this.node.active=!1},r.open=function(e){if(console.log("Opening window"),this.node.active=!0,this.background&&(this.background.getComponent(c)||this.background.addComponent(c),this.addEventListeners(),this.useAnimation)){var n=this.background.getComponent(l)||this.background.addComponent(l);n.opacity=0,u(n).to(this.animationDuration,{opacity:255}).start()}this.useAnimation&&this.playOpenAnimation(),this.init(e)},r.playOpenAnimation=function(){this.content&&(u(this.content).stop(),this.content.setScale(new d(.5,.5,1)),u(this.content).to(this.animationDuration,{scale:new d(1.05*this.originalScale.x,1.05*this.originalScale.y,this.originalScale.z)},{easing:"backOut"}).to(.1,{scale:this.originalScale}).start())},r.playCloseAnimation=function(){var e=this;this.content?(u(this.content).stop(),this.background,u(this.content).to(this.animationDuration,{scale:new d(.5,.5,1)},{easing:"backIn"}).call((function(){e.node.active=!1})).start()):this.node.active=!1},r.addEventListeners=function(){this.background&&this.closeOnShadowClick&&!this.eventListenersAdded&&(this.background.off(a.EventType.TOUCH_END,this.onBackgroundClick,this),this.background.on(a.EventType.TOUCH_END,this.onBackgroundClick,this),this.eventListenersAdded=!0)},r.removeEventListeners=function(){this.background&&this.eventListenersAdded&&(this.background.off(a.EventType.TOUCH_END,this.onBackgroundClick,this),this.eventListenersAdded=!1)},r.onBackgroundClick=function(){var e=this;this.isProcessingClick||(this.isProcessingClick=!0,v.getInstance().windowsManager.hideActiveWindow(),setTimeout((function(){e.isProcessingClick=!1}),300))},r.onDisable=function(){this.removeEventListeners()},r.setCloseCallback=function(e){this.closeCallback=e},r.preloadResources=function(e){var n=this;if(this.resourcesPreloaded)e&&e();else{var t=0,i=0,o=this.resourcesForPreload.length,r=this.bundlesForPreload.length,s=function(){t===o&&i===r&&(n.resourcesPreloaded=!0,e&&e())};if(0===o&&0===r)return this.resourcesPreloaded=!0,void(e&&e());o>0&&this.resourcesForPreload.forEach((function(e){var n=null;e.endsWith(".prefab")?n=f:e.includes("/spriteFrame")&&(n=b),h.load(e,n,(function(n,i){n?console.error("Failed to preload resource: "+e,n):console.log("Resource preloaded: "+e),t++,s()}))})),r>0&&this.bundlesForPreload.forEach((function(e){p.loadBundle(e,(function(n,t){n?console.error("Failed to preload bundle: "+e,n):console.log("Bundle preloaded: "+e),i++,s()}))}))}},r.areResourcesPreloaded=function(){return this.resourcesPreloaded},n}(g)).prototype,"background",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(w.prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(w.prototype,"closeOnShadowClick",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=n(w.prototype,"useAnimation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=n(w.prototype,"animationDuration",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),y=w))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Billboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,r,a,i,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.find,a=t.CameraComponent,i=t.Quat,c=t.Component}],execute:function(){var s;e._RF.push({},"41b25WGxHRMTrdEBqHLaeoe","Billboard",void 0);var l=n.ccclass;n.property,t("Billboard",l("Billboard")(s=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this)._camera=null,o._invertedRotation=new i,o}o(e,t);var n=e.prototype;return n.start=function(){var t=r("Main Camera");t&&(this._camera=t.getComponent(a))},n.update=function(t){if(this._camera){var o=this._camera.node.getWorldPosition();this.node.lookAt(o);var e=this.node.parent.worldRotation;i.invert(this._invertedRotation,e),this.node.setRotation(this._invertedRotation)}},e}(c))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,l,c,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,c=e.Node,s=e.Vec3,a=e.Component}],execute:function(){var u,p,f,h,d;o._RF.push({},"80f9aQFv29CSrp0p598XpHl","Board",void 0);var v=l.ccclass,y=l.property;e("Board",(u=v("Board"),p=y([c]),u((d=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"cells",d,i(t)),t}r(t,e);var o=t.prototype;return o.start=function(){new s(0,0,0);for(var e=0;e<this.cells.length;e++){var t=3*e,r=e%2==0?0:2,n=e%3==0?3:0;this.cells[e].setPosition(new s(t,r,n))}},o.getCell=function(e){return this.cells[e%this.cells.length]},t}(a)).prototype,"cells",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BossSummonAbility.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts","./EnemySpawner.ts","./EnemyConfig.ts"],(function(i){var t,n,e,o,s,r,m,a,u,l,c,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized,s=i.asyncToGenerator,r=i.regeneratorRuntime},function(i){m=i.cclegacy,a=i._decorator,u=i.Component},function(i){l=i.CharacterCombat},function(i){c=i.EnemySpawner},function(i){p=i.EnemyConfig}],execute:function(){var h,f,b,y,g,_,d,w,A,S,C;m._RF.push({},"a42b98no8RLloU1nLmaN6X5","BossSummonAbility",void 0);var B=a.ccclass,T=a.property;i("BossSummonAbility",(h=B("BossSummonAbility"),f=T({tooltip:"ID босса в конфигурации (для получения настроек призыва)"}),b=T({tooltip:"Радиус области призыва вокруг босса"}),y=T({tooltip:"Множитель здоровья призванных врагов (от базового значения)"}),g=T({tooltip:"Множитель урона призванных врагов (от базового значения)"}),h((w=t((d=function(i){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,e(t,"bossId",w,o(t)),e(t,"summonRadius",A,o(t)),e(t,"healthMultiplier",S,o(t)),e(t,"damageMultiplier",C,o(t)),t._nextSummonTime=0,t._bossCombat=null,t._currentTime=0,t._config=null,t._spawner=null,t}n(t,i);var m=t.prototype;return m.start=function(){this._bossCombat=this.getComponent(l),this._spawner=this.getComponent(c)||this.addComponent(c),this._spawner.spawnRadius=this.summonRadius,this._spawner.healthMultiplier=this.healthMultiplier,this._spawner.damageMultiplier=this.damageMultiplier,this.loadBossConfig(),this._nextSummonTime=this._config.summonAbility.cooldown},m.loadBossConfig=function(){this._config=p.getInstance().getEnemyStats(this.bossId),this._config?(this._config.summonAbility&&this._config.summonAbility.enemyTypes&&(this._spawner.enemyTypes=this._config.summonAbility.enemyTypes.slice()),console.log("[BossSummonAbility] Загружена конфигурация для босса: "+this._config.name)):console.error("[BossSummonAbility] Не найдена конфигурация для босса с ID: "+this.bossId)},m.update=function(i){this._bossCombat&&this._bossCombat.isAlive()&&this._config&&(this._currentTime+=i,this._currentTime>=this._nextSummonTime&&(this.summonEnemies(),this._nextSummonTime=this._currentTime+this._config.summonAbility.cooldown))},m.summonEnemies=function(){var i=s(r().mark((function i(){var t,n,e;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this._config.summonAbility&&this._spawner){i.next=3;break}return console.error("[BossSummonAbility] В конфигурации босса отсутствуют настройки призыва или не инициализирован спавнер"),i.abrupt("return");case 3:return console.log("[BossSummonAbility] Босс "+this._config.name+" активирует способность призыва"),this.playSummonEffect(),t=this._config.summonAbility.minCount||2,n=this._config.summonAbility.maxCount||4,i.next=9,this._spawner.spawnRandomEnemies(t,n);case 9:e=i.sent,console.log("[BossSummonAbility] Призвано "+e.length+" врагов");case 11:case"end":return i.stop()}}),i,this)})));return function(){return i.apply(this,arguments)}}(),m.playSummonEffect=function(){console.log("[BossSummonAbility] Эффект призыва")},t}(u)).prototype,"bossId",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=t(d.prototype,"summonRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=t(d.prototype,"healthMultiplier",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=t(d.prototype,"damageMultiplier",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=d))||_));m._RF.pop()}}}));

System.register("chunks:///_virtual/BundlePreloader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,o,t,a,l,d,i,s,u,c,p,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,l=e.asyncToGenerator,d=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e._decorator,u=e.director,c=e.game,p=e.assetManager,f=e.Component}],execute:function(){var h,B,b,v,y,g,E,L,P;i._RF.push({},"6de5e9xZYhG7YFRJMRNfrpF","BundlePreloader",void 0);var k=s.ccclass,w=s.property;e("BundlePreloader",(h=k("BundlePreloader"),B=w([String]),b=w(Boolean),v=w(Boolean),h((E=n((g=function(e){function n(){for(var n,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,o(n,"bundlesToPreload",E,t(n)),o(n,"loadOnStart",L,t(n)),o(n,"keepBundlesLoaded",P,t(n)),n.loadedBundles=new Set,n}r(n,e);var i=n.prototype;return i.onLoad=function(){this.loadOnStart&&this.preloadBundles(),this.keepBundlesLoaded&&u.on(u.EVENT_BEFORE_SCENE_LOADING,this.ensureBundlesLoaded,this),c.addPersistRootNode(this.node)},i.preloadBundles=function(){var e=l(d().mark((function e(){var n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(this.bundlesToPreload);case 1:if((r=n()).done){e.next=16;break}if(o=r.value,this.loadedBundles.has(o)){e.next=14;break}return e.prev=4,e.next=7,this.loadBundle(o);case 7:this.loadedBundles.add(o),console.log("Bundle "+o+" preloaded successfully"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Failed to preload bundle "+o+":",e.t0);case 14:e.next=1;break;case 16:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),i.loadBundle=function(e){return new Promise((function(n,r){p.loadBundle(e,(function(e,o){e?r(e):n()}))}))},i.ensureBundlesLoaded=function(){for(var e,n=a(this.bundlesToPreload);!(e=n()).done;){var r=e.value;if(!p.getBundle(r)){this.loadedBundles.delete(r),this.preloadBundles();break}}},i.onDestroy=function(){u&&u.off(u.EVENT_BEFORE_SCENE_LOADING,this.ensureBundlesLoaded,this)},n}(f)).prototype,"bundlesToPreload",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["windows"]}}),L=n(g.prototype,"loadOnStart",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=n(g.prototype,"keepBundlesLoaded",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=g))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFlow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n,s,a,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Node,l=t.Vec3,c=t.v3,u=t.Component}],execute:function(){var p,f,h,g,d,y,m,b;n._RF.push({},"b1ed4F2ngJCKIU7D6e0cTtR","CameraFlow",void 0);var w=s.ccclass,v=s.property;t("CameraFollow",(p=w("CameraFollow"),f=v(a),h=v(l),p((y=e((d=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,o(e,"target",y,r(e)),o(e,"smoothSpeed",m,r(e)),o(e,"offset",b,r(e)),e._currentPosition=new l,e}return i(e,t),e.prototype.update=function(t){if(this.target&&this.target.isValid){var e=c(this.target.position.x+this.offset.x,this.target.position.y+this.offset.y,this.target.position.z+this.offset.z);l.lerp(this._currentPosition,this.node.position,e,this.smoothSpeed),this.node.setPosition(this._currentPosition)}},e}(u)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(d.prototype,"smoothSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.125}}),b=e(d.prototype,"offset",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,10,-10)}}),g=d))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasToggler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,o,a,i,s,c,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,s=t.Button,c=t.Node,l=t.Component}],execute:function(){var u,g,p,v,f,h,b;a._RF.push({},"243f86Bi9JDfYNQW48XENqF","CanvasToggler",void 0);var C=i.ccclass,y=i.property;t("CanvasToggler",(u=C("CanvasToggler"),g=y(s),p=y(c),u((h=n((f=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,r(n,"button",h,o(n)),r(n,"targetCanvas",b,o(n)),n}e(n,t);var a=n.prototype;return a.start=function(){this.button&&this.button.node.on("click",this.onButtonClick,this)},a.onButtonClick=function(){this.targetCanvas?this.targetCanvas.active=!0:console.error("Target canvas is not assigned!")},n}(l)).prototype,"button",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(f.prototype,"targetCanvas",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,l,o,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,c=e.Enum,a=e.Component}],execute:function(){var u,p,s,y,E;l._RF.push({},"b27a2yZM5lLUZaCibv5+SAG","Cell",void 0);var f=o.ccclass,C=o.property,T=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.CRYSTAl=1]="CRYSTAl",e[e.DICE=2]="DICE",e[e.KEY=3]="KEY",e[e.HOPPER=4]="HOPPER",e[e.GO=5]="GO",e[e.TON=6]="TON",e[e.FORTUNE=7]="FORTUNE",e}(T||{});c(T);e("Cell",(u=f("Cell"),p=C({type:c(T)}),u((E=t((y=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"type",E,i(t)),t}return r(t,e),t}(a)).prototype,"type",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.DEFAULT}}),s=y))||s));l._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterAnimationController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,e,o,a,r,s,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.SkeletalAnimation,l=t.Component}],execute:function(){var h,c,S,u,p;a._RF.push({},"d66d2vQ4VBFmI/xSmbfLF21","CharacterAnimationController",void 0);var y=r.ccclass,f=r.property;t("CharacterAnimationController",(h=y("CharacterAnimationController"),c=f(s),h((p=n((u=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,e(n,"skeletalAnimation",p,o(n)),n._currentState="",n._isOneShotPlaying=!1,n._nextStateAfterOneShot="",n}i(n,t);var a=n.prototype;return a.start=function(){this.skeletalAnimation&&this.skeletalAnimation.on(s.EventType.FINISHED,this.onAnimationFinished,this),this.node.on("MoveStart",this.onMoveStart,this),this.node.on("MoveStop",this.onMoveStop,this),this.node.on("FlyStart",this.onFlyStart,this),this.node.on("AttackStart",this.onAttackStart,this)},a.play=function(t){this.skeletalAnimation&&!this._isOneShotPlaying&&(this._currentState!==t&&(this.skeletalAnimation.getState(t)?(this.skeletalAnimation.play(t),this._currentState=t):console.warn('Анимация "'+t+'" не найдена')))},a.playOneShot=function(t,n){this.skeletalAnimation&&(this.skeletalAnimation.getState(t)?(this._isOneShotPlaying=!0,this._nextStateAfterOneShot=n,this.skeletalAnimation.play(t)):console.warn('Единоразовая анимация "'+t+'" не найдена'))},a.onAnimationFinished=function(){this._isOneShotPlaying&&(this._isOneShotPlaying=!1,this.play(this._nextStateAfterOneShot||"Idle"))},a.onMoveStart=function(){this.play("Run")},a.onMoveStop=function(){this.play("Idle")},a.onFlyStart=function(){this.play("Fly")},a.onAttackStart=function(){if(!this._isOneShotPlaying){var t=["attack1","attack2"],n=Math.floor(Math.random()*t.length);this.playOneShot(t[n],"Idle"),this.schedule((function(){this.node.emit("AttackHitMoment")}),0,0,.4)}},a.reset=function(){this._currentState="",this._isOneShotPlaying=!1},n}(l)).prototype,"skeletalAnimation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=u))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterAttackController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AttackTriggerCone.ts","./CharacterCombat.ts"],(function(t){var e,o,n,a,r,c,i,s;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,a=t._decorator,r=t.Vec3,c=t.Component},function(t){i=t.AttackTriggerCone},function(t){s=t.CharacterCombat}],execute:function(){var l;n._RF.push({},"12453XpI1xJ8KwV8OPcK7ij","CharacterAttackController",void 0);var h=a.ccclass;a.property,t("CharacterAttackController",h("CharacterAttackController")(l=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._attackZone=null,e._combat=null,e}e(n,t);var a=n.prototype;return a.start=function(){this._attackZone=this.node.getComponentInChildren(i),this._combat=this.node.getComponent(s),this.node.on("AttackHitMoment",this.onAttackHitMoment,this)},a.update=function(t){var e=new r,o=this.node.forward.clone().normalize();r.scaleAndAdd(e,this.node.worldPosition,o,-.5);var n=this._attackZone.getEnemiesInCone(e,o,this._combat.attackRadius,180);this._combat&&this._combat.canAttack()&&n.length>0&&(this._combat.markAttackTime(),this.node.emit("AttackStart"))},a.onAttackHitMoment=function(){if(this._attackZone&&this._combat){var t=new r,e=this.node.forward.clone().normalize();r.scaleAndAdd(t,this.node.worldPosition,e,-.5);for(var n,a=this._attackZone.getEnemiesInCone(t,e,this._combat.attackRadius,180),c=o(a);!(n=c()).done;){var i=n.value,l=i.getComponent(s);l&&l.isAlive()&&(l.takeDamage(this._combat.damage,this.node),console.log(this.node.name+" ударил "+i.name))}}},n}(c))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterCombat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterLevelSystem.ts"],(function(e){var t,a,r,i,n,o,l,s,c,h,u,m,d,f,g,p,b,C,_,P,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose,o=e.createClass},function(e){l=e.cclegacy,s=e._decorator,c=e.Prefab,h=e.MeshRenderer,u=e.SkinnedMeshRenderer,m=e.Material,d=e.find,f=e.Node,g=e.instantiate,p=e.Label,b=e.Vec3,C=e.tween,_=e.Component,P=e.Color},function(e){y=e.CharacterLevelSystem}],execute:function(){var v,x,w,T,H,D,z,k,F,M,R,S,A,V,L,I,E,O,j,q,B;l._RF.push({},"4d10a14lDFOkICeWV4Yb7qO","CharacterCombat",void 0);var N=s.ccclass,W=s.property;e("CharacterCombat",(v=N("CharacterCombat"),x=W({type:c,tooltip:"Префаб для отображения урона"}),w=W({tooltip:"Длительность анимации текста урона (в секундах)"}),T=W({tooltip:"Высота подъема текста урона"}),H=W({tooltip:"Цвет текста обычного урона"}),D=W({tooltip:"Цвет текста критического урона"}),v((F=t((k=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"maxHP",F,i(t)),r(t,"damage",M,i(t)),r(t,"armor",R,i(t)),r(t,"attackSpeed",S,i(t)),r(t,"attackRadius",A,i(t)),r(t,"hitFlashDuration",V,i(t)),r(t,"hitFlashColor",L,i(t)),r(t,"isPlayer",I,i(t)),r(t,"damageTextPrefab",E,i(t)),r(t,"damageTextDuration",O,i(t)),r(t,"damageTextRiseHeight",j,i(t)),r(t,"normalDamageColor",q,i(t)),r(t,"criticalDamageColor",B,i(t)),t._expValue=0,t._currentHP=100,t._lastAttackTime=0,t._meshRenderers=[],t._isFlashing=!1,t._originalMaterials=new Map,t._redMaterials=new Map,t._damageTextPool=[],t._poolSize=10,t}a(t,e);var l=t.prototype;return l.start=function(){var e=this;this._currentHP=this.maxHP,this._meshRenderers=[].concat(this.node.getComponentsInChildren(h),this.node.getComponentsInChildren(u)),this._meshRenderers.forEach((function(t){if(t&&t.materials&&t.materials.length>0){e._originalMaterials.set(t,t.materials.map((function(e){var t=new m;return t.copy(e),t})));var a=t.materials.map((function(t){var a=new m;return a.copy(t),a.setProperty("albedo",e.hitFlashColor),a}));e._redMaterials.set(t,a)}})),console.log("[CharacterCombat] Найдено "+this._meshRenderers.length+" рендереров")},l.initDamageTextPool=function(){if(this.damageTextPrefab){var e=d("Canvas/DamageTextContainer");if(!e){e=new f("DamageTextContainer");var t=d("Canvas");t?t.addChild(e):(console.warn("[CharacterCombat] Canvas не найден, тексты урона могут отображаться некорректно"),this.node.scene.addChild(e))}for(var a=0;a<this._poolSize;a++){var r=g(this.damageTextPrefab);r.active=!1,e.addChild(r),this._damageTextPool.push(r)}console.log("[CharacterCombat] Инициализирован пул текстов урона размером "+this._poolSize)}else console.warn("[CharacterCombat] Префаб для текста урона не задан")},l.getDamageTextFromPool=function(){for(var e,t=n(this._damageTextPool);!(e=t()).done;){var a=e.value;if(!a.active)return a}if(this.damageTextPrefab){var r=d("Canvas/DamageTextContainer"),i=g(this.damageTextPrefab);return i.active=!1,r?r.addChild(i):this.node.scene.addChild(i),this._damageTextPool.push(i),console.log("[CharacterCombat] Создан дополнительный объект для текста урона"),i}return console.warn("[CharacterCombat] Не удалось получить объект для текста урона"),null},l.showDamageText=function(e,t){if(void 0===t&&(t=!1),this.damageTextPrefab){var a=g(this.damageTextPrefab),r=a.getComponent(p);r&&(r.string="-"+Math.round(e).toString(),r.color=t?this.criticalDamageColor:this.normalDamageColor,t&&(r.fontSize=1.5*r.fontSize)),this.node.addChild(a);var i=.5*Math.random()-.25;a.setPosition(new b(i,.5,0));var n=a.scale.clone();C(a).by(this.damageTextDuration,{position:new b(0,1.5,0),scale:n.multiplyScalar(-.5)}).call((function(){a.destroy()})).start()}},l.isAlive=function(){return this._currentHP>0},l.heal=function(e){this._currentHP+=e,this._currentHP>this.maxHP&&(this._currentHP=this.maxHP)},l.takeDamage=function(e,t){var a=Math.max(e-this.armor,1);if(this._currentHP-=a,console.log(this.node.name+" получил урон "+a+". HP: "+this._currentHP+"/"+this.maxHP),this.showDamageText(a),this.playHitFlash(),this._currentHP<=0){if(this._currentHP=0,!this.isPlayer&&t&&t.getComponent(y)){var r=t.getComponent(y);r&&(r.addExperience(this._expValue),console.log("[CharacterCombat] Игрок получил "+this._expValue+" опыта за убийство "+this.node.name))}this.node.emit("character-died"),this.die()}},l.die=function(){console.log(this.node.name+" погиб."),this.node&&this.node.destroy()},l.canAttack=function(){return performance.now()/1e3-this._lastAttackTime>=this.attackCooldown},l.markAttackTime=function(){this._lastAttackTime=performance.now()/1e3},l.playHitFlash=function(){var e=this;this._isFlashing||(this._isFlashing=!0,this._meshRenderers.forEach((function(t){t&&t.materials&&e._redMaterials.has(t)&&(t.materials=e._redMaterials.get(t))})),setTimeout((function(){e.node&&e.node.isValid&&e._meshRenderers.forEach((function(t){t&&t.isValid&&e._originalMaterials.has(t)&&(t.materials=e._originalMaterials.get(t))})),e._isFlashing=!1}),1e3*this.hitFlashDuration))},o(t,[{key:"attackCooldown",get:function(){return 1/this.attackSpeed}},{key:"currentHP",get:function(){return this._currentHP}}]),t}(_)).prototype,"maxHP",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),M=t(k.prototype,"damage",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),R=t(k.prototype,"armor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=t(k.prototype,"attackSpeed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=t(k.prototype,"attackRadius",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),V=t(k.prototype,"hitFlashDuration",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),L=t(k.prototype,"hitFlashColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P(255,0,0,180)}}),I=t(k.prototype,"isPlayer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(k.prototype,"damageTextPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"damageTextDuration",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=t(k.prototype,"damageTextRiseHeight",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=t(k.prototype,"normalDamageColor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P(255,255,255,255)}}),B=t(k.prototype,"criticalDamageColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new P(255,50,50,255)}}),z=k))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterLevelSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts","./CharacterMovementController.ts","./UpgradeInfo.ts"],(function(e){var t,r,a,n,i,o,l,c,s,h,p,u,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.find,s=e.Sprite,h=e.Label,p=e.Component},function(e){u=e.CharacterCombat},function(e){v=e.CharacterMovementController},function(e){m=e.UpgradeType}],execute:function(){var g,d,_,b,L,C,f,y,S,x,P,E,M,U,A,X,k,F,N,w,V;o._RF.push({},"00471bq8V1Hp5ihmMLOs1Fh","CharacterLevelSystem",void 0);var D=l.ccclass,T=l.property;e("CharacterLevelSystem",(g=D("CharacterLevelSystem"),d=T({tooltip:"Базовое количество опыта для первого уровня"}),_=T({tooltip:"Множитель опыта для следующих уровней"}),b=T({tooltip:"Максимальный уровень персонажа"}),L=T({tooltip:"UI элемент для отображения текущего уровня"}),C=T({tooltip:"Процент увеличения здоровья при апгрейде"}),f=T({tooltip:"Процент увеличения урона при апгрейде"}),y=T({tooltip:"Значение увеличения брони при апгрейде"}),S=T({tooltip:"Процент увеличения скорости атаки при апгрейде"}),x=T({tooltip:"Процент увеличения скорости передвижения при апгрейде"}),g((M=t((E=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"baseXpForLevel",M,n(t)),a(t,"xpMultiplier",U,n(t)),a(t,"maxLevel",A,n(t)),a(t,"levelNode",X,n(t)),a(t,"healthUpgradePercent",k,n(t)),a(t,"damageUpgradePercent",F,n(t)),a(t,"armorUpgradeValue",N,n(t)),a(t,"attackSpeedUpgradePercent",w,n(t)),a(t,"moveSpeedUpgradePercent",V,n(t)),t._currentLevel=1,t._currentXp=0,t._tempXp=0,t._xpForNextLevel=0,t._characterCombat=null,t._characterMovement=null,t._upgrades=[],t._isUpgradeInProgress=!1,t}r(t,e);var o=t.prototype;return o.start=function(){this._characterCombat=this.getComponent(u),this._characterMovement=this.getComponent(v),this._characterCombat?(this.levelNode=c("Canvas/LevelProgress"),this._xpForNextLevel=this.calculateXpForLevel(this._currentLevel+1),this.updateUI(),console.log("[CharacterLevelSystem] Система уровней инициализирована. Текущий уровень: "+this._currentLevel+", XP для следующего: "+this._xpForNextLevel)):console.error("[CharacterLevelSystem] Не найден компонент CharacterCombat")},o.update=function(e){this._isUpgradeInProgress||this._tempXp>0&&(this._currentXp+=this._tempXp,console.log("[CharacterLevelSystem] Добавлено "+this._tempXp+" опыта из временного хранилища. Всего: "+this._currentXp+"/"+this._xpForNextLevel),this._tempXp=0,this._currentXp>=this._xpForNextLevel&&this._currentLevel<this.maxLevel?this.levelUp():this.updateUI())},o.addExperience=function(e){this._currentLevel>=this.maxLevel?console.log("[CharacterLevelSystem] Достигнут максимальный уровень"):(this._tempXp+=e,console.log("[CharacterLevelSystem] Получено "+e+" опыта во временное хранилище. Всего во временном хранилище: "+this._tempXp))},o.levelUp=function(){this._currentXp-=this._xpForNextLevel,this._currentLevel++,console.log("[CharacterLevelSystem] Уровень повышен! Новый уровень: "+this._currentLevel),this._currentLevel<this.maxLevel&&(this._xpForNextLevel=this.calculateXpForLevel(this._currentLevel+1)),this.node.emit("level-up",this._currentLevel),this.updateUI(),this._isUpgradeInProgress=!0},o.onUpgradeSelected=function(){var e=this;this._isUpgradeInProgress=!1,this._currentXp>=this._xpForNextLevel&&this._currentLevel<this.maxLevel&&this.scheduleOnce((function(){e.levelUp()}),0)},o.generateUpgradeOptions=function(e){for(var t=[],r=new Set,a=[m.HEALTH,m.DAMAGE,m.ARMOR,m.ATTACK_SPEED,m.MOVE_SPEED],n=a.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),o=[a[i],a[n]];a[n]=o[0],a[i]=o[1]}for(var l=0,c=a;l<c.length;l++){var s=c[l];if(t.length>=e)break;if(!r.has(s)){var h=null;switch(s){case m.HEALTH:var p=Math.round(this._characterCombat.maxHP*(this.healthUpgradePercent/100));h={type:m.HEALTH,name:"HEALTH",value:p};break;case m.DAMAGE:var u=Math.round(this._characterCombat.damage*(this.damageUpgradePercent/100));h={type:m.DAMAGE,name:"DAMAGE",value:u};break;case m.ARMOR:h={type:m.ARMOR,name:"ARMOR",value:this.armorUpgradeValue};break;case m.ATTACK_SPEED:var v=this._characterCombat.attackSpeed*(this.attackSpeedUpgradePercent/100);h={type:m.ATTACK_SPEED,name:"ATTACK SPEED",value:v};break;case m.MOVE_SPEED:if(this._characterMovement){var g=this._characterMovement.moveSpeed*(this.moveSpeedUpgradePercent/100);h={type:m.MOVE_SPEED,name:"MOVE SPEED",value:g}}}h&&(t.push(h),r.add(s))}}return t.length>=3&&(t[t.length-1].price=10),console.log("[CharacterLevelSystem] Сгенерировано "+t.length+" вариантов улучшений"),t},o.applyUpgradeByIndex=function(e,t){var r=t||this.generateUpgradeOptions(3);if(e<0||e>=r.length)return console.error("[CharacterLevelSystem] Некорректный индекс улучшения: "+e),null;var a=r[e];switch(a.type){case m.HEALTH:a.prevValue=this._characterCombat.maxHP,this._characterCombat.maxHP+=a.value,a.newValue=this._characterCombat.maxHP,this._characterCombat.heal(a.value);break;case m.DAMAGE:a.prevValue=this._characterCombat.damage,this._characterCombat.damage+=a.value,a.newValue=this._characterCombat.damage;break;case m.ARMOR:a.prevValue=this._characterCombat.armor,this._characterCombat.armor+=a.value,a.newValue=this._characterCombat.armor;break;case m.ATTACK_SPEED:a.prevValue=this._characterCombat.attackSpeed,this._characterCombat.attackSpeed+=a.value,a.newValue=this._characterCombat.attackSpeed;break;case m.MOVE_SPEED:this._characterMovement&&(a.prevValue=this._characterMovement.moveSpeed,this._characterMovement.moveSpeed+=a.value,a.newValue=this._characterMovement.moveSpeed)}return this._upgrades.push(a),console.log("[CharacterLevelSystem] Применено улучшение: "+a.name),this.currentXp<this.xpForNextLevel&&this.node.emit("upgrade-applied",a),this.onUpgradeSelected(),a},o.calculateXpForLevel=function(e){return Math.round(this.baseXpForLevel*Math.pow(this.xpMultiplier,e-1))},o.updateUI=function(){if(this.levelNode){var e=this.levelNode.getChildByName("ProgressBar"),t=this.levelNode.getChildByName("Level");e&&e.getComponent(s)&&(e.getComponent(s).fillRange=this._currentXp/this._xpForNextLevel),t&&t.getComponent(h)&&(t.getComponent(h).string="Level "+this._currentLevel)}},i(t,[{key:"currentLevel",get:function(){return this._currentLevel}},{key:"currentXp",get:function(){return this._currentXp}},{key:"xpForNextLevel",get:function(){return this._xpForNextLevel}},{key:"upgrades",get:function(){return this._upgrades}},{key:"isUpgradeInProgress",get:function(){return this._isUpgradeInProgress}}]),t}(p)).prototype,"baseXpForLevel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),U=t(E.prototype,"xpMultiplier",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),A=t(E.prototype,"maxLevel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),X=t(E.prototype,"levelNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(E.prototype,"healthUpgradePercent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),F=t(E.prototype,"damageUpgradePercent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),N=t(E.prototype,"armorUpgradeValue",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),w=t(E.prototype,"attackSpeedUpgradePercent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),V=t(E.prototype,"moveSpeedUpgradePercent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),P=E))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/CharacterMovementController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtualJoystick.ts","./AttackTriggerCone.ts","./GameManager2.ts"],(function(t){var e,i,o,n,r,s,a,c,l,u,d,h,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,c=t.Quat,l=t.geometry,u=t.PhysicsSystem,d=t.Component},function(t){h=t.VirtualJoystick},function(t){p=t.AttackTriggerCone},function(t){y=t.GameManager}],execute:function(){var g,m,v,f,k,_,C;r._RF.push({},"d3fb1pAde5MPLtQOmVNsd0z","CharacterMovementController",void 0);var z=s.ccclass,M=s.property;t("CharacterMovementController",(g=z("CharacterMovementController"),m=M(h),g((k=e((f=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"joystick",k,n(e)),o(e,"moveSpeed",_,n(e)),o(e,"maxGroundDistance",C,n(e)),e._velocity=new a,e._rotation=new c,e._isGrounded=!1,e._attackTrigger=null,e}i(e,t);var r=e.prototype;return r.start=function(){this._attackTrigger=this.node.getComponentInChildren(p)},r.update=function(t){if(console.log("paused?",y.getInstance().isPaused()),!y.getInstance().isPaused()){this.checkGrounded();var e=this.joystick.getInputDirection(),i=this.joystick.getMagnitude();this._velocity.x=e.x*this.moveSpeed*i,this._velocity.z=e.z*this.moveSpeed*i,this.node.setPosition(this.node.position.x+this._velocity.x*t,this.node.position.y,this.node.position.z+this._velocity.z*t),this._isGrounded?e.equals(a.ZERO)?this.node.emit("MoveStop"):this.node.emit("MoveStart"):this.node.emit("FlyStart");var o=this._attackTrigger.findNearestEnemy();o?this.lookAtTarget(o):e.equals(a.ZERO)||this.lookInDirection(e)}},r.lookInDirection=function(t){var e=Math.atan2(t.x,t.z);c.fromEuler(this._rotation,0,e*(180/Math.PI),0),this.node.setRotation(this._rotation)},r.lookAtTarget=function(t){var e=new a;a.subtract(e,t.worldPosition,this.node.worldPosition),e.y=0,e.lengthSqr()>1e-4&&(e.normalize(),this.lookInDirection(e))},r.checkGrounded=function(){var t=new l.Ray(this.node.position.x,this.node.position.y,this.node.position.z,0,-1,0);if(u.instance.raycastClosest(t,this.maxGroundDistance)){var e=u.instance.raycastClosestResult;this._isGrounded=!!(e&&e.collider&&e.distance<=this.maxGroundDistance)}else this._isGrounded=!1},e}(d)).prototype,"joystick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(f.prototype,"moveSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),C=e(f.prototype,"maxGroundDistance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=f))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"98af4bZ+d5N+Zxw3WrQykHo","config",void 0);e("config",{BOT_NAME:"nexus_rampage_bot",APP_NAME:"nexus_rampage"});c._RF.pop()}}}));

System.register("chunks:///_virtual/Dice.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,c,r,l,a,s,u,d,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,r=e._decorator,l=e.Node,a=e.Button,s=e.Vec3,u=e.Animation,d=e.randomRangeInt,h=e.tween,p=e.Component}],execute:function(){var f,b,g,m,y,D,R,w,v,z,L;c._RF.push({},"ea5deQaJ1xI0rqShSv+czL0","Dice",void 0);var B=r.ccclass,j=r.property;e("Dice",(f=B("Dice"),b=j(l),g=j(l),m=j(a),y=j(l),f((w=t((R=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return t=e.call.apply(e,[this].concat(c))||this,n(t,"dice1",w,o(t)),n(t,"dice2",v,o(t)),n(t,"rollButton",z,o(t)),n(t,"diceLootObject",L,o(t)),t.diceRotations=[new s(90,0,0),new s(0,0,0),new s(0,0,-90),new s(0,0,90),new s(0,0,180),new s(90,0,180)],t.diceResult=0,t}i(t,e);var c=t.prototype;return c.start=function(){this.rollButton&&this.rollButton.node.once("click",this.roll,this),this.randomizeDice()},c.roll=function(){if(this.diceLootObject){var e=this.diceLootObject.getComponent(u);e&&e.play("dice_loot")}var t=d(1,7),i=d(1,7);this.diceResult=t+i,console.log("Результат броска: "+t+" и "+i+" (Сумма: "+this.diceResult+")"),this.animateDice(this.dice1,this.diceRotations[t-1]),this.animateDice(this.dice2,this.diceRotations[i-1])},c.getDiceResult=function(){return this.diceResult},c.animateDice=function(e,t){h(e).to(.5,{eulerAngles:t},{easing:"cubicOut"}).start()},c.randomizeDice=function(){this.dice1&&(this.dice1.eulerAngles=this.diceRotations[d(0,6)]),this.dice2&&(this.dice2.eulerAngles=this.diceRotations[d(0,6)])},t}(p)).prototype,"dice1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(R.prototype,"dice2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(R.prototype,"rollButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"diceLootObject",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));c._RF.pop()}}}));

System.register("chunks:///_virtual/DisplayUsername.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TelegramSDK2.ts"],(function(e){var r,n,t,a,i,s,l,o,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,l=e.Label,o=e.Component},function(e){c=e.TelegramSDK}],execute:function(){var u,p,m,f,g;i._RF.push({},"940cdxU1YlIJJtHL19tD2yV","DisplayUsername",void 0);var y=s.ccclass,D=s.property;e("DisplayUsername",(u=y("DisplayUsername"),p=D(l),u((g=r((f=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i))||this,t(r,"usernameLabel",g,a(r)),r}return n(r,e),r.prototype.start=function(){var e=this;c.getInstance().loadTelegramSDK((function(){var r=c.getInstance().getUser();r&&r.first_name?e.usernameLabel.string="Привет, "+r.first_name+"!":(e.usernameLabel.string="Привет, гость!",console.error("Не удалось получить имя пользователя из Telegram."))}))},r}(o)).prototype,"usernameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/EmptyEnergyMessage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnergyManager.ts","./AdsGramSDK.ts","./TelegramSDK.ts","./ApiClient.ts","./LoadingService.ts"],(function(e){var n,t,r,i,a,o,s,c,u,g,l,p,d,h,y,f,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Label,g=e.RichText,l=e.Button,p=e.Component},function(e){d=e.EnergyManager},function(e){h=e.AdsGramSDK},function(e){y=e.TelegramSDK},function(e){f=e.ApiClient},function(e){m=e.LoadingService}],execute:function(){var I,v,E,T,b,C,M,L,w,R,B,x,S,k;s._RF.push({},"fc8afFIiTdKbrHNUTii8ekJ","EmptyEnergyMessage",void 0);var A=c.ccclass,K=c.property;e("default",(I=K(u),v=K(g),E=K(l),T=K(l),b=K(l),C=K(d),A((w=n((L=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"timerLabel",w,i(n)),r(n,"energyLabel",R,i(n)),r(n,"continueButton",B,i(n)),r(n,"adRestoreButton",x,i(n)),r(n,"starRestoreButton",S,i(n)),r(n,"energyManager",k,i(n)),n.maxEnergy=24,n.currentEnergy=0,n.remainingTime=0,n}t(n,e);var s=n.prototype;return s.show=function(){this.maxEnergy=this.energyManager.getMaxEnergy(),this.currentEnergy=this.energyManager.getCurrentEnergy(),this.remainingTime=Math.floor(this.energyManager.getLeftTime()/1e3),console.log(this.energyManager.getLeftTime()),this.schedule(this.timerStep,1),this.updateEnergyDisplay(),this.updateTimer(),this.node.active=!0,this.continueButton.node.on(l.EventType.CLICK,this.onClickContinue.bind(this),this),this.adRestoreButton.node.on(l.EventType.CLICK,this.onClickAdRestore.bind(this),this),this.starRestoreButton.node.on(l.EventType.CLICK,this.onClickStarRestore.bind(this),this)},s.timerStep=function(){this.remainingTime-=1,this.updateTimer()},s.updateEnergyDisplay=function(){this.energyLabel.string="<color=#FFE96B>"+this.currentEnergy+"</color>/"+this.maxEnergy},s.updateTimer=function(){var e=Math.floor(this.remainingTime/3600),n=Math.floor(this.remainingTime%3600/60),t=this.remainingTime%60;this.timerLabel.string=this.formatTime(e)+":"+this.formatTime(n)+":"+this.formatTime(t)},s.formatTime=function(e){return e<10?"0"+e:""+e},s.hide=function(){this.node.active=!1,this.unschedule(this.timerStep),this.continueButton.node.off(l.EventType.CLICK),this.adRestoreButton.node.off(l.EventType.CLICK),this.starRestoreButton.node.off(l.EventType.CLICK)},s.onHide=function(){},s.onClickContinue=function(){this.onHide()},s.onClickAdRestoreAd=function(){var e=this;m.getInstance().show(),f.getInstance().post("/api/ads/watch",{productId:"ad_energy"}),h.getInstance().showAd("Add5Energy",(function(){e.energyManager.addEnergy(1),e.energyManager.updateEnergyText(),e.onHide(),m.getInstance().hide()}),(function(){console.log("ad error"),m.getInstance().hide()}))},s.onClickAdRestore=function(){var e=a(o().mark((function e(){var n,t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.getInstance().show(),e.next=3,f.getInstance().post("/api/payments/create-invoice",{productId:"restore_1_energy"});case 3:n=e.sent,y.getInstance().openInvoice(n.invoiceUrl,(function(e){"paid"===e?(t.energyManager.addEnergy(1),t.energyManager.updateEnergyText(),t.onHide()):f.getInstance().post("/api/payments/cancel",{orderId:n.orderId}),m.getInstance().hide()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.onClickStarRestore=function(){var e=a(o().mark((function e(){var n,t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.getInstance().show(),e.next=3,f.getInstance().post("/api/payments/create-invoice",{productId:"restore_full_energy"});case 3:n=e.sent,y.getInstance().openInvoice(n.invoiceUrl,(function(e){"paid"===e?(t.energyManager.addEnergy(t.energyManager.getMaxEnergy()),t.energyManager.updateEnergyText(),t.onHide()):f.getInstance().post("/api/payments/cancel",{orderId:n.orderId}),m.getInstance().hide()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n}(p)).prototype,"timerLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(L.prototype,"energyLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(L.prototype,"continueButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(L.prototype,"adRestoreButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(L.prototype,"starRestoreButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(L.prototype,"energyManager",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=L))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemySpawnZone.ts","./EnemyAttackController.ts","./GameManager2.ts"],(function(t){var e,i,o,n,r,a,s,l,d,h,c,u,y,p,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Vec3,d=t.find,h=t.randomRange,c=t.Component},function(t){u=t.EnemySpawnZone},function(t){y=t.EnemyAttackController,p=t.AttackType},function(t){w=t.GameManager}],execute:function(){var _,g,f,v,P,m,C,A,b;r._RF.push({},"67a13tFuSdNGo8wntiAGthr","EnemyAI",void 0);var Z=a.ccclass,k=a.property;t("EnemyAI",(_=Z("EnemyAI"),g=k(s),_((P=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"player",P,n(e)),o(e,"moveSpeed",m,n(e)),o(e,"agroRadius",C,n(e)),o(e,"deagroBuffer",A,n(e)),o(e,"idleWanderInterval",b,n(e)),e._velocity=new l,e._targetPos=new l,e._isAggro=!1,e._spawnZone=null,e._spawnZoneRadius=0,e._spawnZoneCenter=new l,e._wanderTarget=new l,e._wanderCooldown=0,e._attackController=null,e}i(e,t);var r=e.prototype;return r.start=function(){this.player||(this.player=d("Player")),this._attackController=this.getComponent(y),this._attackController&&(this._attackController.target=this.player)},r.update=function(t){if(this.player&&this.player.isValid&&this._spawnZone&&!w.getInstance().isPaused()){var e=l.distance(this.node.worldPosition,this.player.worldPosition),i=l.distance(this.node.worldPosition,this._spawnZoneCenter)-this._spawnZoneRadius;if(this._isAggro)if(i>this.deagroBuffer)this._isAggro=!1,this._wanderCooldown=0;else if(this._attackController&&this._attackController.attackType===p.RANGED){var o=.8*this._attackController.attackRadius;e<.7*o?this.moveAwayFromPlayer(t):e>1.3*o?this.chaseTarget(this.player.worldPosition,t):this.lookAtPlayer()}else this.chaseTarget(this.player.worldPosition,t);else e<=this.agroRadius?this._isAggro=!0:this.idleWander(t)}},r.setSpawnZone=function(t){this._spawnZone=t,this._spawnZoneCenter=t.worldPosition.clone();var e=t.getComponent(u);this._spawnZoneRadius=e?e.spawnRadius:0},r.chaseTarget=function(t,e){var i=t.clone();if(i.y=this.node.worldPosition.y,l.subtract(this._velocity,i,this.node.worldPosition),this._velocity.length()>1.5){this._velocity.y=0,this._velocity.normalize(),this._velocity.multiplyScalar(this.moveSpeed);var o=this.node.worldPosition.y;l.add(this._targetPos,this.node.worldPosition,this._velocity.multiplyScalar(e)),this._targetPos.y=o,this.node.setWorldPosition(this._targetPos),this.node.lookAt(i)}},r.idleWander=function(t){if(this._wanderCooldown-=t,l.distance(this.node.worldPosition,this._wanderTarget)<.2||this._wanderCooldown<=0){var e=h(-this._spawnZoneRadius,this._spawnZoneRadius),i=h(-this._spawnZoneRadius,this._spawnZoneRadius);this._wanderTarget.set(this._spawnZoneCenter.x+e,this.node.worldPosition.y,this._spawnZoneCenter.z+i),this._wanderCooldown=this.idleWanderInterval}else this.chaseTarget(this._wanderTarget,t)},r.lookAtPlayer=function(){var t=this.player.worldPosition.clone();t.y=this.node.worldPosition.y,this.node.lookAt(t)},r.moveAwayFromPlayer=function(t){var e=this.player.worldPosition.clone();e.y=this.node.worldPosition.y,l.subtract(this._velocity,this.node.worldPosition,e),this._velocity.y=0,this._velocity.normalize(),this._velocity.multiplyScalar(this.moveSpeed);var i=this.node.worldPosition.y;l.add(this._targetPos,this.node.worldPosition,this._velocity.multiplyScalar(t)),this._targetPos.y=i,this.node.setWorldPosition(this._targetPos)},e}(c)).prototype,"player",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(v.prototype,"moveSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),C=e(v.prototype,"agroRadius",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),A=e(v.prototype,"deagroBuffer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=e(v.prototype,"idleWanderInterval",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=v))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyAttackController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts","./EnemyProjectile.ts"],(function(t){var e,i,o,a,r,n,c,l,s,p,u,h,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,c=t.Enum,l=t.Prefab,s=t.Node,p=t.Vec3,u=t.instantiate,h=t.Component},function(t){m=t.CharacterCombat},function(t){f=t.EnemyProjectile}],execute:function(){var b,d,g,k,y,A,E,w,C,v,P,M,T,_,j,z,R,L,D,G,N;r._RF.push({},"ac7ccEmFWdG2KSxxPrxeqL/","EnemyAttackController",void 0);var I=n.ccclass,S=n.property,x=(n.type,t("AttackType",function(t){return t[t.MELEE=0]="MELEE",t[t.RANGED=1]="RANGED",t}({})));t("EnemyAttackController",(b=I("EnemyAttackController"),d=S({type:c(x),tooltip:"Тип атаки: ближняя или дальняя"}),g=S({tooltip:"Радиус атаки"}),k=S({tooltip:"Угол конуса атаки в градусах (для ближней атаки)"}),y=S({tooltip:"Время перезарядки атаки в секундах"}),A=S({tooltip:"Множитель урона (базовый урон берется из CharacterCombat)"}),E=S({type:l,tooltip:"Префаб снаряда для дальней атаки",visible:function(){return this.attackType===x.RANGED}}),w=S({tooltip:"Скорость снаряда для дальней атаки",visible:function(){return this.attackType===x.RANGED}}),C=S({tooltip:"Время жизни снаряда в секундах",visible:function(){return this.attackType===x.RANGED}}),v=S({type:s,tooltip:"Цель атаки (обычно игрок)"}),b((T=e((M=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"attackType",T,a(e)),o(e,"attackRadius",_,a(e)),o(e,"attackAngle",j,a(e)),o(e,"attackCooldown",z,a(e)),o(e,"damageMultiplier",R,a(e)),o(e,"projectilePrefab",L,a(e)),o(e,"projectileSpeed",D,a(e)),o(e,"projectileLifetime",G,a(e)),o(e,"target",N,a(e)),e._combat=null,e._lastAttackTime=0,e}i(e,t);var r=e.prototype;return r.start=function(){this._combat=this.getComponent(m),this._combat||console.error("EnemyAttackController требует компонент CharacterCombat"),this.node.on("AttackHitMoment",this.onAttackHitMoment,this)},r.update=function(t){if(this._combat&&this._combat.isAlive()&&this.target&&this.target.isValid&&!(performance.now()/1e3-this._lastAttackTime<this.attackCooldown)){var e=this.target.worldPosition,i=this.node.worldPosition;if(p.distance(i,e)<=this.attackRadius){var o=e.clone();o.y=i.y,this.node.lookAt(o),this.attackType===x.MELEE?this.isTargetInAttackCone()&&this.startAttack():this.startAttack()}}},r.isTargetInAttackCone=function(){var t=this.node.forward.clone().normalize(),e=p.subtract(new p,this.target.worldPosition,this.node.worldPosition).normalize(),i=p.dot(t,e);return 180*Math.acos(i)/Math.PI<=this.attackAngle/2},r.startAttack=function(){this._lastAttackTime=performance.now()/1e3,this.attackType===x.RANGED?this.performRangedAttack():this.performMeleeAttack()},r.onAttackHitMoment=function(){this.attackType===x.MELEE&&this.performMeleeAttack()},r.performMeleeAttack=function(){if(this._combat&&this.target&&(p.distance(this.node.worldPosition,this.target.worldPosition)<=this.attackRadius&&this.isTargetInAttackCone())){var t=this.target.getComponent(m);if(t&&t.isAlive()){var e=this._combat.damage*this.damageMultiplier;t.takeDamage(e),console.log(this.node.name+" атаковал "+this.target.name+" и нанес "+e+" урона")}}},r.performRangedAttack=function(){if(this._combat&&this.target&&this.projectilePrefab){var t=u(this.projectilePrefab);t.setParent(this.node.scene);var e=this.node.worldPosition.clone();e.y+=1,t.setWorldPosition(e);var i=t.getComponent(f);if(i){var o=this._combat.damage*this.damageMultiplier;i.initialize(this.target,o,this.projectileSpeed,this.projectileLifetime),console.log(this.node.name+" выпустил снаряд в "+this.target.name)}else console.warn("На префабе снаряда отсутствует компонент EnemyProjectile"),t.destroy()}},e}(h)).prototype,"attackType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.MELEE}}),_=e(M.prototype,"attackRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),j=e(M.prototype,"attackAngle",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 180}}),z=e(M.prototype,"attackCooldown",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=e(M.prototype,"damageMultiplier",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=e(M.prototype,"projectilePrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(M.prototype,"projectileSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),G=e(M.prototype,"projectileLifetime",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),N=e(M.prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=M))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,e,i,s,t;return{setters:[function(n){o=n.createForOfIteratorHelperLoose},function(n){e=n.cclegacy,i=n._decorator,s=n.resources,t=n.JsonAsset}],execute:function(){var f,c;e._RF.push({},"ce3a0kSv2tE66HpYPeuAn7i","EnemyConfig",void 0);var a=i.ccclass;i.property,n("EnemyConfig",a("EnemyConfig")(((c=function(){function n(){this._enemiesConfig=null,this._zonesConfig=null,this._configLoaded=!1,this._configLoading=!1,this._onConfigLoadedCallbacks=[]}n.getInstance=function(){return this._instance||(this._instance=new n),this._instance};var e=n.prototype;return e.addOnConfigLoadedCallback=function(n){console.log("[EnemyConfig] Добавлен колбек после загрузки конфигурации"),this._configLoaded?n():this._onConfigLoadedCallbacks.push(n)},e.removeOnConfigLoadedCallback=function(n){var o=this._onConfigLoadedCallbacks.indexOf(n);-1!==o&&this._onConfigLoadedCallbacks.splice(o,1)},e.loadConfig=function(){var n=this;this._configLoaded||this._configLoading||(this._configLoading=!0,console.log("[EnemyConfig] Начало загрузки конфигурации..."),s.load("configs/enemies",t,(function(o,e){if(o)return console.error("[EnemyConfig] Ошибка загрузки конфигурации врагов:",o),void(n._configLoading=!1);n._enemiesConfig=e.json,console.log("[EnemyConfig] Конфигурация врагов загружена"),s.load("configs/spawnZones",t,(function(o,e){if(o)return console.error("[EnemyConfig] Ошибка загрузки конфигурации зон:",o),void(n._configLoading=!1);n._zonesConfig=e.json,console.log("[EnemyConfig] Конфигурация зон загружена"),n._configLoaded=!0,n._configLoading=!1,n._onConfigLoadedCallbacks.forEach((function(n){try{n()}catch(n){console.error("[EnemyConfig] Ошибка при вызове колбека:",n)}})),n._onConfigLoadedCallbacks=[],console.log("[EnemyConfig] Загрузка конфигурации завершена")}))})))},e.isConfigLoaded=function(){return this._configLoaded},e.isConfigLoading=function(){return this._configLoading},e.getEnemyStats=function(n){return this._configLoaded&&this._enemiesConfig&&this._enemiesConfig.enemies?this._enemiesConfig.enemies.find((function(o){return o.id===n})):(console.warn("[EnemyConfig] Конфигурация не загружена"),null)},e.getZoneConfig=function(n){return this._configLoaded&&this._zonesConfig&&this._zonesConfig.zones?this._zonesConfig.zones.find((function(o){return o.id===n})):(console.warn("[EnemyConfig] Конфигурация не загружена"),null)},e.getRandomEnemyType=function(){if(!this._configLoaded||!this._enemiesConfig||!this._enemiesConfig.enemies)return console.warn("[EnemyConfig] Конфигурация не загружена"),null;var n=this._enemiesConfig.enemies;if(0===n.length)return null;for(var e,i=n.reduce((function(n,o){return n+(o.spawnWeight||1)}),0),s=Math.random()*i,t=o(n);!(e=t()).done;){var f=e.value;if((s-=f.spawnWeight||1)<=0)return f}return n[0]},n}())._instance=null,f=c))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts"],(function(e){var i,t,o,n,r,s,l,a,d,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Vec3,a=e.Collider,d=e.Component},function(e){c=e.CharacterCombat}],execute:function(){var h,u,p,m;r._RF.push({},"40fe17m4ztDfrpgU4shvoKv","EnemyProjectile",void 0);var f=s.ccclass,g=s.property;e("EnemyProjectile",f("EnemyProjectile")((p=i((u=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return i=e.call.apply(e,[this].concat(r))||this,o(i,"speed",p,n(i)),o(i,"lifetime",m,n(i)),i._target=null,i._damage=0,i._direction=new l,i._elapsedTime=0,i}t(i,e);var r=i.prototype;return r.initialize=function(e,i,t,o){this._target=e,this._damage=i,void 0!==t&&(this.speed=t),void 0!==o&&(this.lifetime=o),this._direction=l.subtract(new l,e.worldPosition,this.node.worldPosition),this._direction.y+=.5,this._direction.normalize(),this.node.lookAt(e.worldPosition)},r.start=function(){var e=this.getComponent(a);e?e.on("onTriggerEnter",this.onCollision,this):console.warn("На снаряде отсутствует коллайдер")},r.update=function(e){if(this._elapsedTime+=e,this._elapsedTime>=this.lifetime)this.node.destroy();else{var i=this.speed*e,t=new l(this.node.worldPosition.x+this._direction.x*i,this.node.worldPosition.y+this._direction.y*i,this.node.worldPosition.z+this._direction.z*i);this.node.setWorldPosition(t)}},r.onCollision=function(e){var i,t=e.otherCollider.node;if(t===this._target){var o=t.getComponent(c);o&&o.isAlive()&&(o.takeDamage(this._damage),console.log("Снаряд попал в игрока и нанес "+this._damage+" урона")),this.node.destroy()}else[null==(i=this.node.parent)?void 0:i.name,"ranged_slime"].includes(t.name)||null!==t.getComponent("AttackTriggerCone")||this.node.destroy()},i}(d)).prototype,"speed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=i(u.prototype,"lifetime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),h=u))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemySpawner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemyConfig.ts","./CharacterCombat.ts","./EnemyAI.ts","./EnemyAttackController.ts"],(function(e){var n,t,r,a,i,o,s,c,u,p,l,f,h,m,d,y,b,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.randomRange,p=e.resources,l=e.Prefab,f=e.Vec3,h=e.Component,m=e.instantiate},function(e){d=e.EnemyConfig},function(e){y=e.CharacterCombat},function(e){b=e.EnemyAI},function(e){w=e.EnemyAttackController}],execute:function(){var g,P,v,E,k,C;s._RF.push({},"eed3fU18vlLFIIksE/3RqHV","EnemySpawner",void 0);var S=c.ccclass,R=c.property;e("EnemySpawner",S("EnemySpawner")((v=n((P=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,r(n,"spawnRadius",v,a(n)),r(n,"healthMultiplier",E,a(n)),r(n,"damageMultiplier",k,a(n)),r(n,"enemyTypes",C,a(n)),n._prefabCache=new Map,n._config=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){var e=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._config=d.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.spawnEnemy=function(){var e=i(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getRandomEnemyType()){e.next=4;break}return console.warn("[EnemySpawner] Не найдены типы врагов для спавна"),e.abrupt("return",null);case 4:if(r=n||this.findValidSpawnPosition()){e.next=8;break}return console.warn("[EnemySpawner] Не найдено валидное место для спавна врага"),e.abrupt("return",null);case 8:return e.next=10,this.createEnemy(t,r);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.spawnEnemies=function(){var e=i(o().mark((function e(n){var t,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=0;case 2:if(!(r<n)){e.next=10;break}return e.next=5,this.spawnEnemy();case 5:(a=e.sent)&&t.push(a);case 7:r++,e.next=2;break;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.spawnRandomEnemies=function(e,n){var t=Math.floor(u(e,n+1));return this.spawnEnemies(t)},s.createEnemy=function(){var e=i(o().mark((function e(n,t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){r.loadEnemyPrefab(n,(function(a){if(!a)return console.error("[EnemySpawner] Не удалось загрузить префаб для врага "+n.name),void e(null);var i=m(a);i.setWorldPosition(t),i.setParent(r.node.parent||r.node.scene);var o=i.getComponent(b);o&&o.setSpawnZone(r.node),r.configureEnemy(i,n),console.log("[EnemySpawner] Создан враг "+n.name),e(i)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),s.loadEnemyPrefab=function(e,n){var t=this;this._prefabCache.has(e.prefabPath)?n(this._prefabCache.get(e.prefabPath)):p.load(e.prefabPath,l,(function(r,a){if(r)return console.error("[EnemySpawner] Ошибка загрузки префаба "+e.prefabPath+":",r),void n(null);t._prefabCache.set(e.prefabPath,a),n(a)}))},s.configureEnemy=function(e,n){var t=e.getComponent(y);t&&(t.maxHP=n.health*this.healthMultiplier,t.damage=n.damage*this.damageMultiplier,t.armor=n.armor,t.attackSpeed=1/n.attackCooldown,t.attackRadius=n.attackRadius,void 0!==n.expValue&&(t._expValue=n.expValue));var r=e.getComponent(w);r&&(r.attackType="ranged"===n.attackType?1:0,r.attackRadius=n.attackRadius,r.attackCooldown=n.attackCooldown,"ranged"===n.attackType&&n.projectilePrefabPath&&this.loadProjectilePrefab(n,(function(e){e&&(r.projectilePrefab=e,r.projectileSpeed=n.projectileSpeed||10,r.projectileLifetime=n.projectileLifetime||5)})));var a=e.getComponent(b);a&&(a.moveSpeed=n.moveSpeed,a.agroRadius=n.agroRadius)},s.loadProjectilePrefab=function(e,n){var t=this;e.projectilePrefabPath?this._prefabCache.has(e.projectilePrefabPath)?n(this._prefabCache.get(e.projectilePrefabPath)):p.load(e.projectilePrefabPath,l,(function(r,a){if(r)return console.error("[EnemySpawner] Ошибка загрузки префаба снаряда "+e.projectilePrefabPath+":",r),void n(null);t._prefabCache.set(e.projectilePrefabPath,a),n(a)})):n(null)},s.findValidSpawnPosition=function(){var e=this.node.worldPosition,n=u(-this.spawnRadius,this.spawnRadius),t=u(-this.spawnRadius,this.spawnRadius);return new f(e.x+n,e.y,e.z+t)},s.getRandomEnemyType=function(){if(!this._config)return console.error("[EnemySpawner] Конфигурация не загружена"),null;if(this.enemyTypes&&this.enemyTypes.length>0){var e=Math.floor(Math.random()*this.enemyTypes.length),n=this.enemyTypes[e];return this._config.getEnemyStats(n)}return null},n}(h)).prototype,"spawnRadius",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),E=n(P.prototype,"healthMultiplier",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=n(P.prototype,"damageMultiplier",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=n(P.prototype,"enemyTypes",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=P))||g);s._RF.pop()}}}));

System.register("chunks:///_virtual/EnemySpawnZone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemySpawner.ts","./EnemyConfig.ts"],(function(e){var n,t,i,s,o,a,r,l,c,p,u,h,m,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,a=e.createClass,r=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){c=e.cclegacy,p=e._decorator,u=e.Component,h=e.Node},function(e){m=e.EnemySpawner},function(e){f=e.EnemyConfig}],execute:function(){var _,d,g,y,w,I,v,E,S,T,b;c._RF.push({},"59edemHdtxNhqXNYJ5FO0pD","EnemySpawnZone",void 0);var C=p.ccclass,L=p.property;e("EnemySpawnZone",(_=C("EnemySpawnZone"),d=L({tooltip:"ID зоны спавна в конфигурации"}),g=L(),y=L(),w=L({tooltip:"Единоразовый спавн (для босс-зоны)"}),_((E=n((v=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"zoneId",E,s(n)),i(n,"_spawnRadius",S,s(n)),i(n,"_spawnInterval",T,s(n)),i(n,"oneTimeSpawn",b,s(n)),n._active=!0,n._slots=[],n._spawner=null,n._config=null,n._configLoaded=!1,n._maxEnemies=5,n._healthMultiplier=1,n._damageMultiplier=1,n._enemyTypes=[],n}t(n,e);var c=n.prototype;return c.start=function(){f.getInstance().isConfigLoaded()?this.onConfigLoaded():(f.getInstance().addOnConfigLoadedCallback(this.onConfigLoaded.bind(this)),f.getInstance().isConfigLoading()||f.getInstance().loadConfig())},c.onDestroy=function(){f.getInstance().isConfigLoaded()||f.getInstance().removeOnConfigLoadedCallback(this.onConfigLoaded.bind(this)),this.clearAllTimers()},c.clearAllTimers=function(){for(var e,n=o(this._slots);!(e=n()).done;){var t=e.value;null!==t.timerId&&(clearTimeout(t.timerId),t.timerId=null)}},c.onConfigLoaded=function(){this._configLoaded||(this._configLoaded=!0,this.loadZoneConfig())},c.loadZoneConfig=function(){if(this._config=f.getInstance().getZoneConfig(this.zoneId),this._config){this._spawnRadius=this._config.spawnRadius||10,this._spawnInterval=this._config.spawnInterval||5,this._maxEnemies=this._config.maxEnemies||5,this._healthMultiplier=this._config.healthMultiplier||1,this._damageMultiplier=this._config.damageMultiplier||1,this._config.enemyTypes&&Array.isArray(this._config.enemyTypes)&&(this._enemyTypes=this._config.enemyTypes.slice()),console.log("[EnemySpawnZone] Загружена конфигурация для зоны: "+this.zoneId),this._spawner=this.getComponent(m)||this.addComponent(m),this._spawner.spawnRadius=this._spawnRadius,this._spawner.healthMultiplier=this._healthMultiplier,this._spawner.damageMultiplier=this._damageMultiplier,this._spawner.enemyTypes=this._enemyTypes;for(var e=0;e<this._maxEnemies;e++)this._slots.push({enemy:null,timerId:null});console.log("[EnemySpawnZone] Зона "+this.zoneId+" инициализирована, макс. врагов: "+this._maxEnemies),this.startSpawning()}else console.error("[EnemySpawnZone] Не найдена конфигурация для зоны с ID: "+this.zoneId)},c.setActive=function(e){this._active!==e&&(this._active=e,e?(console.log("[EnemySpawnZone] Зона "+this.zoneId+" активирована"),this.oneTimeSpawn?this.spawnEnemyInSlot(0):this.startSpawning()):(this.clearAllTimers(),console.log("[EnemySpawnZone] Зона "+this.zoneId+" деактивирована")))},c.isActive=function(){return this._active},c.startSpawning=function(){var e=this;if(this._active){this.clearAllTimers();for(var n=function(n){var t=500*n+1e3*Math.random();e._slots[n].timerId=setTimeout((function(){e.spawnEnemyInSlot(n)}),t)},t=0;t<this._slots.length;t++)n(t)}},c.spawnEnemyInSlot=function(){var e=r(l().mark((function e(n){var t,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._spawner&&this._configLoaded&&this._active){e.next=2;break}return e.abrupt("return");case 2:if(!this._slots[n].enemy||!this._slots[n].enemy.isValid){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._spawner.spawnEnemy();case 6:(t=e.sent)?(this._slots[n].enemy=t,t.once(h.EventType.NODE_DESTROYED,(function(){i._slots[n]&&(i._slots[n].enemy=null,!i.oneTimeSpawn&&i._active&&(i._slots[n].timerId=setTimeout((function(){i.spawnEnemyInSlot(n)}),1e3*i._spawnInterval)))}))):!this.oneTimeSpawn&&this._active&&(this._slots[n].timerId=setTimeout((function(){i.spawnEnemyInSlot(n)}),1e3));case 8:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.spawnEnemies=function(e){this._spawner&&this._configLoaded&&this._active&&(this._spawner.spawnRandomEnemies(e,e),console.log("[EnemySpawnZone] Одноразовый спавн "+e+" врагов"))},c.getSlot=function(e){return this._slots[e]},a(n,[{key:"spawnRadius",get:function(){return this._spawnRadius}},{key:"maxEnemies",get:function(){return this._maxEnemies}},{key:"spawnInterval",get:function(){return this._spawnInterval}},{key:"healthMultiplier",get:function(){return this._healthMultiplier}},{key:"damageMultiplier",get:function(){return this._damageMultiplier}},{key:"enemyTypes",get:function(){return this._enemyTypes}}]),n}(u)).prototype,"zoneId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zone_1"}}),S=n(v.prototype,"_spawnRadius",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),T=n(v.prototype,"_spawnInterval",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=n(v.prototype,"oneTimeSpawn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=v))||I));c._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,s,a,i,g,o,h,y,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,g=e.Label,o=e.Node,h=e.game,y=e.Game,c=e.Sprite,l=e.Component}],execute:function(){var u,p,E,d,m,f,x;a._RF.push({},"fb4ffoX8hpBW4z32XCZN2dO","EnergyManager",void 0);var I=i.ccclass,v=i.property;e("EnergyManager",(u=I("EnergyManager"),p=v(g),E=v(o),u((f=t((m=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"energyText",f,s(t)),n(t,"energyProgressNode",x,s(t)),t.regenRate=parseInt(localStorage.getItem("energy.regenRate")),t.maxEnergy=parseInt(localStorage.getItem("energy.max")),t.currentEnergy=parseInt(localStorage.getItem("energy.current")),t.isRegenerating=!1,t.lastUpdateTime=parseInt(localStorage.getItem("energy.lastUpdated")),t.progressUpdateInterval=null,t}r(t,e);var a=t.prototype;return a.onEnable=function(){this.loadEnergyData(),this.currentEnergy<this.maxEnergy?(this.restoreEnergyBasedOnTime(),this.startRegeneration(),this.startProgressUpdate()):this.hideEnergyProgress(),this.updateEnergyText(),h.on(y.EVENT_SHOW,this.onAppShow,this)},a.onDisable=function(){h.off(y.EVENT_SHOW,this.onAppShow,this),this.stopProgressUpdate()},a.getCurrentEnergy=function(){return this.currentEnergy},a.getMaxEnergy=function(){return this.maxEnergy},a.getLeftTime=function(){return 1e3*this.regenRate-(Date.now()-this.lastUpdateTime)},a.restoreEnergyBasedOnTime=function(){var e=Date.now(),t=Math.floor((e-this.lastUpdateTime)/(1e3*this.regenRate));t>0&&(this.currentEnergy=Math.min(this.maxEnergy,this.currentEnergy+t),this.lastUpdateTime+=t*(1e3*this.regenRate),this.updateEnergyText(),this.saveEnergyData(),this.currentEnergy>=this.maxEnergy&&this.hideEnergyProgress())},a.startRegeneration=function(){this.isRegenerating||(this.schedule(this.restoreEnergy,Math.min(Date.now()-this.lastUpdateTime/1e3,this.regenRate)),this.isRegenerating=!0)},a.stopRegeneration=function(){this.isRegenerating&&(this.unschedule(this.restoreEnergy),this.isRegenerating=!1)},a.startProgressUpdate=function(){var e=this;this.energyProgressNode&&(this.energyProgressNode.active=!0,this.progressUpdateInterval&&clearInterval(this.progressUpdateInterval),this.updateEnergyProgress(),this.progressUpdateInterval=setInterval((function(){e.updateEnergyProgress()}),1e3))},a.stopProgressUpdate=function(){this.progressUpdateInterval&&(clearInterval(this.progressUpdateInterval),this.progressUpdateInterval=null)},a.hideEnergyProgress=function(){this.stopProgressUpdate(),this.energyProgressNode&&(this.energyProgressNode.active=!1)},a.updateEnergyProgress=function(){if(this.energyProgressNode.active&&!(this.currentEnergy>=this.maxEnergy)){var e=Date.now()-this.lastUpdateTime,t=1e3*this.regenRate,r=Math.min(1,e/t);this.energyProgressNode.getComponent(c).fillRange=-r}},a.restoreEnergy=function(){this.currentEnergy<this.maxEnergy?(this.currentEnergy+=1,this.lastUpdateTime=Date.now(),this.updateEnergyText(),this.saveEnergyData(),this.currentEnergy>=this.maxEnergy&&(this.hideEnergyProgress(),this.stopRegeneration())):(this.hideEnergyProgress(),this.stopRegeneration())},a.onAppShow=function(){this.restoreEnergyBasedOnTime(),this.currentEnergy<this.maxEnergy&&this.startProgressUpdate()},a.addEnergy=function(e){this.currentEnergy=Math.min(this.currentEnergy+e,this.maxEnergy),this.saveEnergyData(),this.updateEnergyText(),this.currentEnergy>=this.maxEnergy?(this.hideEnergyProgress(),this.stopRegeneration()):this.isRegenerating||(this.startRegeneration(),this.startProgressUpdate())},a.reduceEnergy=function(e){console.log("reduceEnergy",e),this.currentEnergy=Math.max(this.currentEnergy-e,0),console.log(this.currentEnergy,this.maxEnergy),this.currentEnergy<this.maxEnergy&&(this.startRegeneration(),this.startProgressUpdate()),this.saveEnergyData(),this.updateEnergyText()},a.saveEnergyData=function(){localStorage.setItem("energy.current",this.currentEnergy.toString()),localStorage.setItem("energy.lastUpdated",this.lastUpdateTime.toString())},a.loadEnergyData=function(){this.regenRate=parseInt(localStorage.getItem("energy.regenRate")),this.maxEnergy=parseInt(localStorage.getItem("energy.max")),this.currentEnergy=parseInt(localStorage.getItem("energy.current")),this.lastUpdateTime=parseInt(localStorage.getItem("energy.lastUpdated"))},a.updateEnergyText=function(){this.energyText&&(this.energyText.string=this.currentEnergy+"/"+this.maxEnergy)},t}(l)).prototype,"energyText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(m.prototype,"energyProgressNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameFiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./ApiClient.ts"],(function(e){var n,t,r,c,i;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){c=e.GameFi},function(e){i=e.ApiClient}],execute:function(){r._RF.push({},"c0275zQerZGYqW0aBb5bP+y","GameFiManager",void 0),e("GameFiManager",function(){function e(){this.gameFi=null,this.walletConnector=null,this.serverWalletAddress=null,this.connectedToServer=!1}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.getInitializedInstance=function(){var r=n(t().mark((function n(){var r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.getInstance(),this.instance.gameFi){n.next=4;break}return n.next=4,r.initialize();case 4:return n.abrupt("return",r);case 5:case"end":return n.stop()}}),n,this)})));return function(){return r.apply(this,arguments)}}();var r=e.prototype;return r.initialize=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gameFi){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c.create({connector:{manifestUrl:"https://run-ton-royale-launch-game.vercel.app/tonconnect-manifest.json"}});case 4:return this.gameFi=e.sent,(n=document.getElementById("__ton-connect-ui--widget-root"))&&(n.style.display="block"),this.walletConnector=this.gameFi.walletConnector,e.next=10,this.checkServerConnection();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.checkServerConnection=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.getInstance().get("/api/wallet");case 3:(n=e.sent)?(this.serverWalletAddress=n.address,this.connectedToServer=n.connected):(this.serverWalletAddress=null,this.connectedToServer=!1),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Ошибка проверки подключения к серверу:",e.t0),this.serverWalletAddress=null,this.connectedToServer=!1;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r.getWalletConnector=function(){return this.walletConnector},r.isConnected=function(){return this.connectedToServer},r.connect=function(){var e;null==(e=this.walletConnector)||e.openModal()},r.disconnect=function(){var e,n;(null==(e=this.walletConnector)?void 0:e.connected)&&(null==(n=this.walletConnector)||n.disconnect()),i.getInstance().delete("/api/wallet"),this.connectedToServer=!1,this.serverWalletAddress=null},r.onModalStateChange=function(e){var n;return(null==(n=this.walletConnector)?void 0:n.onModalStateChange(e))||function(){}},r.onStatusChange=function(e){var n;return(null==(n=this.walletConnector)?void 0:n.onStatusChange(e))||function(){}},r.getAccountAddress=function(){return this.serverWalletAddress},e}()).instance=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Dice.ts","./Cell.ts","./TelegramSDK2.ts"],(function(e){var i,t,n,o,a,r,l,u,c,p,s,d,b,h,f,m,g,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Button,u=e.Node,c=e.Prefab,p=e.AudioSource,s=e.Vec3,d=e.tween,b=e.Canvas,h=e.Component,f=e.instantiate},function(e){m=e.Dice},function(e){g=e.Cell},function(e){y=e.TelegramSDK}],execute:function(){var S,w,P,v,C,z,I,O,G,D,T,A,k,R,E,M,U,F,B,x,H,N,K,q,L,j,Y,_,V,J,Q,W,Z,X,$,ee,ie,te,ne,oe,ae,re,le,ue,ce,pe,se,de,be,he,fe,me,ge,ye,Se,we,Pe,ve,Ce,ze,Ie,Oe,Ge,De,Te;a._RF.push({},"3711d4lFTdGra6uI1QJBlzs","GameManager",void 0);var Ae=r.ccclass,ke=r.property,Re=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.CRYSTAL=1]="CRYSTAL",e[e.DICE=2]="DICE",e[e.KEY=3]="KEY",e[e.HOPPER=4]="HOPPER",e[e.GO=5]="GO",e[e.TON=6]="TON",e[e.FORTUNE=7]="FORTUNE",e}(Re||{});e("GameManager",(S=Ae("GameManager"),w=ke(m),P=ke(l),v=ke([u]),C=ke(u),z=ke(u),I=ke(u),O=ke(c),G=ke(c),D=ke(c),T=ke(c),A=ke(u),k=ke(u),R=ke(u),E=ke(u),M=ke(u),U=ke(u),F=ke(u),B=ke(u),x=ke(u),H=ke(u),N=ke({type:cc.AudioSource}),K=ke({type:cc.AudioClip}),q=ke({type:cc.AudioClip}),L=ke({type:cc.AudioClip}),j=ke({type:cc.AudioClip}),Y=ke({type:cc.AudioClip}),_=ke({type:cc.AudioClip}),V=ke({type:cc.AudioClip}),J=ke({type:cc.AudioClip}),S((Z=i((W=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a))||this,n(i,"dice",Z,o(i)),n(i,"diceButton",X,o(i)),n(i,"cells",$,o(i)),n(i,"player",ee,o(i)),n(i,"moveDelay",ie,o(i)),n(i,"animatedObject",te,o(i)),n(i,"animationDuration",ne,o(i)),n(i,"jumpHeight",oe,o(i)),n(i,"canvas",ae,o(i)),n(i,"coinPrefab",re,o(i)),n(i,"crystalPrefab",le,o(i)),n(i,"keyPrefab",ue,o(i)),n(i,"dicePrefab",ce,o(i)),n(i,"targetPoint",pe,o(i)),n(i,"crystalPoint",se,o(i)),n(i,"dicePoint",de,o(i)),n(i,"keyPoint",be,o(i)),n(i,"popupGame",he,o(i)),n(i,"popupGame1",fe,o(i)),n(i,"popupSpin",me,o(i)),n(i,"popupCash",ge,o(i)),n(i,"popupKey",ye,o(i)),n(i,"popupDice",Se,o(i)),n(i,"fastMultiplier",we,o(i)),n(i,"audioSource",Pe,o(i)),n(i,"stepSound",ve,o(i)),n(i,"rewardSound",Ce,o(i)),n(i,"cashSound",ze,o(i)),n(i,"mainSound",Ie,o(i)),n(i,"spinStartSound",Oe,o(i)),n(i,"arcadeSound",Ge,o(i)),n(i,"diceSound",De,o(i)),n(i,"diceNSound",Te,o(i)),i.currentCellIndex=0,i.isMoving=!1,i.flyCount=void 0,i}t(i,e);var a=i.prototype;return a.start=function(){this.diceButton&&this.diceButton.node.on("click",this.startTurn,this),this.audioSource||(this.audioSource=this.node.addComponent(p)),this.cells.length>0&&this.player&&(this.currentCellIndex=0,this.player.setPosition(this.cells[0].position),console.log("Начальная позиция игрока:",this.player.position)),y.getInstance().loadTelegramSDK((function(){console.log("Telegram SDK загружен")}))},a.startTurn=function(){var e,i=this;null==(e=y.getInstance().getHapticFeedback())||e.impactOccurred("medium"),this.mainSound=this.diceSound,this.playRewardSound(),this.playRewardSound&&cc.tween(this.playRewardSound).delay(.89).call((function(){var e;i.mainSound=i.diceNSound,i.playRewardSound(),null==(e=y.getInstance().getHapticFeedback())||e.impactOccurred("light")})).start(),this.diceButton.interactable=!1,console.log("Бросок кубика!"),this.dice&&(this.dice.roll(),this.scheduleOnce((function(){var e=i.dice.getDiceResult();console.log("Результат броска:",e),i.movePlayer(e)}),this.moveDelay))},a.movePlayer=function(e){var i=this;if(!(this.isMoving||e<=0)){this.isMoving=!0;var t=e;!function e(){if(t<=0)return i.isMoving=!1,i.handleCellType(),void(i.diceButton.interactable=!0);i.currentCellIndex=(i.currentCellIndex+1)%i.cells.length,console.log("Игрок движется на ячейку:",i.currentCellIndex);var n=i.cells[i.currentCellIndex],o=n.position,a=new s(o.x,o.y+i.jumpHeight,o.z),r=new s(o.x,o.y,o.z),l=i.animationDuration/i.fastMultiplier;d(i.player).to(l/4,{scale:new s(1.2,.8,1.2)},{easing:"sineOut"}).to(l/4,{scale:new s(1,1,1)},{easing:"sineIn"}).to(l/2,{position:a},{easing:"sineOut"}).to(l/2,{position:r},{easing:"sineIn"}).to(l/4,{scale:new s(.8,1.2,.8)},{easing:"sineOut"}).to(l/4,{scale:new s(1,1,1)},{easing:"sineIn"}).call((function(){var o;i.animateCell(n),i.animatePlayer(),t--,e(),null==(o=y.getInstance().getHapticFeedback())||o.impactOccurred("light")})).start()}()}},a.animateCell=function(e){var i=e.position.clone(),t=new s(i.x,i.y-.08,i.z);d(e).to(.1,{position:t},{easing:"quadOut"}).to(.1,{position:i},{easing:"quadIn"}).start()},a.animatePlayer=function(){var e=this.player.position.clone(),i=new s(e.x,e.y-.08,e.z);this.playStepSound(),d(this.player).to(.1,{position:i},{easing:"quadOut"}).to(.1,{position:e},{easing:"quadIn"}).start()},a.playStepSound=function(){this.audioSource&&this.stepSound?(this.audioSource.playOneShot(this.stepSound),console.log("звук")):console.error("Ошибка: AudioSource или StepSound не установлены!")},a.playRewardSound=function(){this.audioSource&&this.mainSound?(this.audioSource.playOneShot(this.mainSound),console.log("звук")):console.error("Ошибка: AudioSource или StepSound не установлены!")},a.handleCellType=function(){var e=this.cells[this.currentCellIndex].getComponent(g);if(e){switch(e.type){case Re.DEFAULT:console.log("Игрок остановился на обычной ячейке.");break;case Re.CRYSTAL:this.mainSound=this.cashSound,this.flyCount=10,this.coinPrefab=this.crystalPrefab,this.targetPoint=this.crystalPoint,this.popupGame=this.popupCash,this.showBubbleUIpopup(),console.log("Игрок остановился на ячейке с кристаллом!");break;case Re.DICE:this.mainSound=this.rewardSound,this.flyCount=3,this.coinPrefab=this.dicePrefab,this.targetPoint=this.dicePoint,this.popupGame=this.popupDice,this.showBubbleUIpopup(),console.log("Игрок попал на ячейку броска кубика!");break;case Re.KEY:this.mainSound=this.rewardSound,this.flyCount=3,this.coinPrefab=this.keyPrefab,this.targetPoint=this.keyPoint,this.popupGame=this.popupKey,this.showBubbleUIpopup(),console.log("Игрок нашел ключ!");break;case Re.HOPPER:this.mainSound=this.arcadeSound,console.log("Игрок прыгнул на другую ячейку!"),this.popupGame=this.popupGame1,this.showUIpopup();break;case Re.GO:this.mainSound=this.arcadeSound,console.log("Игрок пересек старт!"),this.popupGame=this.popupGame1,this.showUIpopup();break;case Re.TON:console.log("Игрок попал на тонущую ячейку!");break;case Re.FORTUNE:this.mainSound=this.spinStartSound,this.popupGame=this.popupSpin,this.showUIpopup(),console.log("Игрок получил удачу!")}this.coinPrefab}},a.showUIpopup=function(){var e;this.popupGame&&(this.playRewardSound(),this.popupGame.setScale(s.ZERO),this.popupGame.active=!0,d(this.popupGame).to(.3,{scale:s.ONE},{easing:"backOut"}).delay(.89).start(),null==(e=y.getInstance().getHapticFeedback())||e.impactOccurred("light"))},a.showBubbleUIpopup=function(){var e=this;this.popupGame&&(this.popupGame.active=!0,this.playRewardSound(),this.popupGame.setScale(0,0,0),cc.tween(this.popupGame).to(.3,{scale:new cc.Vec3(1,1,1)},{easing:"quadOut"}).call((function(){e.spawnAndAnimateCoins()})).delay(.89).to(.21,{scale:new cc.Vec3(0,0,0)},{easing:"quadIn"}).start())},a.hideUIpopup=function(){var e=this;setTimeout((function(){e.popupGame&&(e.popupGame.active=!1)}),3e3)},a.spawnAndAnimateCoins=function(){var e=this,i=this.node.scene.getComponentInChildren(b);if(i)for(var t=function(){var t=f(e.coinPrefab);i.node.addChild(t);var n=350*(Math.random()-.5)*2,o=350*(Math.random()-.5)*2;t.setPosition(new s(n,o,0)),t.setScale(new s(0,0,0));var a=e.targetPoint.getWorldPosition(),r=i.node.inverseTransformPoint(new s,a);d(t).to(.3,{scale:new s(.6,.6,.6)},{easing:"quadOut"}).start(),d(t).delay(.5*Math.random()).to(.6,{position:r},{easing:"quadInOut"}).call((function(){var e;null==(e=y.getInstance().getHapticFeedback())||e.impactOccurred("medium"),t.destroy()})).start()},n=0;n<this.flyCount;n++)t();else console.error("Canvas не найден в сцене!")},i}(h)).prototype,"dice",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(W.prototype,"diceButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(W.prototype,"cells",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=i(W.prototype,"player",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(W.prototype,"moveDelay",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te=i(W.prototype,"animatedObject",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i(W.prototype,"animationDuration",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),oe=i(W.prototype,"jumpHeight",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),ae=i(W.prototype,"canvas",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i(W.prototype,"coinPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=i(W.prototype,"crystalPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=i(W.prototype,"keyPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=i(W.prototype,"dicePrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=i(W.prototype,"targetPoint",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=i(W.prototype,"crystalPoint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=i(W.prototype,"dicePoint",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=i(W.prototype,"keyPoint",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=i(W.prototype,"popupGame",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=i(W.prototype,"popupGame1",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=i(W.prototype,"popupSpin",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=i(W.prototype,"popupCash",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=i(W.prototype,"popupKey",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=i(W.prototype,"popupDice",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=i(W.prototype,"fastMultiplier",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pe=i(W.prototype,"audioSource",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=i(W.prototype,"stepSound",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=i(W.prototype,"rewardSound",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=i(W.prototype,"cashSound",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=i(W.prototype,"mainSound",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=i(W.prototype,"spinStartSound",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=i(W.prototype,"arcadeSound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=i(W.prototype,"diceSound",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=i(W.prototype,"diceNSound",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=W))||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemySpawnZone.ts","./CharacterLevelSystem.ts","./CharacterCombat.ts","./UpgradeSelectionUI.ts","./UpgradeInfo.ts","./ApiClient.ts"],(function(e){var t,n,i,a,o,r,s,l,c,u,h,p,m,g,d,f,S,_,b,y,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,c=e.SpriteFrame,u=e.game,h=e.Label,p=e.find,m=e.Sprite,g=e.director,d=e.PhysicsSystem,f=e.Component},function(e){S=e.EnemySpawnZone},function(e){_=e.CharacterLevelSystem},function(e){b=e.CharacterCombat},function(e){y=e.UpgradeSelectionUI},function(e){v=e.UpgradeType},function(e){C=e.ApiClient}],execute:function(){var G,I,w,T,Z,M,E,U,A,B,P,N,R,L,O,D,z,F,k,H,V,W,Y,x,q,J,K,j,Q,X,$,ee,te,ne,ie,ae,oe,re,se;r._RF.push({},"d1c6abbotZONYq6TGqJh+d9","GameManager",void 0);var le=s.ccclass,ce=s.property,ue=function(e){return e[e.MENU=0]="MENU",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.UPGRADE_SELECTION=3]="UPGRADE_SELECTION",e[e.BOSS_FIGHT=4]="BOSS_FIGHT",e[e.GAME_OVER_WIN=5]="GAME_OVER_WIN",e[e.GAME_OVER_LOSE=6]="GAME_OVER_LOSE",e}(ue||{});e("GameManager",(G=le("GameManager"),I=ce(l),w=ce(l),T=ce(l),Z=ce({type:c,tooltip:"Иконка для улучшения здоровья"}),M=ce({type:c,tooltip:"Иконка для улучшения урона"}),E=ce({type:c,tooltip:"Иконка для улучшения брони"}),U=ce({type:c,tooltip:"Иконка для улучшения скорости атаки"}),A=ce({type:c,tooltip:"Иконка для улучшения скорости передвижения"}),B=ce({type:c,tooltip:"Иконка для улучшения радиуса атаки"}),P=ce({tooltip:"Количество активных зон спавна ближнего боя"}),N=ce({tooltip:"Количество активных зон спавна дальнего боя"}),R=ce({tooltip:"Количество активных зон спавна боссов"}),L=ce({type:l,tooltip:"Контейнер с зонами спавна ближнего боя"}),O=ce({type:l,tooltip:"Контейнер с зонами спавна дальнего боя"}),D=ce({type:l,tooltip:"Контейнер с зонами спавна боссов"}),z=ce(l),F=ce(l),G(((se=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"bossTimerDuration",V,a(t)),i(t,"upgradeSelectionPanel",W,a(t)),i(t,"upgradeNotification",Y,a(t)),i(t,"timerUI",x,a(t)),i(t,"healthIcon",q,a(t)),i(t,"damageIcon",J,a(t)),i(t,"armorIcon",K,a(t)),i(t,"attackSpeedIcon",j,a(t)),i(t,"moveSpeedIcon",Q,a(t)),i(t,"radiusAttackIcon",X,a(t)),i(t,"meleeZonesCount",$,a(t)),i(t,"rangeZonesCount",ee,a(t)),i(t,"bossZonesCount",te,a(t)),i(t,"meleeZonesContainer",ne,a(t)),i(t,"rangeZonesContainer",ie,a(t)),i(t,"bossZonesContainer",ae,a(t)),i(t,"winScreen",oe,a(t)),i(t,"defeatScreen",re,a(t)),t._currentState=ue.MENU,t._previousState=ue.MENU,t._player=null,t._levelSystem=null,t._activeSpawnZones=[],t._timerLabel=null,t._bossTimerRemaining=0,t._isBossTimerActive=!1,t._isBossSpawned=!1,t._upgradeUI=null,t._activeBossZone=null,t._isPaused=!1,t}n(t,e),t.getInstance=function(){return t._instance};var r=t.prototype;return r.onLoad=function(){if(null===t._instance){t._instance=this,u.addPersistRootNode(this.node),this._upgradeUI=this.upgradeSelectionPanel.getComponent(y),this._timerLabel=this.timerUI.getComponent(h);var e=this.winScreen.getChildByName("main_shape").getChildByName("green_button"),n=this.defeatScreen.getChildByName("main_shape").getChildByName("blue_button");e.on(l.EventType.TOUCH_START,this.returnToMenu,this),n.on(l.EventType.TOUCH_START,this.returnToMenu,this),e.active=!1,n.active=!1}else this.node.destroy()},r.start=function(){this.startGame()},r.update=function(e){switch(this._isBossTimerActive&&!this._isPaused&&(this._bossTimerRemaining-=e,Math.floor(this._bossTimerRemaining)!==Math.floor(this._bossTimerRemaining+e)&&this.updateTimerDisplay(),this._bossTimerRemaining<=0&&(this._bossTimerRemaining=0,this._isBossTimerActive=!1,this.onBossTimerComplete())),this._currentState){case ue.PLAYING:break;case ue.BOSS_FIGHT:var t=this._activeBossZone.getComponent(S).getSlot(0);!this._isBossSpawned&&t&&t.enemy&&(this._isBossSpawned=!0,this.updateTimerDisplay()),!this._isBossSpawned||!t||t.enemy&&t.enemy.isValid||this.playerWin()}},r.startGame=function(){var e=this;console.log("[GameManager] Начало игры"),this._currentState=ue.PLAYING,this.activateRandomSpawnZones(),this.spawnPlayer(),this.startBossTimer(),this.scheduleOnce((function(){e.showUpgradeSelection()}),.5)},r.activateRandomSpawnZones=function(){if(this._activeSpawnZones=[],this.meleeZonesContainer){var e;this.activateZones(this.meleeZonesContainer.children,!1);var t=this.getRandomZones(this.meleeZonesContainer.children,this.meleeZonesCount);this.activateZones(t,!0),(e=this._activeSpawnZones).push.apply(e,t)}if(this.rangeZonesContainer){var n;this.activateZones(this.rangeZonesContainer.children,!1);var i=this.getRandomZones(this.rangeZonesContainer.children,this.rangeZonesCount);this.activateZones(i,!0),(n=this._activeSpawnZones).push.apply(n,i)}this.bossZonesContainer&&this.activateZones(this.bossZonesContainer.children,!1),console.log("[GameManager] Активировано "+this._activeSpawnZones.length+" зон спавна")},r.getRandomZones=function(e,t){for(var n=[].concat(e),i=n.length-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),o=[n[a],n[i]];n[i]=o[0],n[a]=o[1]}return n.slice(0,Math.min(t,n.length))},r.activateZones=function(e,t){for(var n,i=o(e);!(n=i()).done;){var a=n.value,r=a.getComponent(S);r&&(r.setActive(t),console.log("[GameManager] Зона "+a.name+" "+(t?"активирована":"деактивирована")))}},r.activateBossZones=function(){if(this.bossZonesContainer){var e=this.getRandomZones(this.bossZonesContainer.children,this.bossZonesCount);this.activateZones(e,!0),this._activeBossZone=e[0],console.log("[GameManager] Активировано "+e.length+" зон спавна боссов")}},r.spawnPlayer=function(){this._player=p("Player"),this._levelSystem=this._player.getComponent(_),this._levelSystem&&(this._levelSystem.node.on("level-up",this.onPlayerLevelUp,this),this._levelSystem.node.on("upgrade-applied",this.onUpgradeApplied,this));var e=this._player.getComponent(b);e&&e.node.on("character-died",this.onPlayerDeath,this),console.log("[GameManager] Игрок создан")},r.startBossTimer=function(){this.timerUI&&this._timerLabel?(this._bossTimerRemaining=this.bossTimerDuration,this._isBossTimerActive=!0,this._isBossSpawned=!1,this.timerUI.active=!0,this.updateTimerDisplay(),console.log("[GameManager] Запущен таймер до босса: "+this.bossTimerDuration+" сек.")):console.error("[GameManager] Компоненты таймера не найдены!")},r.updateTimerDisplay=function(){if(this._timerLabel)if(this._isBossSpawned)this._timerLabel.string="KILL THE BOSS";else{var e=Math.floor(this._bossTimerRemaining/60),t=Math.floor(this._bossTimerRemaining%60);this._timerLabel.string=e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")}},r.onBossTimerComplete=function(){console.log("[GameManager] Таймер до босса завершен, активация босса"),this.activateZones(this._activeSpawnZones,!1),this.activateBossZones(),this.updateTimerDisplay(),this._currentState=ue.BOSS_FIGHT},r.onPlayerLevelUp=function(){console.log("[GameManager] Игрок повысил уровень"),this.showUpgradeSelection()},r.showUpgradeSelection=function(){if(this._upgradeUI&&this._levelSystem){this._currentState!==ue.UPGRADE_SELECTION&&(this._previousState=this._currentState,this._currentState=ue.UPGRADE_SELECTION);var e=this._levelSystem.generateUpgradeOptions(3);this._upgradeUI.showUpgradeOptions(e,this._levelSystem),this.pauseGame(),console.log("[GameManager] Показано окно выбора улучшений")}else console.error("[GameManager] Компонент UI улучшений или система уровней не найдены!")},r.onUpgradeApplied=function(e){var t=this;this.upgradeSelectionPanel.active=!1,this._currentState=this._previousState,this.resumeGame(),this.upgradeNotification.active=!0;var n=this.upgradeNotification.getChildByName("UpgradeIcon").getComponent(m);switch(e.type){case v.HEALTH:n.spriteFrame=this.healthIcon;break;case v.DAMAGE:n.spriteFrame=this.damageIcon;break;case v.ARMOR:n.spriteFrame=this.armorIcon;break;case v.ATTACK_SPEED:n.spriteFrame=this.attackSpeedIcon;break;case v.MOVE_SPEED:n.spriteFrame=this.moveSpeedIcon;break;default:console.warn("[UpgradeCardUI] Неизвестный тип улучшения: "+e.type)}this.upgradeNotification.getChildByName("UpgradeText").getComponent(h).string=e.name+"\n"+e.prevValue.toFixed(2)+" -> "+e.newValue.toFixed(2),this.scheduleOnce((function(){t.upgradeNotification.active=!1}),2),console.log("[GameManager] Выбрано улучшение с индексом "+JSON.stringify(e))},r.onPlayerDeath=function(){console.log("[GameManager] Игрок погиб"),this.playerLose()},r.onBossDeath=function(){console.log("[GameManager] Босс побежден"),this.playerWin()},r.playerWin=function(){console.log("[GameManager] Игра завершена: Победа!"),this._currentState=ue.GAME_OVER_WIN,this.showGameOverScreen(!0),this.sendGameResult(!0)},r.playerLose=function(){console.log("[GameManager] Игра завершена: Поражение!"),this._currentState=ue.GAME_OVER_LOSE,this.showGameOverScreen(!1),this.sendGameResult(!1)},r.showGameOverScreen=function(e){if(this.upgradeSelectionPanel.active=!1,this.timerUI.active=!1,e){if(!this.winScreen)return void console.error("[GameManager] Экран победы не найден!");this.winScreen.active=!0}else{if(!this.defeatScreen)return void console.error("[GameManager] Экран поражения не найден!");this.defeatScreen.active=!0}this.pauseGame()},r.sendGameResult=function(e){var t=this;C.getInstance().post("/api/game/end",{gameId:localStorage.getItem("gameId"),outcome:e?"win":"lose",level:this._levelSystem.currentLevel,upgrades:this._levelSystem.upgrades.map((function(e){return e.name}))}).then((function(n){console.log("data",n),e?t.winScreen.getChildByName("main_shape").getChildByName("green_button").active=!0:t.defeatScreen.getChildByName("main_shape").getChildByName("blue_button").active=!0}))},r.restartGame=function(){console.log("[GameManager] Перезапуск игры"),g.loadScene(g.getScene().name)},r.returnToMenu=function(){console.log("[GameManager] Возврат в главное меню"),g.loadScene("MainScreen")},r.pauseGame=function(){g.getScheduler().setTimeScale(0),d.instance.enable=!1,this._isPaused=!0,console.log("[GameManager] Игра поставлена на паузу")},r.resumeGame=function(){g.getScheduler().setTimeScale(1),d.instance.enable=!0,this._isPaused=!1,console.log("[GameManager] Игра снята с паузы")},r.isPaused=function(){return this._isPaused},r.getGameState=function(){return this._currentState},r.getPlayer=function(){return this._player},r.getPlayerLevelSystem=function(){return this._levelSystem},t}(f))._instance=null,V=t((H=se).prototype,"bossTimerDuration",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 240}}),W=t(H.prototype,"upgradeSelectionPanel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(H.prototype,"upgradeNotification",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(H.prototype,"timerUI",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(H.prototype,"healthIcon",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(H.prototype,"damageIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(H.prototype,"armorIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(H.prototype,"attackSpeedIcon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(H.prototype,"moveSpeedIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"radiusAttackIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(H.prototype,"meleeZonesCount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),ee=t(H.prototype,"rangeZonesCount",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),te=t(H.prototype,"bossZonesCount",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ne=t(H.prototype,"meleeZonesContainer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(H.prototype,"rangeZonesContainer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(H.prototype,"bossZonesContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(H.prototype,"winScreen",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(H.prototype,"defeatScreen",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=H))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/HealthBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts"],(function(t){var e,a,r,n,i,o,l,c,h,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,l=t.Sprite,c=t.Camera,h=t.math,s=t.Label,u=t.Component},function(t){p=t.CharacterCombat}],execute:function(){var m,b,f,d,_,g,v;i._RF.push({},"bc1be4bE5ZMeY1nKeOWZ/3M","HealthBar",void 0);var y=o.ccclass,C=o.property;t("HealthBar",(m=y("HealthBar"),b=C(l),f=C(c),m((g=e((_=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"healthFill",g,n(e)),r(e,"camera",v,n(e)),e._combat=null,e}a(e,t);var i=e.prototype;return i.start=function(){this.node.parent&&(this._combat=this.node.parent.getComponent(p),this._combat||console.warn("На цели нет CharacterCombat!"))},i.update=function(t){var e;if(this.node.parent&&this._combat){if(this.healthFill){var a=this._combat.currentHP/this._combat.maxHP;this.healthFill.fillRange=h.clamp01(a)}var r=null==(e=this.node.getChildByName("Label"))?void 0:e.getComponent(s);r&&(r.string=this._combat.currentHP+" / "+this._combat.maxHP)}},e}(u)).prototype,"healthFill",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(_.prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/InviteManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiClient.ts","./config.ts","./TelegramSDK.ts","./UIManager.ts","./LoadingService.ts"],(function(e){var t,n,i,r,o,a,s,c,l,u,p,d,f,g,m,h,v,C,b,y,w,L,I,k,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.Prefab,p=e.tween,d=e.Button,f=e.instantiate,g=e.RichText,m=e.Sprite,h=e.Layout,v=e.Texture2D,C=e.ImageAsset,b=e.SpriteFrame,y=e.Component},function(e){w=e.ApiClient},function(e){L=e.config},function(e){I=e.TelegramSDK},function(e){k=e.UIManager},function(e){F=e.LoadingService}],execute:function(){var T,x,B,_,A,R,S,D,M,P,N,U,z,E,W;s._RF.push({},"fa4b7LxFSBG2pu7RTqpTu4a","InviteManager",void 0);var K=c.ccclass,O=c.property;e("InviteManager",(T=K("InviteManager"),x=O(l),B=O(l),_=O(l),A=O(l),R=O(u),S=O(l),T((P=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"inviteFriendsButton",P,r(t)),i(t,"copyLinkButton",N,r(t)),i(t,"friendsCount",U,r(t)),i(t,"friendsListContent",z,r(t)),i(t,"friendItemPrefab",E,r(t)),i(t,"loading",W,r(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){(p(this.loading.getChildByName("Spinner")).repeatForever(p().by(1,{angle:360})).start(),this.inviteFriendsButton)&&this.inviteFriendsButton.getComponent(d).node.on(d.EventType.CLICK,this.onInviteFriendsClick,this);this.copyLinkButton&&this.copyLinkButton.getComponent(d).node.on(d.EventType.CLICK,this.onCopyLinkClick,this)},s.onEnable=function(){this.fetchFriends()},t.generateRefLink=function(){var e=window.Telegram.WebApp.initDataUnsafe.user.id;return"https://t.me/"+L.BOT_NAME+"/"+L.APP_NAME+"?startapp=ref_"+e},s.onInviteFriendsClick=function(){if(window.Telegram&&window.Telegram.WebApp){window.Telegram.WebApp.openTelegramLink("https://t.me/share/url?url="+encodeURIComponent(t.generateRefLink())+"&text="+encodeURIComponent("\nPlay with me!"))}},s.onCopyLinkClick=function(){var e="Play with me!\n\n"+t.generateRefLink();navigator.clipboard.writeText(e).then((function(){var e;null==(e=I.getInstance().getHapticFeedback())||e.impactOccurred("light"),console.log("Link copied to clipboard!")})).catch((function(e){console.error("Failed to copy the link:",e)}))},s.fetchFriends=function(){var e=o(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.friendsListContent.removeAllChildren(),this.loading.active=!0,e.next=5,w.getInstance().get("/api/referrals");case 5:t=e.sent,this.loading.active=!1,t&&t.referrals&&t.referrals.length>0?(this.friendsCount.getComponent(g).string=t.referrals.length+" FRENS",this.populateFriendsList(t.referrals),t.reward):this.friendsListContent.removeAllChildren(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.loading.active=!1,console.error("Ошибка при запросе списка друзей:",e.t0);case 14:(n=this.friendsListContent.getComponent(h))&&n.updateLayout();case 16:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),s.populateFriendsList=function(e){var t=this;this.friendsListContent.removeAllChildren(),e.forEach((function(e){var n=f(t.friendItemPrefab),i=e.inviteeData.username,r=e.inviteeData.avatarUrl,s=e.balanceData.coins,c=e.canGetLootbox,u=n.getChildByName("user_name_text").getComponent(g),p=n.getChildByName("best_score_text").getComponent(g),d=n.getChildByName("lootbox_claim_button");u.string=i,p.string=s.toString();var h=n.getChildByName("avatar_image").getComponent(m);h&&r&&t.loadImageFromUrl(r,h),c&&(p.node.active=!1,d.active=!0,d.on(l.EventType.TOUCH_START,o(a().mark((function t(){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.getInstance().withLoading(w.getInstance().post("/api/lootbox/open",{type:"referral",referralId:e.inviteeId}));case 2:if(t.t0=n=t.sent,null!=t.t0){t.next=7;break}t.t1=void 0,t.next=8;break;case 7:t.t1=n.rewards;case 8:(i=t.t1)?k.getInstance().windowsManager.showWindow("RewardWindow",{rewardId:i._id,rewards:i.items,claimCallback:function(){d.active=!1,p.node.active=!0}}):(d.active=!1,p.node.active=!0);case 10:case"end":return t.stop()}}),t)}))),t)),t.friendsListContent.addChild(n)}));var n=this.friendsListContent.getComponent(h);n&&n.updateLayout()},s.loadImageFromUrl=function(e,t){var n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){var e=new v,i=new C(n);e.image=i;var r=new b;r.texture=e,t.spriteFrame=r},n.onerror=function(e){console.error("Ошибка при загрузке изображения:",e)}},t}(y)).prototype,"inviteFriendsButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(M.prototype,"copyLinkButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(M.prototype,"friendsCount",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"friendsListContent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(M.prototype,"friendItemPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"loading",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=M))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiClient.ts","./TelegramSDK.ts","./UIManager.ts","./PlaytimeManager.ts","./BundlePreloader.ts"],(function(e){var t,n,r,a,o,i,s,c,l,u,g,d,p,m,f,h,S,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.RichText,g=e.sys,d=e.director,p=e.Component},function(e){m=e.ApiClient},function(e){f=e.TelegramSDK},function(e){h=e.UIManager},function(e){S=e.PlaytimeManager},function(e){w=e.BundlePreloader}],execute:function(){var b,y,I,v,x,M,P,k,L;s._RF.push({},"2247efpqyNFn7sE5VA7Kj0N","LoadingScene",void 0);var D=c.ccclass,T=c.property;e("LoadingScene",(b=D("LoadingScene"),y=T(l),I=T(l),v=T(w),b((P=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"loadingLabel",P,a(t)),r(t,"qrCodeScreen",k,a(t)),r(t,"bundlePreloader",L,a(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.isMobile()?(this.loadingLabel.getComponent(u).string="Loading...",this.loadTelegramAndAuthenticate()):(this.qrCodeScreen.active=!0,window.parent.postMessage({type:"loaded"},"*"))},s.isMobile=function(){var e=g.platform,t=-1!==[g.Platform.ANDROID,g.Platform.IOS,g.Platform.MOBILE_BROWSER].indexOf(e),n=window.navigator.userAgent.toLowerCase(),r=/iphone|ipad|android/.test(n);return t&&r},s.loadTelegramAndAuthenticate=function(){var e=this;Promise.all([this.authenticateAndLoadData(),this.initGame(),this.bundlePreloader.preloadBundles(),this.loadMainScene()]).then((function(){e.switchToMainScene()})).catch((function(e){console.error("Ошибка во время загрузки:",e),window.parent.postMessage({type:"progress",text:"Loading error! Please, try again later."},"*")}))},s.loadMainScene=function(){return new Promise((function(e,t){d.preloadScene("MainScreen",(function(e,t){var n=e/t;window.parent.postMessage({type:"progress",text:"Loading scene... "+Math.round(100*n)+"%"},"*")}),(function(n){n?(console.error("Ошибка при загрузке сцены:",n),t(n)):(window.parent.postMessage({type:"progress",text:"Fetching data..."},"*"),console.log("Сцена предварительно загружена"),e())}))}))},s.initGame=function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){h.getInstance().windowsManager.registerWindow("RewardWindow"),h.getInstance().windowsManager.registerWindow("LootboxWindow"),e()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.authenticateAndLoadData=function(){var e=o(i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){f.getInstance().loadTelegramSDK((function(){f.getInstance().getUser()?t.authenticateUser().then(e).catch(n):n("Telegram WebApp не запущен.")}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.authenticateUser=function(){var e=o(i().mark((function e(){var t,n,r,a,o,s,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.getInstance(),n=t.getUserId()){e.next=4;break}throw new Error("Не удалось получить ID пользователя.");case 4:r=t.getUser(),a=t.getStartParam(),(o=S.getInstance()).initialize(),localStorage.setItem("username",r.first_name),s=3,c=0;case 11:if(!(c<s)){e.next=38;break}return e.prev=12,c++,console.log("Попытка "+c+" аутентификации..."),e.next=17,m.getInstance().post("/api/auth",{telegramId:n,firstName:r.first_name,lastName:r.last_name||"",username:r.username||"",isPremium:r.is_premium||!1,startParam:a,token:localStorage.getItem("authToken"),playtime:o.getPlaytime()},3);case 17:if(!(l=e.sent).token||!l.userData){e.next=28;break}return localStorage.setItem("authToken",l.token),this.saveUserData(l.userData),t.ready(),console.log("Аутентификация успешна"),o.resetPlaytime(),o.startTracking(),e.abrupt("return");case 28:throw new Error(l.message||"Ошибка аутентификации");case 29:e.next=36;break;case 31:if(e.prev=31,e.t0=e.catch(12),console.error("Ошибка при попытке "+c+": "+e.t0.message),!(c>=s)){e.next=36;break}throw new Error("Ошибка при отправке запроса аутентификации после нескольких попыток: "+e.t0);case 36:e.next=11;break;case 38:case"end":return e.stop()}}),e,this,[[12,31]])})));return function(){return e.apply(this,arguments)}}(),s.saveUserData=function(e){if(e.energy&&(localStorage.setItem("energy.max",e.energy.maxEnergy.toString()),localStorage.setItem("energy.current",e.energy.currentEnergy.toString()),localStorage.setItem("energy.regenRate",e.energy.regenRate.toString()),localStorage.setItem("energy.lastUpdated",new Date(e.energy.lastUpdated).getTime().toString())),e.score&&localStorage.setItem("score.best",e.score.highscore.toString()),e.balance&&(localStorage.setItem("balance.coins",e.balance.coins.toString()),localStorage.setItem("balance.ton",e.balance.ton.toString())),e.characters)if(localStorage.setItem("characters.active",e.characters.active.toString()),e.characters.accessories){var t={kapushon_close:!0};e.characters.accessories.forEach((function(e){e&&e.gameId&&(t[e.gameId]=!0)})),localStorage.setItem("characters.accessories",JSON.stringify(t))}else{localStorage.setItem("characters.accessories",JSON.stringify({kapushon_close:!0}))}var n;(e.experience&&localStorage.setItem("experience.exp",e.experience.exp.toString()),e.leaderboard)&&localStorage.setItem("leaderboard.rank",(null==(n=e.leaderboard)||null==(n=n.rank)||null==(n=n.rank)?void 0:n.toString())||"0");e.lootbox&&(localStorage.setItem("lootbox.progress",e.lootbox.progress.toString()),localStorage.setItem("lootbox.canOpen",e.lootbox.canOpen.toString()))},s.switchToMainScene=function(){d.loadScene("MainScreen",(function(){console.log("MainScene загружена"),window.parent.postMessage({type:"loaded"},"*")}))},t}(p)).prototype,"loadingLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(M.prototype,"qrCodeScreen",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(M.prototype,"bundlePreloader",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=M))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingService.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,e,r,o,a,u,c,s,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized,o=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,c=n._decorator,s=n.Node,l=n.Component}],execute:function(){var g,d,h,p,f,v;u._RF.push({},"931d99GaJNCZKTh32yFimkA","LoadingService",void 0);var y=c.ccclass,L=c.property;n("LoadingService",(g=y("LoadingService"),d=L(s),g(((v=function(n){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,e(t,"loadingPlug",f,r(t)),t.loadingCount=0,t}i(t,n);var u=t.prototype;return u.onLoad=function(){console.log("LoadingService onLoad"),t._instance=this,this.loadingPlug&&(this.loadingPlug.active=!1)},t.getInstance=function(){return t._instance},u.show=function(){var n=this;return this.loadingCount++,this.loadingPlug&&(this.loadingPlug.active=!0,this.node.setSiblingIndex(9999)),function(){n.hide()}},u.hide=function(){this.loadingCount=Math.max(0,this.loadingCount-1),0===this.loadingCount&&this.loadingPlug&&(this.loadingPlug.active=!1)},u.withLoading=function(){var n=o(a().mark((function n(t){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=this.show(),n.prev=1,n.next=4,t;case 4:return n.abrupt("return",n.sent);case 5:return n.prev=5,i(),n.finish(5);case 8:case"end":return n.stop()}}),n,this,[[1,,5,8]])})));return function(t){return n.apply(this,arguments)}}(),t}(l))._instance=null,f=t((p=v).prototype,"loadingPlug",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h));u._RF.pop()}}}));

System.register("chunks:///_virtual/LootboxWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindow.ts","./ApiClient.ts","./UIManager.ts","./TelegramSDK.ts","./PlayerDataManager.ts","./LoadingService.ts","./VibrationService2.ts"],(function(t){var e,n,o,i,r,a,s,l,c,u,p,d,h,g,w,f,b,v,y,x,m,C,T,B,I,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,c=t.Node,u=t.ProgressBar,p=t.Label,d=t.Prefab,h=t.RichText,g=t.tween,w=t.Animation,f=t.Sprite,b=t.Canvas,v=t.instantiate,y=t.Vec3},function(t){x=t.BaseWindow},function(t){m=t.ApiClient},function(t){C=t.UIManager},function(t){T=t.TelegramSDK},function(t){B=t.PlayerDataManager},function(t){I=t.LoadingService},function(t){N=t.VibrationService}],execute:function(){var P,k,S,E,W,O,_,R,U,D,F,A,L,M,H,z,G,V,q;s._RF.push({},"9413bPYeoZC4biL3iElH1Rx","LootboxWindow",void 0);var K=l.ccclass,j=l.property;t("LootboxWindow",(P=K("LootboxWindow"),k=j(c),S=j(c),E=j(u),W=j(p),O=j(c),_=j(c),R=j(c),U=j(d),P((A=e((F=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"lootboxOpacity",A,i(e)),o(e,"lootboxProgress",L,i(e)),o(e,"lineProgress",M,i(e)),o(e,"progressText",H,i(e)),o(e,"openNowSection",z,i(e)),o(e,"openButton",G,i(e)),o(e,"continueButton",V,i(e)),o(e,"expPrefab",q,i(e)),e.lootboxId=null,e.currentTween=null,e.progress=null,e.target=null,e.expGained=null,e.callback=null,e.isRewardWindowPreloaded=!1,e}n(e,t);var s=e.prototype;return s.open=function(e){if(t.prototype.open.call(this,e),e){var n=e.lootboxId,o=e.progress,i=e.target,r=e.expGained,a=e.callback;this.lootboxId=n,this.progress=o,this.target=i,this.expGained=r,this.callback=a;var s=o/i,l=r/i;B.getInstance().addLootboxProgress(l),this.continueButton.on(c.EventType.TOUCH_END,this.onContinueButtonClicked,this),this.openButton.on(c.EventType.TOUCH_END,this.onOpenButtonClicked,this),this.openNowSection.getChildByName("Button").on(c.EventType.TOUCH_END,this.onOpenNowButtonClicked,this);var u=+((this.progress+this.expGained)/this.target).toFixed(1),p="";p=u<=.3?"5":u<=.6?"8":"10",this.openNowSection.getChildByName("Button").getChildByName("Label").getChildByName("Text").getComponent(h).string=p,s>=1?(this.displayFilledState(),this.preloadRewardWindow()):r?this.startFillingAnimation(o,i,r):this.displayNotFilledState(o,i)}else console.error("Lootbox data is not provided!")},s.close=function(){t.prototype.close.call(this),this.continueButton.off(c.EventType.TOUCH_END),this.openButton.off(c.EventType.TOUCH_END),this.openNowSection.getChildByName("Button").off(c.EventType.TOUCH_END),this.currentTween&&(this.currentTween.stop(),this.currentTween=null)},s.preloadRewardWindow=function(){this.isRewardWindowPreloaded||(this.isRewardWindowPreloaded=!0,C.getInstance().windowsManager.preloadWindow("RewardWindow",(function(){console.log("RewardWindow preloaded successfully")})))},s.skipAnimation=function(t){this.node.off(c.EventType.TOUCH_END,this.skipAnimation,this),this.currentTween&&(this.currentTween.stop(),this.currentTween=null,this.updateProgressUI(this.progress/this.target),this.progress/this.target+this.expGained/this.target>=1?(this.displayFilledState(),this.preloadRewardWindow()):this.displayNotFilledState(this.progress+this.expGained,this.target))},s.startFillingAnimation=function(t,e,n){var o=this;this.node.on(c.EventType.TOUCH_END,this.skipAnimation,this),this.openNowSection.active=!1,this.openButton.active=!1,this.continueButton.active=!1;var i=t/e,r=n/e;this.currentTween=g({value:i}).call((function(){o.spawnAndAnimateExp(n,o.lootboxProgress.worldPosition)})).to(2,{value:Math.min(1,i+r)},{easing:"quadInOut",onUpdate:function(t){o.updateProgressUI(t.value)}}).call((function(){i+r>=1?(o.displayFilledState(),o.preloadRewardWindow()):o.displayNotFilledState(t+n,e),o.currentTween=null})).start()},s.displayNotFilledState=function(t,e){this.openButton.active=!1,this.continueButton.active=!0,this.expGained&&(this.openNowSection.active=!0);var n=t/e;this.updateProgressUI(n)},s.displayFilledState=function(){var t;this.openNowSection.active=!1,this.openButton.active=!0,this.continueButton.active=!1,this.lootboxOpacity.active=!1,this.lineProgress.node.active=!1,this.progressText.node.active=!1,null==(t=this.lootboxProgress)||null==(t=t.getComponent(w))||t.play(),this.updateProgressUI(1)},s.updateProgressUI=function(t){var e=Math.floor(100*t);this.progressText.string=e+"%",this.lootboxProgress.getChildByName("animation_controller").getChildByName("sprite_box").getChildByName("main").getComponent(f).fillRange=t,this.lineProgress.progress=t},s.spawnAndAnimateExp=function(t,e){var n=this,o=this.node.scene.getComponentInChildren(b);if(o)for(var i=function(){var t=v(n.expPrefab);o.node.addChild(t);var i=350*(Math.random()-.5)*2,r=350*(Math.random()-.5)*2;t.setPosition(new y(i,r,0)),t.setScale(new y(0,0,0));var a=o.node.inverseTransformPoint(new y,e);g(t).to(.3,{scale:new y(.6,.6,.6)},{easing:"quadOut"}).start();var s=.5*Math.random();g(t).delay(s).to(1.2,{position:a},{easing:"quadInOut"}).call((function(){t.destroy()})).start()},r=0;r<t;r++)i();else console.error("Canvas не найден в сцене!")},s.onOpenNowButtonClicked=function(){var t=r(a().mark((function t(){var e,n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I.getInstance().show(),t.next=3,m.getInstance().post("/api/payments/create-invoice",{productId:"open_now",metadata:{lootboxId:this.lootboxId,progress:((this.progress+this.expGained)/this.target).toFixed(1)}});case 3:e=t.sent,T.getInstance().openInvoice(e.invoiceUrl,(function(t){"paid"===t?n.onOpenButtonClicked():m.getInstance().post("/api/payments/cancel",{orderId:e.orderId}),I.getInstance().hide()}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onContinueButtonClicked=function(){this.callback&&this.callback(),this.close()},s.onOpenButtonClicked=function(){var t=r(a().mark((function t(){var e,n,o,i=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N.getInstance().mediumVibration(),this.openButton.getChildByName("TextWrapper").active=!1,t.next=4,I.getInstance().withLoading(m.getInstance().post("/api/lootbox/open",{lootboxId:this.lootboxId}));case 4:if(t.t0=e=t.sent,null!=t.t0){t.next=9;break}t.t1=void 0,t.next=10;break;case 9:t.t1=e.rewards;case 10:(n=t.t1)?this.lootboxProgress&&((o=this.lootboxProgress.getComponent(w))?(this.lootboxOpacity.active=!1,o.play("greenbox_open-001"),o.on(w.EventType.FINISHED,(function(){C.getInstance().windowsManager.showWindow("RewardWindow",{rewardId:n._id,rewards:n.items,claimCallback:i.callback})}))):(console.warn("Animation component not found on animationTarget"),C.getInstance().windowsManager.showWindow("RewardWindow",{rewardId:n._id,rewards:n.items,claimCallback:this.callback}))):(this.callback&&this.callback(),this.close());case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(x)).prototype,"lootboxOpacity",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(F.prototype,"lootboxProgress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(F.prototype,"lineProgress",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(F.prototype,"progressText",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"openNowSection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(F.prototype,"openButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"continueButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(F.prototype,"expPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./my-mesh.ts","./Billboard.ts","./AnimationEventInjector.ts","./AttackConeMesh.ts","./AttackTriggerCone.ts","./CharacterAnimationController.ts","./CharacterAttackController.ts","./CharacterCombat.ts","./CharacterLevelSystem.ts","./CharacterMovementController.ts","./HealthBar.ts","./PlayerAttack.ts","./BossSummonAbility.ts","./EnemyAI.ts","./EnemyAttackController.ts","./EnemyConfig.ts","./EnemyProjectile.ts","./EnemySpawnZone.ts","./EnemySpawner.ts","./GameManager2.ts","./MainScreenManager.ts","./utils.ts","./UpgradeCardUI.ts","./UpgradeSelectionUI.ts","./UpgradeInfo.ts","./VirtualJoystick.ts","./CameraFlow.ts","./StackCollision.ts","./StackOffHandler.ts","./SceneLoader.ts","./AxisRotator.ts","./Board.ts","./CanvasToggler.ts","./Cell.ts","./Dice.ts","./DisplayUsername.ts","./GameManager.ts","./NodeRotator.ts","./OpenGameHopper.ts","./Player.ts","./SpinMaster.ts","./TelegramSDK2.ts","./UIButtonHandler.ts","./UIButtonHandlerOn.ts","./VibrationService.ts","./TrailController.ts","./AdsGramSDK.ts","./ApiClient.ts","./BundlePreloader.ts","./EnergyManager.ts","./GameFiManager.ts","./InviteManager.ts","./LoadingScene.ts","./LoadingService.ts","./ObjectRotator.ts","./PlayerDataManager.ts","./PlaytimeManager.ts","./Slideshow.ts","./TabControllerScreen.ts","./Task.ts","./TasksManager.ts","./TelegramSDK.ts","./VibrationService2.ts","./WalletManager.ts","./config.ts","./EmptyEnergyMessage.ts","./MessagesManager.ts","./UIManager.ts","./TextWithIcon.ts","./RewardLayoutScaler.ts","./BaseWindow.ts","./LootboxWindow.ts","./RewardConfigManager.ts","./RewardItem.ts","./RewardWindow.ts","./WindowType.ts","./WindowsManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScreenManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VibrationService.ts","./ApiClient.ts","./EnergyManager.ts","./MessagesManager.ts","./LoadingService.ts","./PlayerDataManager.ts","./utils.ts"],(function(t){var e,n,i,a,r,o,s,c,l,u,g,p,h,f,d,y,m,v,b,M,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Button,u=t.Node,g=t.Label,p=t.Sprite,h=t.director,f=t.Component},function(t){d=t.VibrationService},function(t){y=t.ApiClient},function(t){m=t.EnergyManager},function(t){v=t.default},function(t){b=t.LoadingService},function(t){M=t.PlayerDataManager},function(t){C=t.formatNumber}],execute:function(){var S,B,L,I,w,D,k,E,x,z,_,T,F,N,G;s._RF.push({},"79fbcuv28pCW7g1ULk8hLHS","MainScreenManager",void 0);var P=c.ccclass,K=c.property;t("MainScreenManager",(S=P("MainScreenManager"),B=K(l),L=K(l),I=K(u),w=K(u),D=K(m),k=K(v),S((z=e((x=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"fightButton",z,a(e)),i(e,"inviteButton",_,a(e)),i(e,"stats",T,a(e)),i(e,"progressLine",F,a(e)),i(e,"energyManager",N,a(e)),i(e,"messagesManager",G,a(e)),e.wait=!1,e.playerDataManager=null,e.loadingService=null,e}n(e,t);var s=e.prototype;return s.start=function(){this.playerDataManager=M.getInstance(),this.loadingService=b.getInstance(),this.updateStats()},s.onLoad=function(){this.fightButton.node.on(l.EventType.CLICK,this.onFightButtonClicked,this),this.inviteButton.node.on(l.EventType.CLICK,this.onInviteButtonClicked,this)},s.updateStats=function(){if(this.playerDataManager&&this.stats){this.stats.getChildByName("crystal").getChildByName("count_text").getComponent(g).string=C(this.playerDataManager.getCoins());var t=this.playerDataManager.getTon();this.stats.getChildByName("ton").getChildByName("count_text").getComponent(g).string=t.toFixed(3===t.toString().length?1:2).toString();var e=this.playerDataManager.getLootboxProgress();this.progressLine.getComponent(p).fillRange=e}},s.onFightButtonClicked=function(){this.wait||(d.getInstance().mediumVibration(),this.startGame())},s.startGame=function(){var t=r(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.loadingService.withLoading(y.getInstance().post("/api/game/start",{}));case 3:(e=t.sent).gameId?(localStorage.setItem("gameId",e.gameId.toString()),this.startLoadingGameScene(),this.energyManager.reduceEnergy(1)):this.messagesManager.showEmptyEnergyWindow(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Ошибка при проверке энергии:",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),s.startLoadingGameScene=function(){this.loadScene(),h.preloadScene("main_level-001",(function(){}))},s.loadScene=function(){h.loadScene("main_level-001")},s.onInviteButtonClicked=function(){console.log("Invite button clicked")},s.onDestroy=function(){this.fightButton.node.off(l.EventType.CLICK,this.onFightButtonClicked,this),this.inviteButton.node.off(l.EventType.CLICK,this.onInviteButtonClicked,this)},e}(f)).prototype,"fightButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(x.prototype,"inviteButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(x.prototype,"stats",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(x.prototype,"progressLine",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(x.prototype,"energyManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(x.prototype,"messagesManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=x))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/MessagesManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EmptyEnergyMessage.ts"],(function(e){var n,i,t,o,r,s,a,l,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,l=e.Component},function(e){c=e.default}],execute:function(){var u,d,h,g,p,y;r._RF.push({},"3aaac3+gfdAgK5TmDJIe27R","MessagesManager",void 0);var f=s.ccclass,w=s.property;e("default",(u=w(a),d=w(c),f((p=n((g=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,t(n,"backgroundColor",p,o(n)),t(n,"emptyEnergyMessage",y,o(n)),n}i(n,e);var r=n.prototype;return r.onLoad=function(){this.hideAllWindows()},r.showWindow=function(e){this.hideAllWindows(),this.backgroundColor.active=!0;for(var n=arguments.length,i=new Array(n>1?n-1:0),t=1;t<n;t++)i[t-1]=arguments[t];e.show.apply(e,i),e.onHide=this.hideAllWindows.bind(this)},r.hideAllWindows=function(){this.backgroundColor.active=!1,this.emptyEnergyMessage.hide()},r.showEmptyEnergyWindow=function(){this.showWindow(this.emptyEnergyMessage)},r.hideCurrentWindow=function(){this.hideAllWindows()},n}(l)).prototype,"backgroundColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(g.prototype,"emptyEnergyMessage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/my-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,s,o,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,s=e.MeshRenderer,o=e.primitives,i=e.utils,c=e.Component}],execute:function(){var h;n._RF.push({},"e4b69m3xKRF2KFKr53lxlYx","my-mesh",void 0);var u=r.ccclass;r.property,e("MyMesh",u("MyMesh")(h=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){var e=this.node.getComponent(s);if(e){var t=o.plane({width:10,length:10,widthSegments:200,lengthSegments:200});e.mesh=i.createMesh(t)}},n}(c))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/NodeRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,r,i,n,a,c,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.tween,s=t.Component}],execute:function(){var l,u,p,f,h,m,y;n._RF.push({},"046b5rUmwlJSo2/mmOw/fj2","NodeRotator",void 0);var b=a.ccclass,d=a.property;t("NodeRotator",(l=b("NodeRotator"),u=d(Number),p=d({type:Number,tooltip:"1 for clockwise, -1 for counterclockwise"}),l((m=o((h=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o=t.call.apply(t,[this].concat(n))||this,r(o,"rotateTime",m,i(o)),r(o,"rotationDirection",y,i(o)),o}return e(o,t),o.prototype.start=function(){1!==this.rotationDirection&&-1!==this.rotationDirection&&(console.warn("rotationDirection должен быть 1 (по часовой) или -1 (против часовой). Установлено значение -1."),this.rotationDirection=-1);var t=360*this.rotationDirection;c(this.node).repeatForever(c().by(this.rotateTime,{angle:t})).start()},o}(s)).prototype,"rotateTime",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=o(h.prototype,"rotationDirection",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,r,i,n,a,c,u,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Vec3,u=t.Quat,s=t.Component}],execute:function(){var p,l,h,d,f,b;n._RF.push({},"d182fXhKAROxZ66Gc8a40dQ","ObjectRotator",void 0);var y=a.ccclass,R=a.property;t("ObjectRotator",(p=y("ObjectRotator"),l=R({tooltip:"Выберите ось вращения: X, Y, или Z",type:c}),p((f=o((d=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o=t.call.apply(t,[this].concat(n))||this,r(o,"rotationSpeed",f,i(o)),r(o,"rotationAxis",b,i(o)),o._rotationQuat=new u,o}return e(o,t),o.prototype.update=function(t){var o=this.rotationSpeed*t,e=this.node.rotation;u.rotateAround(this._rotationQuat,e,this.rotationAxis,o*Math.PI/180),this.node.setRotation(this._rotationQuat)},o}(s)).prototype,"rotationSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),b=o(d.prototype,"rotationAxis",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,1,0)}}),h=d))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/OpenGameHopper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TelegramSDK2.ts"],(function(e){var t,o,n,r,p,a,i,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){p=e.cclegacy,a=e._decorator,i=e.Node,c=e.Component},function(e){l=e.TelegramSDK}],execute:function(){var s,u,f,g,m;p._RF.push({},"6815aSthdVPQbICkjPQYOB2","OpenGameHopper",void 0);var d=a.ccclass,h=a.property;e("OpenGameHopper",(s=d("OpenGameHopper"),u=h(i),s((m=t((g=function(e){function t(){for(var t,o=arguments.length,p=new Array(o),a=0;a<o;a++)p[a]=arguments[a];return t=e.call.apply(e,[this].concat(p))||this,n(t,"tonHopperNode",m,r(t)),t}o(t,e);var p=t.prototype;return p.start=function(){var e=this;l.getInstance().loadTelegramSDK((function(){e.tonHopperNode&&e.tonHopperNode.on(i.EventType.TOUCH_START,e.onButtonClick,e)}))},p.onButtonClick=function(){var e=l.getInstance();e.tg?e.openTelegramLink("https://t.me/tonhopper_bot/tonhoppergame?startapp=source_cyberton"):console.error("Telegram SDK не загружен!")},t}(c)).prototype,"tonHopperNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));p._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./Cell.ts"],(function(e){var t,r,n,i,o,l,a,c,u,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.tween,c=e.Vec3,u=e.Component},function(e){s=e.Board},function(e){p=e.Cell}],execute:function(){var f,d,y,h,b,g,v;o._RF.push({},"a2779uJIfxHZLQtDRyOtu16","Player",void 0);var C=l.ccclass,m=l.property;e("Player",(f=C("Player"),d=m(s),y=m(Number),f((g=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"board",g,i(t)),n(t,"currentCellIndex",v,i(t)),t}return r(t,e),t.prototype.move=function(e){var t=this,r=(this.currentCellIndex+e)%this.board.cells.length,n=this.board.getCell(r),i=n.position;a(this.node).to(.5,{position:new c(i.x,i.y,i.z)}).call((function(){t.currentCellIndex=r;var e=n.getComponent(p);null==e||e.triggerEvent()})).start()},t}(u)).prototype,"board",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"currentCellIndex",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=b))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CharacterCombat.ts"],(function(t){var e,a,i,r,o,n,c,s,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,c=t._decorator,s=t.Node,l=t.Vec3,u=t.Component},function(t){h=t.CharacterCombat}],execute:function(){var m,p,f,b,d;n._RF.push({},"fca3cXLkkFEybkfhZJj2LIh","PlayerAttack",void 0);var y=c.ccclass,k=c.property;t("PlayerAttack",(m=y("PlayerAttack"),p=k(s),m((d=e((b=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,i(e,"enemiesContainer",d,r(e)),e._combat=null,e}a(e,t);var n=e.prototype;return n.start=function(){this._combat=this.getComponent(h)},n.update=function(t){if(this._combat&&this._combat.isAlive())for(var e,a=this.node.worldPosition,i=this.enemiesContainer.children,r=o(i);!(e=r()).done;){var n=e.value;if(n.activeInHierarchy){var c=n.getComponent(h);if(c&&c.isAlive())if(l.distance(a,n.worldPosition)<=this._combat.attackRadius){this._combat.canAttack()&&(this._combat.markAttackTime(),console.log("Атакуем "+n.name),c.takeDamage(this._combat.damage));break}}}},e}(u)).prototype,"enemiesContainer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,a=t.Component}],execute:function(){var r,s;o._RF.push({},"b30d73K/txEGZ7srR47NqjQ","PlayerDataManager",void 0);var i=n.ccclass;t("PlayerDataManager",i("PlayerDataManager")(((s=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._coins=0,e._ton=0,e._experience=0,e._lootboxProgress=0,e._lootboxCanOpen=!1,e._leaderboardRank=0,e}e(o,t),o.getInstance=function(){return o._instance||(o._instance=new o,o._instance.initialize()),o._instance};var n=o.prototype;return n.initialize=function(){this._coins=parseInt(localStorage.getItem("balance.coins")||"0"),this._ton=parseFloat(localStorage.getItem("balance.ton")||"0"),this._experience=parseInt(localStorage.getItem("experience.exp")||"0"),this._lootboxProgress=parseFloat(localStorage.getItem("lootbox.progress")||"0"),this._lootboxCanOpen=!1;var t=localStorage.getItem("leaderboard.rank");t&&(this._leaderboardRank=parseInt(t))},n.getCoins=function(){return this._coins},n.addCoins=function(t){this._coins+=t,this.saveData()},n.spendCoins=function(t){return this._coins>=t&&(this._coins-=t,this.saveData(),!0)},n.getTon=function(){return this._ton},n.addTon=function(t){this._ton+=t,this.saveData()},n.getExperience=function(){return this._experience},n.addExperience=function(t){this._experience+=t,this.saveData()},n.getLootboxProgress=function(){return this._lootboxProgress},n.addLootboxProgress=function(t){this._lootboxProgress+=t,this._lootboxProgress>=1&&(this._lootboxProgress=0),this.saveData()},n.getLootboxCanOpen=function(){return this._lootboxCanOpen},n.setLootboxCanOpen=function(t){this._lootboxCanOpen=t,this.saveData()},n.setLeaderboardRank=function(t){this._leaderboardRank=t},n.getLeaderboardRank=function(){return this._leaderboardRank},n.saveData=function(){localStorage.setItem("balance.coins",this._coins.toString()),localStorage.setItem("balance.ton",this._ton.toString()),localStorage.setItem("experience.exp",this._experience.toString()),localStorage.setItem("lootbox.progress",this._lootboxProgress.toString()),localStorage.setItem("lootbox.canOpen",this._lootboxCanOpen.toString()),localStorage.setItem("leaderboard.rank",this._leaderboardRank.toString())},o}(a))._instance=null,r=s))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/PlaytimeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,a,n,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator,n=t.game,s=t.Game,r=t.Component}],execute:function(){var l,c;i._RF.push({},"8adffglSsVGX5LK2MymXjWz","PlaytimeManager",void 0);var o=a.ccclass;t("PlaytimeManager",o("PlaytimeManager")(((c=function(t){function i(){var e;return(e=t.call(this)||this).playtime=0,e.timer=null,e}e(i,t),i.getInstance=function(){return this.instance||(this.instance=new i),this.instance};var a=i.prototype;return a.initialize=function(){this.loadPlaytime(),n.on(s.EVENT_HIDE,this.savePlaytime,this),n.on(s.EVENT_SHOW,this.resumeTracking,this)},a.loadPlaytime=function(){var t=localStorage.getItem("playtime");this.playtime=t?Number(t):0},a.resumeTracking=function(){this.startTracking()},a.savePlaytime=function(){localStorage.setItem("playtime",this.playtime.toString())},a.startTracking=function(){var t=this;this.timer||(this.timer=setInterval((function(){t.playtime+=1,t.savePlaytime()}),1e3))},a.stopTracking=function(){this.timer&&(clearInterval(this.timer),this.timer=null,this.savePlaytime())},a.getPlaytime=function(){return this.playtime},a.resetPlaytime=function(){this.playtime=0,this.savePlaytime()},i}(r)).instance=null,l=c))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/RewardConfigManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./reward_config.json"],(function(e){var n,t,r,i,o,a;return{setters:[function(e){n=e.inheritsLoose,t=e.extends},function(e){r=e.cclegacy,i=e._decorator,o=e.Component},function(e){a=e.default}],execute:function(){var s,c;r._RF.push({},"d8d14H9y5hF3J68cNhhBbuY","RewardConfigManager",void 0);var u=i.ccclass;e("RewardConfigManager",u("RewardConfigManager")(((c=function(e){function r(){var n;return(n=e.call(this)||this).rewardConfigs=new Map,n.loadConfigs(),n}n(r,e),r.getInstance=function(){return this._instance||(this._instance=new r),this._instance};var i=r.prototype;return i.loadConfigs=function(){var e=this,n=a;n.forEach((function(n){e.rewardConfigs.set(n.type,n)})),n.forEach((function(n){if(n.extends){var t=e.resolveInheritance(n);t&&e.rewardConfigs.set(n.type,t)}}))},i.resolveInheritance=function(e,n){if(void 0===n&&(n=new Set),!e.extends)return e;if(n.has(e.type))return console.error('Циклическое наследование обнаружено для конфигурации "'+e.type+'"'),null;n.add(e.type);var r=this.rewardConfigs.get(e.extends);if(!r)return console.error('Родительская конфигурация "'+e.extends+'" для "'+e.type+'" не найдена'),null;var i=this.resolveInheritance(r,n);if(!i)return null;var o=t({},i,e,{outline:t({},i.outline,e.outline)});return delete o.extends,o},i.getConfig=function(e){return this.rewardConfigs.get(e)||null},r}(o))._instance=void 0,s=c))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/RewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardConfigManager.ts","./TextWithIcon.ts"],(function(t){var n,o,r,e,i,a,c,u,s,l,d,g,h,f,p,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized,i=t.construct},function(t){a=t.cclegacy,c=t._decorator,u=t.Sprite,s=t.Node,l=t.Color,d=t.resources,g=t.SpriteFrame,h=t.UITransform,f=t.Component},function(t){p=t.RewardConfigManager},function(t){m=t.TextWithIcon}],execute:function(){var w,b,k,C,y,I,B,v,x,R,z,W,F,S,P,T,A;a._RF.push({},"3dde8RmhatD7pZZlmY6vY0Y","RewardItem",void 0);var D=c.ccclass,_=c.property;t("RewardItem",(w=D("RewardItem"),b=_(u),k=_(u),C=_(u),y=_(u),I=_(m),B=_(s),v=_([s]),w((z=n((R=function(t){function n(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,r(n,"background",z,e(n)),r(n,"icon",W,e(n)),r(n,"rewardBackground",F,e(n)),r(n,"amountBackground",S,e(n)),r(n,"textWithIcon",P,e(n)),r(n,"starsContainer",T,e(n)),r(n,"stars",A,e(n)),n.config=null,n.type=null,n.amount=null,n}o(n,t);var a=n.prototype;return a.getType=function(){return this.type},a.getAmount=function(){return this.amount},a.setAmount=function(t){if(this.amount=t,this.textWithIcon){var n=this.config.textTemplate||"+{amount}";this.textWithIcon.setTextWithIcon(n.replace("{amount}",""+t)),this.config.textColor&&this.textWithIcon.setTextStyle(i(l,this.config.textColor),this.config.fontSize),this.config.direction&&this.textWithIcon.setDirectionAndSpacing(this.config.direction,this.config.spacing),this.config.outline&&this.config.outline.color&&this.config.outline.width&&this.textWithIcon.setOutline(i(l,this.config.outline.color),this.config.outline.width)}},a.setStarsCount=function(t){if(this.starsContainer&&this.stars&&0!==this.stars.length){this.starsContainer.active=t>0;for(var n=0;n<this.stars.length;n++)this.stars[n]&&(this.stars[n].active=n<t)}},a.applyReward=function(t,n){var o=this,r=this.config=p.getInstance().getConfig(t);if(this.type=t,this.amount=n,r){if(r.backgroundImagePath&&d.load(r.backgroundImagePath,g,(function(n,r){n?console.error("Failed to load icon for "+t+":",n):o.background.spriteFrame=r})),r.backgroundColor){var e=r.backgroundColor,i=e[0],a=e[1],c=e[2],u=e[3];this.background&&(this.background.color=new l(i,a,c,u))}if(this.icon&&r.iconPath&&d.load(r.iconPath,g,(function(n,r){n?console.error("Failed to load icon for "+t+":",n):o.icon.spriteFrame=r})),this.rewardBackground&&(r.rewardBackgroundImagePath&&d.load(r.rewardBackgroundImagePath,g,(function(n,r){n?console.error("Failed to load icon for "+t+":",n):(o.rewardBackground.color=new l(255,255,255,255),o.rewardBackground.spriteFrame=r,o.rewardBackground.node.getComponent(h).width=285,o.rewardBackground.node.getComponent(h).height=359)})),r.rewardBackgroundColor)){var s=r.rewardBackgroundColor,f=s[0],m=s[1],w=s[2],b=s[3];this.rewardBackground.color=new l(f,m,w,b)}if(this.amountBackground&&r.amountBackgroundColor){var k=r.amountBackgroundColor,C=k[0],y=k[1],I=k[2],B=k[3];this.amountBackground.color=new l(C,y,I,B)}this.setAmount(n),void 0!==r.starsCount?this.setStarsCount(r.starsCount):this.setStarsCount(0)}else console.warn('Reward type "'+t+'" not found in config.')},n}(f)).prototype,"background",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(R.prototype,"icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(R.prototype,"rewardBackground",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(R.prototype,"amountBackground",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(R.prototype,"textWithIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(R.prototype,"starsContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(R.prototype,"stars",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=R))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardLayoutScaler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,a,n,r,o,l,c,s,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,l=t.Vec2,c=t.Layout,s=t.Vec3,u=t.Widget,p=t.Component}],execute:function(){var d,h,g,m,f,y,S,w,b,z,x,L,v,C;r._RF.push({},"32976M3ZAdFYpdTWVNA37T9","RewardLayoutScaler",void 0);var M=o.ccclass,_=o.property;t("RewardLayoutScaler",(d=M("RewardLayoutScaler"),h=_(l),g=_(l),m=_(l),d((S=i((y=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,a(i,"designSize",S,n(i)),a(i,"rewardSize",w,n(i)),a(i,"spacing",b,n(i)),a(i,"maxColumns",z,n(i)),a(i,"minColumns",x,n(i)),a(i,"maxScale",L,n(i)),a(i,"minScale",v,n(i)),a(i,"autoAdjustLayout",C,n(i)),i._calculatedColumns=0,i._calculatedRows=0,i}e(i,t);var r=i.prototype;return r.onEnable=function(){this.updateLayout()},r.updateLayout=function(){var t=this.node.children.filter((function(t){return t.active}));0!==t.length&&(this.calculateOptimalGrid(t.length),this.applyGridToLayout(),this.updateScale())},r.calculateOptimalGrid=function(t){var i=this.designSize.x,e=this.designSize.y,a=Math.floor((i+this.spacing.x)/(this.rewardSize.x+this.spacing.x)),n=Math.min(a,this.maxColumns);n=Math.max(n,this.minColumns),n=Math.min(n,t);var r=Math.ceil(t/n),o=r*this.rewardSize.y+(r-1)*this.spacing.y;if(o>e&&n<t){var l=Math.min(n+1,t),c=Math.ceil(t/l),s=c*this.rewardSize.y+(c-1)*this.spacing.y;s<o&&s<=e&&(n=l)}this._calculatedColumns=n,this._calculatedRows=Math.ceil(t/n)},r.applyGridToLayout=function(){if(this.autoAdjustLayout){var t=this.node.getComponent(c);t&&(t.type=c.Type.GRID,t.startAxis=c.AxisDirection.HORIZONTAL,t.paddingLeft=0,t.paddingRight=0,t.paddingTop=0,t.paddingBottom=0,t.spacingX=this.spacing.x,t.spacingY=this.spacing.y,t.constraintNum!==this._calculatedColumns&&(t.constraintNum=this._calculatedColumns,t.constraint=c.Constraint.FIXED_COL))}},r.updateScale=function(){var t,i=this.node.children.filter((function(t){return t.active}));if(0!==i.length){var e=this.rewardSize.x*this._calculatedColumns+this.spacing.x*(this._calculatedColumns-1),a=this.rewardSize.y*this._calculatedRows+this.spacing.y*(this._calculatedRows-1),n=this.designSize.x/e,r=this.designSize.y/a,o=Math.min(n,r);o=Math.min(o,this.maxScale),o=Math.max(o,this.minScale),i.forEach((function(t){t.setScale(new s(o,o,1))})),null==(t=this.node.getComponent(u))||t.updateAlignment();var l=this.node.getComponent(c);if(l){var p=this.designSize.x-e*o,d=this.designSize.y-a*o;p>0&&(l.paddingLeft=Math.floor(p/2),l.paddingRight=Math.ceil(p/2)),d>0&&(l.paddingTop=Math.floor(d/2),l.paddingBottom=Math.ceil(d/2)),l.spacingX=l.spacingX*o,l.spacingY=l.spacingY*o,l.updateLayout()}}},i}(p)).prototype,"designSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(600,400)}}),w=i(y.prototype,"rewardSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(120,120)}}),b=i(y.prototype,"spacing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(10,10)}}),z=i(y.prototype,"maxColumns",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),x=i(y.prototype,"minColumns",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=i(y.prototype,"maxScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=i(y.prototype,"minScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),C=i(y.prototype,"autoAdjustLayout",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/RewardWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindow.ts","./RewardItem.ts","./ApiClient.ts","./PlayerDataManager.ts","./AdsGramSDK.ts","./TelegramSDK.ts","./LoadingService.ts","./RewardLayoutScaler.ts","./VibrationService2.ts"],(function(t){var e,n,a,i,r,o,s,c,l,u,d,p,m,h,w,f,b,g,C,y,v,I,B,T,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Node,u=t.Prefab,d=t.Button,p=t.UIOpacity,m=t.instantiate,h=t.Layout,w=t.tween,f=t.Vec3},function(t){b=t.BaseWindow},function(t){g=t.RewardItem},function(t){C=t.ApiClient},function(t){y=t.PlayerDataManager},function(t){v=t.AdsGramSDK},function(t){I=t.TelegramSDK},function(t){B=t.LoadingService},function(t){T=t.RewardLayoutScaler},function(t){k=t.VibrationService}],execute:function(){var _,D,P,X,R,x,F,E,O,S,z,A,L,U,W,N,H,G,K,V,q;s._RF.push({},"de6c6AZTXpJxq5CuT30O/ZC","RewardWindow",void 0);var M=c.ccclass,j=c.property;t("RewardWindow",(_=M("RewardWindow"),D=j(l),P=j(l),X=j(u),R=j(d),x=j(d),F=j(d),E=j(l),O=j(l),_((A=e((z=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).resourcesForPreload=["rewards_icons/coins/spriteFrame","rewards_icons/exp/spriteFrame","rewards_icons/ton/spriteFrame","rewards/common_background/spriteFrame","rewards/rare_background/spriteFrame","rewards/epic_background/spriteFrame","rewards/legendary_background/spriteFrame","characters/Tonny_avatar/spriteFrame","characters/Gram_avatar/spriteFrame","characters/Chain_avatar/spriteFrame","characters/Crypto_avatar/spriteFrame","characters/Scale_avatar/spriteFrame","characters/Trafik_avatar/spriteFrame"],a(e,"warningText",A,i(e)),a(e,"rewardContainer",L,i(e)),a(e,"rewardItemPrefab",U,i(e)),a(e,"claimButton",W,i(e)),a(e,"claimX2Button",N,i(e)),a(e,"claimX4Button",H,i(e)),a(e,"windowTitle",G,i(e)),a(e,"buttonsContainer",K,i(e)),a(e,"animationDelay",V,i(e)),a(e,"animationDuration",q,i(e)),e.rewards={},e.rewardId=null,e.claimCallback=null,e.isProcessing=!1,e.rewardItems=[],e}n(e,t);var s=e.prototype;return s.init=function(e){var n=this;t.prototype.init.call(this,e),null!=e&&e.rewards?null!=e&&e.rewardId?(this.hideUIElements(),this.rewardId=e.rewardId,this.claimCallback=e.claimCallback||null,this.prepareRewards(e.rewards),this.setupButtonListeners(),this.scheduleOnce((function(){n.animateWindowOpen()}),.2)):console.error("No rewardId provided to RewardWindow"):console.error("No rewards provided to RewardWindow")},s.hideUIElements=function(){this.windowTitle&&((this.windowTitle.getComponent(p)||this.windowTitle.addComponent(p)).opacity=0);this.buttonsContainer&&((this.buttonsContainer.getComponent(p)||this.buttonsContainer.addComponent(p)).opacity=0);this.warningText&&(this.warningText.active=!1)},s.setupButtonListeners=function(){this.claimButton.node.on(l.EventType.TOUCH_END,this.onClaimButtonClicked,this),this.claimX2Button.node.on(l.EventType.TOUCH_END,this.onClaimX2ButtonClicked,this),this.claimX4Button.node.on(l.EventType.TOUCH_END,this.onClaimX4ButtonClicked,this)},s.prepareRewards=function(t){var e=this;this.rewardContainer.removeAllChildren(),this.rewardItems=[],this.rewards={},t.forEach((function(t){var n,a=m(e.rewardItemPrefab);"character_shard"===t.type&&(t.type="character_shard_"+t.metadata.rarity+"-"+t.metadata.characterId),null==(n=a.getComponent(g))||n.applyReward(t.type,t.amount),(a.getComponent(p)||a.addComponent(p)).opacity=0,e.rewardContainer.addChild(a),e.rewardItems.push(a),e.rewards[t.type]?e.rewards[t.type]+=t.amount:e.rewards[t.type]=t.amount,"ton"===t.type&&(e.warningText.active=!0)}));var n=this.rewardContainer.getComponent(h);n&&n.updateLayout();var a=this.rewardContainer.getComponent(T);a&&a.updateLayout()},s.animateWindowOpen=function(){var t=this;if(this.windowTitle){var e=this.windowTitle.getComponent(p);w(e).to(this.animationDuration,{opacity:255}).start()}this.rewardItems.forEach((function(e,n){var a=e.scale.clone();e.setScale(new f(0,0,0)),(e.getComponent(p)||e.addComponent(p)).opacity=255,w(e).delay(n*t.animationDelay).call((function(){k.getInstance().shortVibration()})).to(t.animationDuration,{scale:a},{easing:"backOut"}).start()}));var n=this.rewardItems.length*this.animationDelay+this.animationDuration;this.scheduleOnce((function(){if(t.buttonsContainer){var e=t.buttonsContainer.getComponent(p);w(e).to(t.animationDuration,{opacity:255}).start()}}),n)},s.onClaimX2ButtonClickedAd=function(){var t=this;this.isProcessing||(this.isProcessing=!0,this.disableButtons(),B.getInstance().show(),C.getInstance().post("/api/ads/watch",{productId:"ad_double",metadata:{rewardId:this.rewardId}}),v.getInstance().showAd("DoubleReward",(function(){t.animateClaim(2),t.isProcessing=!1,B.getInstance().hide()}),(function(){t.isProcessing=!1,t.enableButtons(),B.getInstance().hide()})))},s.onClaimX2ButtonClicked=function(){var t=r(o().mark((function t(){var e,n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isProcessing){t.next=2;break}return t.abrupt("return");case 2:return this.isProcessing=!0,this.disableButtons(),t.prev=4,B.getInstance().show(),t.next=8,C.getInstance().post("/api/payments/create-invoice",{productId:"multiply_reward_2",metadata:{rewardId:this.rewardId}});case 8:e=t.sent,I.getInstance().openInvoice(e.invoiceUrl,(function(t){"paid"===t?n.animateClaim(2):(C.getInstance().post("/api/payments/cancel",{orderId:e.orderId}),n.isProcessing=!1,n.enableButtons()),B.getInstance().hide()})),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),console.error("Failed to create invoice:",t.t0),this.isProcessing=!1,this.enableButtons();case 17:case"end":return t.stop()}}),t,this,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),s.onClaimX4ButtonClicked=function(){var t=r(o().mark((function t(){var e,n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isProcessing){t.next=2;break}return t.abrupt("return");case 2:return this.isProcessing=!0,this.disableButtons(),t.prev=4,B.getInstance().show(),t.next=8,C.getInstance().post("/api/payments/create-invoice",{productId:"multiply_reward_4",metadata:{rewardId:this.rewardId}});case 8:e=t.sent,I.getInstance().openInvoice(e.invoiceUrl,(function(t){"paid"===t?n.animateClaim(4):(C.getInstance().post("/api/payments/cancel",{orderId:e.orderId}),n.isProcessing=!1,n.enableButtons()),B.getInstance().hide()})),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),console.error("Failed to create invoice:",t.t0),this.isProcessing=!1,this.enableButtons();case 17:case"end":return t.stop()}}),t,this,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),s.onClaimButtonClicked=function(){this.isProcessing||(this.isProcessing=!0,this.disableButtons(),this.animateClaim())},s.disableButtons=function(){this.claimButton.interactable=!1,this.claimX2Button.interactable=!1,this.claimX4Button.interactable=!1},s.enableButtons=function(){this.claimButton.interactable=!0,this.claimX2Button.interactable=!0,this.claimX4Button.interactable=!0},s.animateClaim=function(){var t=r(o().mark((function t(e){var n,a=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=1),this.claim(e),n=Object.keys(this.rewards).map((function(t){return a.animateRewardItem(t,e)})),t.next=5,Promise.all(n);case 5:this.claimCallback&&this.claimCallback(),this.close();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.animateRewardItem=function(t,e){var n=this;return new Promise((function(a){var i=n.rewardContainer.children.find((function(e){var n=e.getComponent(g);return(null==n?void 0:n.getType())===t}));if(i){var r=i.getComponent(g),o=i.scale.clone(),s=1!==e?1:0;w(i).delay(s).to(.3,{scale:o.clone().multiplyScalar(1.1)},{easing:"quadOut"}).call((function(){r&&"ton"!==t&&r.setAmount(r.getAmount()*e)})).to(.2,{scale:o},{easing:"quadIn"}).delay(.5).call(a).start()}else a()}))},s.claim=function(t){void 0===t&&(t=1),C.getInstance().post("/api/reward/claim/"+this.rewardId,{});var e=y.getInstance();e.addCoins(t*this.rewards.coins||0),e.addTon(this.rewards.ton||0)},s.close=function(){t.prototype.close.call(this),this.claimButton.node.off(l.EventType.TOUCH_END,this.onClaimButtonClicked,this),this.claimX2Button.node.off(l.EventType.TOUCH_END,this.onClaimX2ButtonClicked,this),this.claimX4Button.node.off(l.EventType.TOUCH_END,this.onClaimX4ButtonClicked,this),this.claimCallback=null},e}(b)).prototype,"warningText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(z.prototype,"rewardContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(z.prototype,"rewardItemPrefab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(z.prototype,"claimButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(z.prototype,"claimX2Button",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(z.prototype,"claimX4Button",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(z.prototype,"windowTitle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(z.prototype,"buttonsContainer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(z.prototype,"animationDelay",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),q=e(z.prototype,"animationDuration",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),S=z))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/SceneLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,c,a,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,a=e.Button,u=e.director,s=e.Component}],execute:function(){var l,p,d,f,h,b;i._RF.push({},"889e9AuMS5GN6GOSqxBdZ7n","SceneLoader",void 0);var y=c.ccclass,m=c.property;e("SceneLoader",(l=y("SceneLoader"),p=m(a),l((h=t((f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,r(t,"button",h,o(t)),r(t,"sceneName",b,o(t)),t}n(t,e);var i=t.prototype;return i.start=function(){this.button&&this.button.node.on("click",this.onButtonClick,this)},i.onButtonClick=function(){this.sceneName?u.loadScene(this.sceneName):console.error("Scene name is not provided!")},t}(s)).prototype,"button",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(f.prototype,"sceneName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=f))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/Slideshow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,a,s,c,l,u,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Sprite,l=t.Color,u=t.macro,d=t.tween,h=t.Component}],execute:function(){var f,g,p,m,v;r._RF.push({},"67998ohBB1Dn7W/jeQca1NV","Slideshow",void 0);var I=a.ccclass,S=a.property;t("Slideshow",(f=I("Slideshow"),g=S([s]),f((v=e((m=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"images",v,o(e)),e.currentIndex=0,e.fadeDuration=.35,e.interval=5,e.fadeProgress=0,e.isFading=!1,e.totalSlides=3,e}i(e,t);var r=e.prototype;return r.start=function(){this.startSlideshow(),this.totalSlides=this.images.length},r.startSlideshow=function(){this.images.forEach((function(t,e){var i=t.getComponent(c);i&&(i.color=new l(28,113,203,0===e?255:0))})),this.schedule(this.switchSlide,this.interval,u.REPEAT_FOREVER,0)},r.switchSlide=function(){this.isFading||(console.log("ind",this.currentIndex),this.fadeOutImage(this.currentIndex),this.currentIndex=(this.currentIndex+1)%this.totalSlides,this.fadeInImage(this.currentIndex))},r.fadeOutImage=function(t){var e,i=null==(e=this.images[t])?void 0:e.getComponent(c);if(i){var n=i.color.clone();d(n).to(this.fadeDuration,{a:0},{easing:"quadOut",onUpdate:function(){i.color=n}}).start()}},r.fadeInImage=function(t){var e,i=null==(e=this.images[t])?void 0:e.getComponent(c);if(i){var n=i.color.clone();n.a=0,i.color=n,d(n).to(this.fadeDuration,{a:255},{easing:"quadOut",onUpdate:function(){i.color=n}}).start()}},e}(h)).prototype,"images",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=m))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpinMaster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TelegramSDK2.ts"],(function(t){var i,n,e,o,r,a,u,l,c,p,s,d,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Button,l=t.Node,c=t.AudioSource,p=t.tween,s=t.Vec3,d=t.Component},function(t){S=t.TelegramSDK}],execute:function(){var b,g,h,f,m,y,w,O,R,D,v,z,F,k,A,C,j,G,I,M,P,T,B;r._RF.push({},"77b86I0QJZEbIZ2x5PZrYNn","SpinMaster",void 0);var E=a.ccclass,K=a.property;t("SpinMaster",(b=E("SpinMaster"),g=K(u),h=K([l]),f=K([l]),m=K(l),y=K(l),w=K({type:Number,tooltip:"Время полного оборота (секунды)"}),O=K({type:cc.AudioSource}),R=K({type:cc.AudioClip}),D=K({type:cc.AudioClip}),v=K({type:cc.AudioClip}),b((k=i((F=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"button",k,o(i)),e(i,"targetOf",A,o(i)),e(i,"targetOn",C,o(i)),e(i,"rotatingObject",j,o(i)),e(i,"popupGame",G,o(i)),e(i,"rotationDuration",I,o(i)),e(i,"audioSource",M,o(i)),e(i,"mainSound",P,o(i)),e(i,"spinStartSound",T,o(i)),e(i,"spinReward",B,o(i)),i.originalRotationSpeed=1,i.isSpinningFast=!1,i}n(i,t);var r=i.prototype;return r.start=function(){this.audioSource||(this.audioSource=this.node.addComponent(c)),this.button&&this.button.node.on("click",this.onButtonClick,this),this.originalRotationSpeed=this.rotationDuration,this.startRotation(),S.getInstance().loadTelegramSDK((function(){console.log("Telegram SDK загружен")}))},r.startRotation=function(){this.rotatingObject&&(p(this.rotatingObject).stop(),p(this.rotatingObject).repeatForever(p().by(this.rotationDuration,{angle:-360})).start())},r.onButtonClick=function(){var t,i=this;null==(t=S.getInstance().getHapticFeedback())||t.impactOccurred("light"),this.isSpinningFast||(this.isSpinningFast=!0,this.rotationDuration=this.originalRotationSpeed/4,this.startRotation(),this.mainSound=this.spinStartSound,this.playSpinSound(),p(this.node).delay(1.5).call((function(){i.rotationDuration=i.originalRotationSpeed,i.startRotation(),i.isSpinningFast=!1,i.popupGame&&i.showPopup(),i.targetOf.forEach((function(t){t&&(t.active=!1)}))})).start())},r.showPopup=function(){var t;this.popupGame.active=!0,this.popupGame.setScale(s.ZERO),this.mainSound=this.spinReward,this.playSpinSound(),p(this.popupGame).to(.3,{scale:s.ONE},{easing:"backOut"}).delay(.89).start(),null==(t=S.getInstance().getHapticFeedback())||t.impactOccurred("light")},r.playSpinSound=function(){this.audioSource&&this.mainSound?(this.audioSource.playOneShot(this.mainSound),console.log("звук")):console.error("Ошибка: AudioSource или StepSound не установлены!")},i}(d)).prototype,"button",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(F.prototype,"targetOf",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=i(F.prototype,"targetOn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=i(F.prototype,"rotatingObject",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(F.prototype,"popupGame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(F.prototype,"rotationDuration",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=i(F.prototype,"audioSource",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(F.prototype,"mainSound",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(F.prototype,"spinStartSound",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(F.prototype,"spinReward",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=F))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/StackCollision.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,o,s,e,a,c,l,r,h,k,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,c=t.Node,l=t.Prefab,r=t.Collider,h=t.instantiate,k=t.Vec3,u=t.Component}],execute:function(){var f,g,S,p,C,d,b;e._RF.push({},"925d96dCNBAE6h6SEtE6gQ+","StackCollision",void 0);var m=a.ccclass,v=a.property;t("StackCollision",(f=m("StackCollision"),g=v({type:c}),S=v({type:l}),f((d=n((C=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return n=t.call.apply(t,[this].concat(e))||this,o(n,"spawnPoint",d,s(n)),o(n,"cubePrefab",b,s(n)),n.isInStackOn=!1,n.isInStackOff=!1,n.stack=[],n.maxStack=21,n}i(n,t);var e=n.prototype;return e.start=function(){var t=this.getComponent(r);t?(t.on("onTriggerEnter",this.onTriggerEnter,this),t.on("onTriggerExit",this.onTriggerExit,this),console.log("[StackCollision] ✅ Коллайдер активен.")):console.error("[StackCollision] ❌ Нет компонента Collider.")},e.onTriggerEnter=function(t){var n=t.otherCollider.node;"stack-on"===n.name&&(console.log('[StackCollision] 🔵 Игрок вошел в "stack-on"!'),this.isInStackOn=!0,this.startStacking()),"stack-off"===n.name&&(console.log('[StackCollision] 🔴 Игрок вошел в "stack-off"!'),this.isInStackOff=!0,this.startUnstacking())},e.onTriggerExit=function(t){var n=t.otherCollider.node;"stack-on"===n.name&&(console.log('[StackCollision] ❌ Игрок вышел из "stack-on"!'),this.isInStackOn=!1,this.stopStacking()),"stack-off"===n.name&&(console.log('[StackCollision] ❌ Игрок вышел из "stack-off"!'),this.isInStackOff=!1,this.stopUnstacking())},e.startStacking=function(){this.isInStackOn&&this.stack.length<this.maxStack&&(this.schedule(this.spawnCube,.34),console.log("[StackCollision] 🚀 Начинаем стакинг кубиков!"))},e.stopStacking=function(){this.unschedule(this.spawnCube),console.log("[StackCollision] 🛑 Стакинг остановлен!")},e.spawnCube=function(){if(this.isInStackOn&&!(this.stack.length>=this.maxStack)){var t=h(this.cubePrefab),n=this.stack.length*t.scale.y;t.setPosition(new k(0,n,0)),t.setParent(this.spawnPoint),this.stack.push(t),console.log("[StackCollision] ✅ Куб добавлен! Всего в стеке: "+this.stack.length)}},e.startUnstacking=function(){if(this.isInStackOff&&this.stack.length>0){var t=this.node.getComponent("StackOffHandler");if(t&&t.isStackFull())return void console.log("[StackCollision] ❌ Стек в stack-off заполнен. Разборка невозможна.");this.schedule(this.removeCube,.34),console.log("[StackCollision] 🔻 Начинаем разборку кубиков!")}},e.stopUnstacking=function(){this.unschedule(this.removeCube),console.log("[StackCollision] 🛑 Разборка кубиков остановлена!")},e.removeCube=function(){if(this.isInStackOff&&0!==this.stack.length){var t=this.stack.pop();t&&(console.log("[StackCollision] ❌ Удаляем куб: "+t.name),t.destroy()),console.log("[StackCollision] 🔻 Осталось кубиков: "+this.stack.length)}},e.isStackFull=function(){return this.stack.length>=this.maxStack},e.isStackEmpty=function(){return 0===this.stack.length},n}(u)).prototype,"spawnPoint",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(C.prototype,"cubePrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=C))||p));e._RF.pop()}}}));

System.register("chunks:///_virtual/StackOffHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,n,r,i,l,o,s,c,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,l=t._decorator,o=t.Node,s=t.Collider,c=t.Vec3,f=t.Component}],execute:function(){var h,k,p,S,g,u,d;i._RF.push({},"20b7471e1JIm6DaYgSnPcOl","StackOffHandler",void 0);var y=l.ccclass,b=l.property;t("StackOffHandler",(h=y("StackOffHandler"),k=b({type:o}),h((g=e((S=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i))||this,n(e,"targetStackPoint",g,r(e)),n(e,"maxStack",u,r(e)),n(e,"transferInterval",d,r(e)),e.playerStack=[],e.offStack=[],e.isPlayerInside=!1,e.playerScript=null,e}a(e,t);var i=e.prototype;return i.start=function(){var t=this.getComponent(s);t?(t.on("onTriggerEnter",this.onTriggerEnter,this),t.on("onTriggerExit",this.onTriggerExit,this),console.log("[StackOffHandler] ✅ Коллайдер триггер активен.")):console.error("[StackOffHandler] ❌ Ошибка! Нет компонента Collider.")},i.onTriggerEnter=function(t){var e=t.otherCollider.node;"Player"===e.name&&(console.log("[StackOffHandler] 🔴 Игрок зашел в stack-off!"),this.isPlayerInside=!0,this.playerScript=e.getComponent("StackCollision"),this.playerScript&&this.playerScript.stack?(this.playerStack=this.playerScript.stack,console.log("[StackOffHandler] 🟦 Кубики игрока найдены: "+this.playerStack.length),this.startTakingCubes()):console.warn("[StackOffHandler] ❌ Не удалось получить стек игрока!"))},i.onTriggerExit=function(t){"Player"===t.otherCollider.node.name&&(console.log("[StackOffHandler] ❌ Игрок вышел из stack-off!"),this.isPlayerInside=!1,this.stopTakingCubes())},i.startTakingCubes=function(){this.isPlayerInside&&this.playerStack.length>0&&this.offStack.length<this.maxStack&&(this.schedule(this.takeCube,this.transferInterval),console.log("[StackOffHandler] 🔥 Начинаем забирать кубики!"))},i.stopTakingCubes=function(){this.unschedule(this.takeCube),console.log("[StackOffHandler] 🛑 Остановили забор кубиков.")},i.takeCube=function(){if(!this.isPlayerInside||0===this.playerStack.length||this.offStack.length>=this.maxStack)return console.log("[StackOffHandler] ❌ Нечего забирать или стек полный."),this.stopTakingCubes(),void this.disablePlayerStacking();var t=this.playerStack.pop();if(t){console.log("[StackOffHandler] 🔥 Забираем куб: "+t.name);var e=this.offStack.length*t.scale.y;t.setParent(this.targetStackPoint),t.setPosition(new c(0,e,0)),this.offStack.push(t)}console.log("[StackOffHandler] 🔴 Кубов в stack-off: "+this.offStack.length+", у игрока осталось: "+this.playerStack.length),this.offStack.length>=this.maxStack&&(console.log("[StackOffHandler] 🛑 Stack-off заполнен!"),this.stopTakingCubes(),this.disablePlayerStacking())},i.disablePlayerStacking=function(){this.playerScript&&(console.log("[StackOffHandler] ❌ Отключаем стакинг у игрока."),this.playerScript.enabled=!1)},i.enablePlayerStacking=function(){this.playerScript&&(console.log("[StackOffHandler] ✅ Включаем стакинг у игрока."),this.playerScript.enabled=!0)},e}(f)).prototype,"targetStackPoint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=e(S.prototype,"maxStack",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=e(S.prototype,"transferInterval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.13}}),p=S))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/TabControllerScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TelegramSDK.ts"],(function(t){var n,e,i,s,o,r,a,u,c,l,h,d,C;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Node,u=t.Color,c=t.Button,l=t.Sprite,h=t.Label,d=t.Component},function(t){C=t.TelegramSDK}],execute:function(){var f,b,k,p,v,g,T,B,y,m,w,F,E,I,z;o._RF.push({},"db4c4cjwXRIUKBzd02Yz/CX","TabControllerScreen",void 0);var L=r.ccclass,R=r.property;t("TabControllerScreen",(f=L("TabControllerScreen"),b=R(a),k=R(a),p=R(a),v=R(a),g=R({type:u}),T=R({type:u}),f((m=n((y=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"taskButton",m,s(n)),i(n,"friendsButton",w,s(n)),i(n,"tasksContent",F,s(n)),i(n,"friendsContent",E,s(n)),i(n,"activeColor",I,s(n)),i(n,"inactiveColor",z,s(n)),n.currentTab="tasks",n.boundTaskClick=null,n.boundFriendsClick=null,n.eventsRegistered=!1,n}e(n,t);var o=n.prototype;return o.onLoad=function(){this.boundTaskClick=this.onTaskButtonClick.bind(this),this.boundFriendsClick=this.onFriendsButtonClick.bind(this)},o.start=function(){this.showTasks(),this.registerEvents()},o.onEnable=function(){this.registerEvents()},o.onDisable=function(){this.unregisterEvents()},o.registerEvents=function(){this.eventsRegistered||(this.taskButton&&this.boundTaskClick&&this.taskButton.on(c.EventType.CLICK,this.boundTaskClick),this.friendsButton&&this.boundFriendsClick&&this.friendsButton.on(c.EventType.CLICK,this.boundFriendsClick),this.eventsRegistered=!0)},o.unregisterEvents=function(){this.eventsRegistered&&(this.taskButton&&this.boundTaskClick&&this.taskButton.off(c.EventType.CLICK,this.boundTaskClick),this.friendsButton&&this.boundFriendsClick&&this.friendsButton.off(c.EventType.CLICK,this.boundFriendsClick),this.eventsRegistered=!1)},o.onTaskButtonClick=function(){var t;"tasks"!==this.currentTab&&(null==(t=C.getInstance().getHapticFeedback())||t.impactOccurred("medium"),this.showTasks())},o.onFriendsButtonClick=function(){var t;"friends"!==this.currentTab&&(null==(t=C.getInstance().getHapticFeedback())||t.impactOccurred("medium"),this.showFriends())},o.showTasks=function(){this.currentTab="tasks",this.tasksContent&&(this.tasksContent.active=!0),this.friendsContent&&(this.friendsContent.active=!1),this.updateButtonColors()},o.showFriends=function(){this.currentTab="friends",this.tasksContent&&(this.tasksContent.active=!1),this.friendsContent&&(this.friendsContent.active=!0),this.updateButtonColors()},o.updateButtonColors=function(){this.taskButton&&this.setButtonColor(this.taskButton,"tasks"===this.currentTab),this.friendsButton&&this.setButtonColor(this.friendsButton,"friends"===this.currentTab)},o.setButtonColor=function(t,n){var e=t.getComponent(l);e&&(e.color=n?this.activeColor:this.inactiveColor);var i=t.getComponentInChildren(h);i&&(i.color=n?u.WHITE:new u(200,200,200,255));var s=t.getChildByName("Icon");if(s){var o=s.getComponent(l);o&&(o.color=n?u.WHITE:new u(200,200,200,255))}},o.onDestroy=function(){this.unregisterEvents()},n}(d)).prototype,"taskButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(y.prototype,"friendsButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(y.prototype,"tasksContent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(y.prototype,"friendsContent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(y.prototype,"activeColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(56,57,182,255)}}),z=n(y.prototype,"inactiveColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(43,44,154,255)}}),B=y))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/Task.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiClient.ts","./TelegramSDK.ts","./InviteManager.ts","./PlayerDataManager.ts","./LoadingService.ts"],(function(t){var e,a,n,i,s,r,o,c,u,h,p,l,k,g,d,f,b,m,v,S,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,c=t._decorator,u=t.RichText,h=t.Label,p=t.Button,l=t.Node,k=t.SpriteFrame,g=t.Color,d=t.tween,f=t.Component},function(t){b=t.ApiClient},function(t){m=t.TelegramSDK},function(t){v=t.InviteManager},function(t){S=t.PlayerDataManager},function(t){w=t.LoadingService}],execute:function(){var B,y,D,T,C,L,I,x,M,P,R,A,N,z,_,F,E,K,W;o._RF.push({},"cebc2ev0WdMMIRZhypo8aZ4","Task",void 0);var O=c.ccclass,U=c.property;t("Task",(B=O("Task"),y=U(u),D=U(u),T=U(h),C=U(p),L=U(l),I=U(k),x=U(k),M=U(k),B((A=e((R=function(t){function e(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"taskDescriptionLabel",A,i(e)),n(e,"taskRewardLabel",N,i(e)),n(e,"progressLabel",z,i(e)),n(e,"taskButton",_,i(e)),n(e,"loadingSpinner",F,i(e)),n(e,"normalButton",E,i(e)),n(e,"checkButton",K,i(e)),n(e,"checkingButton",W,i(e)),e.taskData=null,e.notificationPopup=null,e.tasksManager=null,e.spinnerTween=null,e.messagesManager=null,e}a(e,t);var o=e.prototype;return o.init=function(t,e,a,n){this.taskData=t,this.messagesManager=e,this.notificationPopup=a,this.tasksManager=n,this.taskDescriptionLabel.string=t.description,this.taskRewardLabel.string=""+t.reward.amount,"achievement"===t.type&&(this.progressLabel.string=this.taskData.progress+"/"+this.taskData.criteria.target,this.progressLabel.node.active=!0,this.taskData.status="Started"),this.updateButtonAppearance(),this.taskButton.node.on(p.EventType.CLICK,this.onTaskClick,this)},o.getData=function(){return this.taskData},o.updateButtonAppearance=function(){var t=this.taskButton.node.getChildByName("Content").getChildByName("Label").getComponent(h);switch(this.loadingSpinner&&this.stopLoadingSpinner(),this.taskData.status){case"NotStarted":this.taskButton.normalSprite=this.normalButton,this.taskButton.hoverSprite=this.normalButton,this.taskButton.pressedSprite=this.checkingButton,t.string="Start",t.color=new g(255,255,255),this.taskButton.interactable=!0;break;case"Started":case"Approved":this.taskButton.normalSprite=this.checkButton,this.taskButton.hoverSprite=this.checkButton,this.taskButton.pressedSprite=this.checkingButton,t.string="Check",t.color=new g(255,255,255),this.taskButton.interactable=!0;break;case"Checking":this.taskButton.normalSprite=this.checkingButton,this.taskButton.hoverSprite=this.checkingButton,this.taskButton.pressedSprite=this.checkingButton,this.taskButton.disabledSprite=this.checkingButton,t.string="Checking",t.color=new g(255,255,255),this.taskButton.interactable=!1,this.loadingSpinner&&this.startLoadingSpinner();break;default:console.warn("Необработанный статус задачи:",this.taskData.status)}},o.onTaskClick=function(){switch(this.taskData.status){case"NotStarted":this.handleStartButton();break;case"Started":this.handleCheckButton();break;case"Approved":this.handleClaimButton();break;default:console.warn("Необработанный статус задачи:",this.taskData.status)}},o.handleStartButton=function(){switch(this.taskData.status="Started",this.updateButtonAppearance(),this.taskData.type){case"subscribe":this.handleSubscribeStartTask();break;case"open_link":this.handleOpenLinkStartTask();break;case"post_story":this.handlePostStoryStartTask();break;case"invite":this.handleInviteStartTask();break;default:console.warn("Неизвестный тип задачи:",this.taskData.type)}this.taskData.status="Started",this.updateButtonAppearance()},o.handleCheckButton=function(){var t=s(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.taskData.status="Checking",this.updateButtonAppearance(),t.prev=2,t.next=5,this.checkCompletion();case 5:t.sent.success?(this.taskData.status="Approved",this.showTaskCompletePopup()):("achievement"!==this.taskData.type&&(this.taskData.status="NotStarted"),this.showNotification("Task not completed, please try again.")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.showNotification("Error checking task, please try again.");case 12:return t.prev=12,this.updateButtonAppearance(),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[2,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),o.handleClaimButton=function(){var t=s(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.getInstance().withLoading(b.getInstance().post("/api/tasks/complete",{taskId:this.taskData._id}));case 3:t.sent.reward?(this.giveReward(),this.tasksManager.removeTaskFromList(this.taskData._id)):this.showNotification("Task not completed, please try again."),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Ошибка при проверке выполнения задания:",t.t0),this.showNotification("Error checking task, please try again.");case 11:return t.prev=11,this.messagesManager.hideCurrentWindow(),t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[0,7,11,14]])})));return function(){return t.apply(this,arguments)}}(),o.handleSubscribeStartTask=function(){m.getInstance().openTelegramLink(this.taskData.url)},o.handleOpenLinkStartTask=function(){m.getInstance().openLink(this.taskData.url)},o.handlePostStoryStartTask=function(){var t=this.taskData.text.replace("%{ref}",v.generateRefLink());m.getInstance().shareToStory(this.taskData.url,{text:t})},o.handleInviteStartTask=function(){var t="Приглашаю тебя присоединиться: "+this.taskData.url;m.getInstance().openTelegramLink("https://t.me/share/url?url="+encodeURIComponent(this.taskData.url)+"&text="+encodeURIComponent(t))},o.checkCompletion=function(){var t=s(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.getInstance().withLoading(b.getInstance().post("/api/tasks/check",{taskId:this.taskData._id}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.error("Ошибка при проверке выполнения задания:",t.t0),t.abrupt("return",{success:!1});case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),o.giveReward=function(){S.getInstance().addCoins(this.taskData.reward.amount||0)},o.showTaskCompletePopup=function(){var t=this;this.messagesManager&&this.messagesManager.showTaskCompleteWindow(this.taskData,s(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleClaimButton();case 2:case"end":return e.stop()}}),e)}))))},o.showNotification=function(t){var e=this;this.notificationPopup&&(this.notificationPopup.active=!0,this.notificationPopup.getChildByName("Text").getComponent(u).string=t,setTimeout((function(){e.notificationPopup.active=!1}),3e3))},o.startLoadingSpinner=function(){this.loadingSpinner&&(this.loadingSpinner.active=!0,this.spinnerTween=d(this.loadingSpinner).repeatForever(d().by(1,{angle:360})).start())},o.stopLoadingSpinner=function(){this.loadingSpinner&&(this.loadingSpinner.active=!1,this.spinnerTween&&this.spinnerTween.stop())},e}(f)).prototype,"taskDescriptionLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(R.prototype,"taskRewardLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"progressLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(R.prototype,"taskButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"loadingSpinner",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(R.prototype,"normalButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(R.prototype,"checkButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(R.prototype,"checkingButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/TasksManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiClient.ts","./Task.ts","./MessagesManager.ts"],(function(t){var e,n,a,i,r,s,o,l,c,u,p,f,h,g,k,v,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,l=t._decorator,c=t.Node,u=t.Prefab,p=t.tween,f=t.instantiate,h=t.Layout,g=t.Component},function(t){k=t.ApiClient},function(t){v=t.Task},function(t){d=t.default}],execute:function(){var b,m,y,C,T,L,A,x,D,w,M,z,P,E,I;o._RF.push({},"115acltdcBBYJWyySiul2y7","TasksManager",void 0);var N=l.ccclass,_=l.property;t("TasksManager",(b=N("TasksManager"),m=_(c),y=_(c),C=_(c),T=_(u),L=_(c),A=_(d),b((w=e((D=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"tasksListContent",w,i(e)),a(e,"tasksAllDoneText",M,i(e)),a(e,"loading",z,i(e)),a(e,"taskItemPrefab",P,i(e)),a(e,"taskErrorNotification",E,i(e)),a(e,"messagesManager",I,i(e)),e}n(e,t);var o=e.prototype;return o.onEnable=function(){this.loading&&p(this.loading.getChildByName("Spinner")).repeatForever(p().by(1,{angle:360})).start(),this.fetchTasks()},o.fetchTasks=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.tasksListContent.removeAllChildren(),this.tasksAllDoneText.active=!1,this.loading.active=!0,t.next=6,k.getInstance().get("/api/tasks");case 6:e=t.sent,this.loading.active=!1,e&&e.length>0?(this.populateTasksList(e),this.tasksAllDoneText.active=!1):(this.tasksListContent.removeAllChildren(),this.tasksAllDoneText.active=!0),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),this.loading.active=!1,this.tasksAllDoneText.active=!0,console.error("Ошибка при запросе списка задач:",t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),o.populateTasksList=function(t){var e=this;this.tasksListContent.removeAllChildren(),t.forEach((function(t){var n=f(e.taskItemPrefab),a=n.getComponent(v);a&&a.init(t,e.messagesManager,e.taskErrorNotification,e),e.tasksListContent.addChild(n)}));var n=this.tasksListContent.getComponent(h);n&&n.updateLayout()},o.removeTaskFromList=function(t){var e=this.tasksListContent.children.find((function(e){var n=e.getComponent(v);return n&&n.getData()._id===t}));e&&(e.destroy(),1===this.tasksListContent.children.length&&(this.tasksAllDoneText.active=!0))},e}(g)).prototype,"tasksListContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"tasksAllDoneText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(D.prototype,"loading",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(D.prototype,"taskItemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(D.prototype,"taskErrorNotification",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"messagesManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=D))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/TelegramSDK.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"49483uUqkFGY7RiKClygKuA","TelegramSDK",void 0),t("TelegramSDK",function(){function t(){this.tg=null}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.loadTelegramSDK=function(t){var n,e;this.tg=null==(n=window.Telegram)?void 0:n.WebApp,null!=(e=window.Telegram)&&null!=(e=e.WebView)&&e.onEvent?(window.Telegram.WebView.onEvent("location_checked",(function(t,n){console.log("Событие 'location_checked' получено. Геоданные:",n)})),window.Telegram.WebView.onEvent("location_requested",(function(t,n){console.log("Событие 'location_requested' получено. Геоданные:",n)}))):console.warn("Telegram WebView API не доступен."),t()},n.getUserId=function(){var t;return(null==(t=this.tg)||null==(t=t.initDataUnsafe)||null==(t=t.user)?void 0:t.id)||null},n.getUser=function(){var t;return(null==(t=this.tg)||null==(t=t.initDataUnsafe)?void 0:t.user)||null},n.getStartParam=function(){var t;return new URLSearchParams(null==(t=this.tg)?void 0:t.initData).get("start_param")},n.getUserLanguage=function(){var t;return new URLSearchParams(null==(t=this.tg)?void 0:t.initData).get("language_code")},n.getHapticFeedback=function(){var t;return null==(t=this.tg)?void 0:t.HapticFeedback},n.onEvent=function(t,n){var e;null==(e=this.tg)||e.onEvent(t,n)},n.ready=function(){this.tg&&this.tg.ready()},n.expand=function(){this.tg&&this.tg.expand()},n.openTelegramLink=function(t){this.tg&&this.tg.openTelegramLink(t)},n.openLink=function(t){this.tg&&this.tg.openLink(t)},n.shareToStory=function(t,n){this.tg&&this.tg.shareToStory(t,n)},n.openInvoice=function(t,n){this.tg&&this.tg.openInvoice(t,n)},n.isSupported=function(t){if(!this.tg)return!1;switch(t){case"hapticFeedback":return void 0!==this.tg.HapticFeedback;case"mainButton":return void 0!==this.tg.MainButton;case"backButton":return void 0!==this.tg.BackButton;default:return!1}},n.getLanguageCode=function(){try{if(this.tg&&this.tg.initDataUnsafe&&this.tg.initDataUnsafe.user)return this.tg.initDataUnsafe.user.language_code||null}catch(t){console.error("Failed to get language code from Telegram:",t)}return null},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/TelegramSDK2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"bc1b8WgVVFPb7Ciwv4j6MjC","TelegramSDK",void 0),t("TelegramSDK",function(){function t(){this.tg=null}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.loadTelegramSDK=function(t){var n;this.tg=null==(n=window.Telegram)?void 0:n.WebApp,t()},n.getUserId=function(){var t;return(null==(t=this.tg)||null==(t=t.initDataUnsafe)||null==(t=t.user)?void 0:t.id)||null},n.getUser=function(){var t;return(null==(t=this.tg)||null==(t=t.initDataUnsafe)?void 0:t.user)||null},n.getStartParam=function(){var t;return new URLSearchParams(null==(t=this.tg)?void 0:t.initData).get("start_param")},n.getHapticFeedback=function(){var t;return null==(t=this.tg)?void 0:t.HapticFeedback},n.onEvent=function(t,n){var e;null==(e=this.tg)||e.onEvent(t,n)},n.ready=function(){this.tg&&this.tg.ready()},n.expand=function(){this.tg&&this.tg.expand()},n.openTelegramLink=function(t){this.tg&&this.tg.openTelegramLink(t)},n.openLink=function(t){this.tg&&this.tg.openLink(t)},n.shareToStory=function(t,n){this.tg&&this.tg.shareToStory(t,n)},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/TextWithIcon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,c,l,a,s,u,p,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,l=e.Label,a=e.Sprite,s=e.SpriteFrame,u=e.Enum,p=e.HorizontalTextAlignment,h=e.Layout,f=e.Component}],execute:function(){var d,b,I,T,g,m,y,v,C,E,z;r._RF.push({},"1b717h3hqNPfJw1q5QyVeQY","TextWithIcon",void 0);var N=c.ccclass,S=c.property,x=e("PredefinedIcons",function(e){return e[e.COINS=0]="COINS",e[e.EXPERIENCE=1]="EXPERIENCE",e[e.TON=2]="TON",e[e.CARDS=3]="CARDS",e}({}));e("TextWithIcon",(d=N("TextWithIcon"),b=S(l),I=S(a),T=S([s]),g=S({type:u(x)}),d((v=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"label",v,o(t)),i(t,"icon",C,o(t)),i(t,"predefinedIcons",E,o(t)),i(t,"defaultIcon",z,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.defaultIcon!==x.COINS&&(this.icon.spriteFrame=this.predefinedIcons[this.defaultIcon])},r.setTextWithIcon=function(e,t,n){this.label.string=e,t?(this.icon.spriteFrame=t,this.icon.node.active=!0):void 0!==n?(this.icon.spriteFrame=this.predefinedIcons[x[n]],this.icon.node.active=!0):this.icon.node.active=!1},r.setTextStyle=function(e,t){e&&(this.label.color=e),t&&(this.label.fontSize=t)},r.setAlignment=function(e){var t=this.node.getChildByName("Text").getComponent(l);t&&(t.horizontalAlign="start"===e?p.LEFT:"end"===e?p.RIGHT:p.CENTER)},r.setDirectionAndSpacing=function(e,t){var n=this.node.getComponent(h);n&&(n.horizontalDirection="ltr"===e?h.HorizontalDirection.LEFT_TO_RIGHT:h.HorizontalDirection.RIGHT_TO_LEFT,n.spacingX=t)},r.setOutline=function(e,t){var n=this.node.getChildByName("Text").getComponent(l);e||t?(n.enableOutline=!0,n.outlineColor=e,n.outlineWidth=t||2):n.enableOutline=!1},r.setIconVisible=function(e){this.icon.node.active=e},r.setTextVisible=function(e){this.label.node.active=e},t}(f)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(y.prototype,"predefinedIcons",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(y.prototype,"defaultIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.COINS}}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/TrailController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,i,l,n,a,o,c;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,o=t.ParticleSystem,c=t.Component}],execute:function(){var s,u,p,y,f;n._RF.push({},"9746euEmlVJLJqrPQFB2ilt","TrailController",void 0);var h=a.ccclass,m=a.property;t("TrailController",(s=h("TrailController"),u=m(o),s((f=r((y=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r=t.call.apply(t,[this].concat(n))||this,i(r,"trailParticleSystem",f,l(r)),r}e(r,t);var n=r.prototype;return n.start=function(){this.trailParticleSystem&&this.trailParticleSystem.play()},n.update=function(t){},r}(c)).prototype,"trailParticleSystem",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=y))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIButtonHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,i,c,a,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,a=t.Node,u=t.Button,l=t.Component}],execute:function(){var s,p,f,b,d,h,y;i._RF.push({},"7ed4dkMEMVL6KsYy//Ag3BH","UIButtonHandler",void 0);var g=c.ccclass,v=c.property;t("UIButtonHandler",(s=g("UIButtonHandler"),p=v([a]),f=v(u),s((h=e((d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,r(e,"targetObjects",h,o(e)),r(e,"button",y,o(e)),e}n(e,t);var i=e.prototype;return i.start=function(){this.button&&this.button.node.on("click",this.onClick,this)},i.onClick=function(){this.targetObjects.forEach((function(t){t&&(t.active=!1)}))},e}(l)).prototype,"targetObjects",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=e(d.prototype,"button",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIButtonHandlerOn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TelegramSDK2.ts"],(function(t){var e,n,r,i,o,c,a,u,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Node,u=t.Button,l=t.Component},function(t){s=t.TelegramSDK}],execute:function(){var p,f,b,h,d,g,y;o._RF.push({},"2108597KdhL1KA/9CZ/S25s","UIButtonHandlerOn",void 0);var v=c.ccclass,m=c.property;t("UIButtonHandlerOn",(p=v("UIButtonHandler"),f=m([a]),b=m(u),p((g=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,r(e,"targetObjects",g,i(e)),r(e,"button",y,i(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.button&&this.button.node.on("click",this.onClick,this)},o.onClick=function(){this.targetObjects.forEach((function(t){var e;t&&(t.active=!0,null==(e=s.getInstance().getHapticFeedback())||e.impactOccurred("light"))}))},e}(l)).prototype,"targetObjects",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=e(d.prototype,"button",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["cc","./WindowsManager.ts"],(function(n){var e,t;return{setters:[function(n){e=n.cclegacy},function(n){t=n.WindowsManager}],execute:function(){e._RF.push({},"98d231LozxMsaotW0oPZ7se","UIManager",void 0),n("UIManager",function(){function n(){this.windowsManager=void 0,this.windowsManager=new t}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n}()).instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeCardUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UpgradeInfo.ts"],(function(e){var t,i,n,o,r,l,a,c,s,p,u,h,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,c=e.Sprite,s=e.Node,p=e.Color,u=e.SpriteFrame,h=e.Button,b=e.Component},function(e){d=e.UpgradeType}],execute:function(){var f,I,m,g,y,z,k,v,_,T,w,A,C,U,x,L,S,E,M,F,N,D,B,O,P,H,R;r._RF.push({},"cbe94Pkp+xLr4+75/Z2ot9D","UpgradeCardUI",void 0);var K=l.ccclass,j=l.property;e("UpgradeCardUI",(f=K("UpgradeCardUI"),I=j(a),m=j(c),g=j(s),y=j(s),z=j(p),k=j(p),v=j({type:u,tooltip:"Иконка для улучшения здоровья"}),_=j({type:u,tooltip:"Иконка для улучшения урона"}),T=j({type:u,tooltip:"Иконка для улучшения брони"}),w=j({type:u,tooltip:"Иконка для улучшения скорости атаки"}),A=j({type:u,tooltip:"Иконка для улучшения скорости передвижения"}),C=j({type:u,tooltip:"Иконка для улучшения радиуса атаки"}),f((L=t((x=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"titleLabel",L,o(t)),n(t,"skillIcon",S,o(t)),n(t,"selectText",E,o(t)),n(t,"monetizeNode",M,o(t)),n(t,"hoverColor",F,o(t)),n(t,"normalColor",N,o(t)),n(t,"healthIcon",D,o(t)),n(t,"damageIcon",B,o(t)),n(t,"armorIcon",O,o(t)),n(t,"attackSpeedIcon",P,o(t)),n(t,"moveSpeedIcon",H,o(t)),n(t,"radiusAttackIcon",R,o(t)),t._upgradeOption=null,t._index=-1,t._parentUI=null,t._priceLabel=null,t}i(t,e);var r=t.prototype;return r.initialize=function(e,t,i){this._upgradeOption=e,this._index=t,this._parentUI=i,this._priceLabel=this.monetizeNode.getComponent(a),this.titleLabel&&(this.titleLabel.string=e.name),this.setIconByType(e.type),this.node.on(h.EventType.CLICK,this.onButtonClick,this),this.setupMonetization(e.price>0),console.log("AAAAAAAA")},r.setIconByType=function(e){if(this.skillIcon)switch(e){case d.HEALTH:this.skillIcon.spriteFrame=this.healthIcon;break;case d.DAMAGE:this.skillIcon.spriteFrame=this.damageIcon;break;case d.ARMOR:this.skillIcon.spriteFrame=this.armorIcon;break;case d.ATTACK_SPEED:this.skillIcon.spriteFrame=this.attackSpeedIcon;break;case d.MOVE_SPEED:this.skillIcon.spriteFrame=this.moveSpeedIcon;break;default:console.warn("[UpgradeCardUI] Неизвестный тип улучшения: "+e)}},r.setupHoverEffects=function(){this.selectText&&(this.selectText.active=!1)},r.setupMonetization=function(e){this.monetizeNode&&(this.monetizeNode.active=e,e&&this._priceLabel&&this._upgradeOption.price?(this._priceLabel.string=this._upgradeOption.price.toString(),this.selectText.active=!1):this.selectText.active=!0)},r.onMouseEnter=function(){this.selectText&&(this.selectText.active=!0)},r.onMouseLeave=function(){this.selectText&&(this.selectText.active=!1)},r.onButtonClick=function(){this._parentUI&&this._index>=0&&this._parentUI.onUpgradeSelected(this._index)},r.setIcon=function(e){this.skillIcon&&e&&(this.skillIcon.spriteFrame=e)},r.setMonetizeMode=function(e){this.monetizeNode&&(this.monetizeNode.active=e)},t}(b)).prototype,"titleLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(x.prototype,"skillIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(x.prototype,"selectText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(x.prototype,"monetizeNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(x.prototype,"hoverColor",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(255,255,255,255)}}),N=t(x.prototype,"normalColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(220,220,220,255)}}),D=t(x.prototype,"healthIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(x.prototype,"damageIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(x.prototype,"armorIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(x.prototype,"attackSpeedIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(x.prototype,"moveSpeedIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"radiusAttackIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=x))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeInfo.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){E._RF.push({},"873aa6YhN9PTJT4YrjPocOS","UpgradeInfo",void 0);e("UpgradeType",function(e){return e[e.HEALTH=0]="HEALTH",e[e.DAMAGE=1]="DAMAGE",e[e.ARMOR=2]="ARMOR",e[e.ATTACK_SPEED=3]="ATTACK_SPEED",e[e.MOVE_SPEED=4]="MOVE_SPEED",e}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradeSelectionUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager2.ts","./UpgradeCardUI.ts"],(function(e){var t,n,i,r,o,a,s,l,c,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.Component},function(e){p=e.GameManager},function(e){u=e.UpgradeCardUI}],execute:function(){var g,h,d,f,v,y,m;a._RF.push({},"009fe0qQtBFu6/1tugle9kg","UpgradeSelectionUI",void 0);var U=s.ccclass,I=s.property;e("UpgradeSelectionUI",(g=U("UpgradeSelectionUI"),h=I({type:[l],tooltip:"Контейнеры для карточек улучшений"}),d=I({tooltip:"Заголовок окна выбора улучшений"}),g((y=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"optionContainers",y,r(t)),i(t,"titleLabel",m,r(t)),t._currentOptions=[],t._levelSystem=null,t}n(t,e);var a=t.prototype;return a.start=function(){},a.showUpgradeOptions=function(e,t){var n=p.getInstance();console.log("gameManager",n.isPaused()),n&&n.isPaused()||(this._currentOptions=e,this._levelSystem=t,this.titleLabel&&(this.titleLabel.string="Выберите улучшение (Уровень "+t.currentLevel+")"),this.displayOptions(e),this.node.active=!0)},a.displayOptions=function(e){for(var t,n=o(this.optionContainers);!(t=n()).done;){t.value.active=!1}for(var i=0;i<Math.min(e.length,this.optionContainers.length);i++){var r=this.optionContainers[i],a=e[i],s=r.getComponent(u);s&&s.initialize(a,i,this),r.active=!0}},a.onUpgradeSelected=function(e){if(!this._levelSystem||e>=this._currentOptions.length)console.error("[UpgradeSelectionUI] Некорректный выбор улучшения");else{this._levelSystem.applyUpgradeByIndex(e,this._currentOptions),this.node.active=!1;var t=p.getInstance();t&&t.resumeGame(),this._currentOptions=[]}},a.closePanel=function(){this.node.active=!1;var e=p.getInstance();e&&e.resumeGame()},t}(c)).prototype,"optionContainers",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(v.prototype,"titleLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("formatNumber",(function(t){if(t<1e3)return t.toString();if(t<1e6){var e=t/1e3;return e.toFixed(e%1==0?0:e<10?1:e<100?2:3)+"k"}var r=t/1e6;return r.toFixed(r%1==0?0:r<10?1:2)+"m"})),e._RF.push({},"f4c8aVIt55C3oJr36hJ5r5B","utils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/VibrationService.ts",["cc","./TelegramSDK2.ts"],(function(e){var i,t,a;return{setters:[function(e){i=e.cclegacy,t=e.sys},function(e){a=e.TelegramSDK}],execute:function(){i._RF.push({},"1b282Cz4WJBzJaezkBX9KnW","VibrationService",void 0),e("VibrationService",function(){function e(){this.isEnabled=!0}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var i=e.prototype;return i.setEnabled=function(e){this.isEnabled=e},i.shortVibration=function(){var e;this.isEnabled&&(t.isMobile&&(null!=(e=a.getInstance())&&e.getHapticFeedback()?window.Telegram.WebApp.HapticFeedback.impactOccurred("light"):"vibrate"in navigator&&navigator.vibrate(20)))},i.mediumVibration=function(){var e;this.isEnabled&&(t.isMobile&&(null!=(e=a.getInstance())&&e.getHapticFeedback()?window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"):"vibrate"in navigator&&navigator.vibrate(40)))},i.strongVibration=function(){var e;this.isEnabled&&(t.isMobile&&(null!=(e=a.getInstance())&&e.getHapticFeedback()?window.Telegram.WebApp.HapticFeedback.impactOccurred("heavy"):"vibrate"in navigator&&navigator.vibrate([40,30,80])))},i.errorVibration=function(){var e;this.isEnabled&&(t.isMobile&&(null!=(e=a.getInstance())&&e.getHapticFeedback()?window.Telegram.WebApp.HapticFeedback.notificationOccurred("error"):"vibrate"in navigator&&navigator.vibrate([20,40,20])))},i.successVibration=function(){var e;this.isEnabled&&(t.isMobile&&(null!=(e=a.getInstance())&&e.getHapticFeedback()?window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"):"vibrate"in navigator&&navigator.vibrate([20,40,80])))},e}()).instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/VibrationService2.ts",["cc","./TelegramSDK.ts"],(function(i){var e,t,a;return{setters:[function(i){e=i.cclegacy,t=i.sys},function(i){a=i.TelegramSDK}],execute:function(){e._RF.push({},"d9711fSTCxDALlgNUMx/AV/","VibrationService",void 0),i("VibrationService",function(){function i(){this.isEnabled=!0}i.getInstance=function(){return i.instance||(i.instance=new i),i.instance};var e=i.prototype;return e.setEnabled=function(i){this.isEnabled=i},e.shortVibration=function(){this.isEnabled&&t.isMobile&&(a.getInstance().isSupported("hapticFeedback")?window.Telegram.WebApp.HapticFeedback.impactOccurred("light"):"vibrate"in navigator&&navigator.vibrate(20))},e.mediumVibration=function(){this.isEnabled&&t.isMobile&&(a.getInstance().isSupported("hapticFeedback")?window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"):"vibrate"in navigator&&navigator.vibrate(40))},e.strongVibration=function(){this.isEnabled&&t.isMobile&&(a.getInstance().isSupported("hapticFeedback")?window.Telegram.WebApp.HapticFeedback.impactOccurred("heavy"):"vibrate"in navigator&&navigator.vibrate([40,30,80]))},e.errorVibration=function(){this.isEnabled&&t.isMobile&&(a.getInstance().isSupported("hapticFeedback")?window.Telegram.WebApp.HapticFeedback.notificationOccurred("error"):"vibrate"in navigator&&navigator.vibrate([20,40,20]))},e.successVibration=function(){this.isEnabled&&t.isMobile&&(a.getInstance().isSupported("hapticFeedback")?window.Telegram.WebApp.HapticFeedback.notificationOccurred("success"):"vibrate"in navigator&&navigator.vibrate([20,40,80]))},i}()).instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualJoystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,o,e,a,s,r,c,u,l,h,d,y,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Prefab,c=t.Node,u=t.Vec3,l=t.input,h=t.Input,d=t.instantiate,y=t.UITransform,p=t.Component}],execute:function(){var k,g,f,_,v,m,j,b,T,H;a._RF.push({},"a60a5N2sGJA46vnHvfc6Di6","VirtualJoystick",void 0);var B=s.ccclass,C=s.property;t("VirtualJoystick",(k=B("VirtualJoystick"),g=C(r),f=C(r),_=C(c),k((j=i((m=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,o(i,"joystickBackgroundPrefab",j,e(i)),o(i,"joystickHandlePrefab",b,e(i)),o(i,"canvas",T,e(i)),o(i,"maxRadius",H,e(i)),i._joystickBackground=null,i._joystickHandle=null,i._inputDirection=new u,i._magnitude=0,i}n(i,t);var a=i.prototype;return a.start=function(){l.on(h.EventType.TOUCH_START,this.onTouchStart,this),l.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(h.EventType.TOUCH_END,this.onTouchEnd,this),l.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},a.onTouchStart=function(t){var i=t.getUILocation();if(this.canvas){this._joystickBackground=d(this.joystickBackgroundPrefab),this.canvas.addChild(this._joystickBackground),this._joystickHandle=d(this.joystickHandlePrefab),this._joystickBackground.addChild(this._joystickHandle);var n=this.canvas.getComponent(y);this._joystickBackground.setPosition(i.x-n.width/2,i.y-n.height/2,0),this._joystickHandle.setPosition(u.ZERO)}else console.error("Canvas не назначен!")},a.onTouchMove=function(t){var i=t.getUILocation();this.updateJoystickHandle(i)},a.onTouchEnd=function(t){this._joystickBackground&&this._joystickBackground.destroy(),this._inputDirection.set(0,0,0),this._magnitude=0},a.updateJoystickHandle=function(t){if(this._joystickBackground&&this._joystickHandle){var i=this._joystickBackground.position,n=new u(t.x-this.canvas.getComponent(y).width/2-i.x,t.y-this.canvas.getComponent(y).height/2-i.y,0),o=n.length();o>this.maxRadius&&n.normalize().multiplyScalar(this.maxRadius),this._joystickHandle.setPosition(n),this._inputDirection.set(n.x/this.maxRadius,0,-n.y/this.maxRadius),this._magnitude=Math.min(o/this.maxRadius,1)}},a.getInputDirection=function(){return this._inputDirection},a.getMagnitude=function(){return this._magnitude},i}(p)).prototype,"joystickBackgroundPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(m.prototype,"joystickHandlePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(m.prototype,"canvas",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(m.prototype,"maxRadius",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),v=m))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/WalletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFiManager.ts","./index.ts","./ApiClient.ts","./LoadingService.ts"],(function(n){var t,e,o,i,c,a,s,r,u,l,p,d,h,f,g,C;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,c=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){s=n.cclegacy,r=n._decorator,u=n.Button,l=n.Node,p=n.Component,d=n.Label},function(n){h=n.GameFiManager},function(n){f=n.Address},function(n){g=n.ApiClient},function(n){C=n.LoadingService}],execute:function(){var b,v,y,S,T,w,m;s._RF.push({},"8f1c0mRQKZP6Y047ZSlJJpW","WalletManager",void 0);var B=r.ccclass,I=r.property;n("WalletManager",(b=B("WalletManager"),v=I(u),y=I(l),b((w=t((T=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return t=n.call.apply(n,[this].concat(c))||this,o(t,"connectButton",w,i(t)),o(t,"infoPanel",m,i(t)),t.topPanelTitle=null,t.onModalUnsubscribe=null,t.onStatusUnsubscribe=null,t.lastConnectionStatus=!1,t}e(t,n);var s=t.prototype;return s.onLoad=function(){var n=c(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.topPanelTitle=this.connectButton.node.getChildByName("count_text").getComponent(d),this.node.on(l.EventType.TOUCH_END,(function(){h.getInstance().isConnected()})),n.next=4,this.updateConnect();case 4:this.setupListeners();case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.setupListeners=function(){var n=this,t=h.getInstance();this.clearListeners(),this.setupConnectButton(),this.onModalUnsubscribe=t.onModalStateChange((function(t){return n.updateConnect(t)})),this.onStatusUnsubscribe=t.onStatusChange((function(){return n.updateConnect()}))},s.setupConnectButton=function(){var n=this;this.connectButton.node.on(l.EventType.TOUCH_END,(function(){h.getInstance().isConnected()?n.disconnect():n.connect()}))},s.connect=function(){h.getInstance().connect()},s.disconnect=function(){var n=h.getInstance(),t=n.getWalletConnector().connected;n.disconnect(),t||this.updateConnect()},s.updateConnect=function(){var n=c(a().mark((function n(t){var e,o,i,c,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.topPanelTitle.string="Connecting...",n.next=3,h.getInitializedInstance();case 3:if(e=n.sent,"wallet-selected"!==(null==t?void 0:t.closeReason)){n.next=10;break}return o=e.getWalletConnector(),n.next=8,C.getInstance().withLoading(g.getInstance().post("/api/wallet",{type:o.wallet.appName,address:o.account.address,publicKey:o.account.publicKey,chain:o.account.chain,walletStateInit:o.account.walletStateInit}));case 8:return n.next=10,e.checkServerConnection();case 10:(i=e.isConnected())?(c=e.getAccountAddress())&&(this.topPanelTitle.string="Connected",f.parseRaw(c).toString({bounceable:!1})):this.topPanelTitle.string="Not connected",this.lastConnectionStatus!==i&&(null==(s=this.connectButton)||null==(s=s.node)||s.off(l.EventType.TOUCH_END),this.setupConnectButton()),this.lastConnectionStatus=i;case 14:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),s.clearListeners=function(){var n;null==(n=this.connectButton)||null==(n=n.node)||n.off(l.EventType.TOUCH_END),this.onModalUnsubscribe&&this.onModalUnsubscribe(),this.onStatusUnsubscribe&&this.onStatusUnsubscribe()},s.onDestroy=function(){this.clearListeners()},t}(p)).prototype,"connectButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(T.prototype,"infoPanel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/WindowsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindow.ts","./LoadingService.ts"],(function(i){var n,e,t,o,s,r,a,d,w,c,u,l,h;return{setters:[function(i){n=i.asyncToGenerator,e=i.regeneratorRuntime},function(i){t=i.cclegacy,o=i._decorator,s=i.Node,r=i.Widget,a=i.Prefab,d=i.director,w=i.instantiate,c=i.Director,u=i.assetManager},function(i){l=i.BaseWindow},function(i){h=i.LoadingService}],execute:function(){var f,W;t._RF.push({},"19bffL9sk1LBJfgMu+lMDOX","WindowsManager",void 0);var g=o.ccclass;i("WindowsManager",g("WindowsManager")(((W=function(){function i(){this.activeWindow=null,this.windowsStack=[],this.windows=new Map,this.loadedWindows=new Map,this.windowsLayer=null,this.isClosingWindow=!1,this.isOpeningWindow=!1,d.on(c.EVENT_BEFORE_SCENE_LOADING,this.clearLoadedWindows,this)}var t=i.prototype;return t.registerWindow=function(i){this.windows.set(i,""+i)},t.showWindow=function(){var i=n(e().mark((function i(n,t){var o,s,r,a,d=this;return e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.isOpeningWindow){i.next=2;break}return i.abrupt("return");case 2:if(this.isOpeningWindow=!0,i.prev=3,this.activeWindow&&this.activeWindow.active&&this.windowsStack.push(this.activeWindow),o=this.loadedWindows.get(n)){i.next=23;break}if(h.getInstance().show(),s=this.windows.get(n)){i.next=13;break}return console.error('Window "'+n+'" is not registered.'),this.isOpeningWindow=!1,i.abrupt("return");case 13:return i.next=15,this.loadPrefab(s);case 15:if(r=i.sent){i.next=20;break}return console.error('Failed to load prefab for window "'+n+'"'),this.isOpeningWindow=!1,i.abrupt("return");case 20:o=w(r),this.loadedWindows.set(n,o),h.getInstance().hide();case 23:if(a=o.getComponent(l)){i.next=28;break}return console.warn('Window "'+n+'" does not extend BaseWindow.'),this.isOpeningWindow=!1,i.abrupt("return");case 28:this.setupWindowLayers(o),o.active=!0,this.activeWindow=o,o.setSiblingIndex(999),a.open(t),setTimeout((function(){d.isOpeningWindow=!1}),300),i.next=40;break;case 36:i.prev=36,i.t0=i.catch(3),console.error("Error opening window "+n+":",i.t0),this.isOpeningWindow=!1;case 40:case"end":return i.stop()}}),i,this,[[3,36]])})));return function(n,e){return i.apply(this,arguments)}}(),t.setupWindowLayers=function(i){this.getWindowsLayer().addChild(i)},t.getWindowsLayer=function(){if(!this.windowsLayer){var n=this.getCanvas();if(!n)throw new Error("Canvas not found");if(this.windowsLayer=n.getChildByName(i.WINDOWS_LAYER_NAME),!this.windowsLayer){this.windowsLayer=new s(i.WINDOWS_LAYER_NAME);var e=this.windowsLayer.addComponent(r);e.isAlignTop=!0,e.isAlignBottom=!0,e.isAlignLeft=!0,e.isAlignRight=!0,e.top=0,e.bottom=0,e.left=0,e.right=0,e.alignMode=r.AlignMode.ALWAYS,n.addChild(this.windowsLayer),this.windowsLayer.setSiblingIndex(9e3)}}return this.windowsLayer},t.hideActiveWindow=function(){var i=this;if(!this.isClosingWindow&&this.activeWindow&&this.activeWindow.active){this.isClosingWindow=!0;var n=this.activeWindow,e=n.getComponent(l);e?e.close():n.active=!1,0===this.windowsStack.length?this.activeWindow=null:this.activeWindow=this.windowsStack.pop(),setTimeout((function(){i.isClosingWindow=!1}),300)}},t.loadPrefab=function(){var i=n(e().mark((function i(n){var t=this;return e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise((function(i){var e=u.getBundle("windows");e?t.loadPrefabFromBundle(e,n,i):u.loadBundle("windows",(function(e,o){if(e)return console.error("Failed to load windows bundle: "+e),void i(null);t.loadPrefabFromBundle(o,n,i)}))})));case 1:case"end":return i.stop()}}),i)})));return function(n){return i.apply(this,arguments)}}(),t.loadPrefabFromBundle=function(i,n,e){i.load(n,a,(function(i,t){if(i)return console.error("Failed to load prefab "+n+": "+i),void e(null);e(t)}))},t.getCanvas=function(){return d.getScene().getChildByName("Canvas")||null},t.clearLoadedWindows=function(){this.loadedWindows.forEach((function(i){i.isValid&&i.destroy()})),this.loadedWindows.clear(),this.activeWindow=null,this.windowsLayer=null,this.windowsStack=[]},t.preloadWindow=function(i,n){var e=this;if(this.loadedWindows.has(i))n&&n();else{var t=this.windows.get(i);if(!t)return console.error('Window "'+i+'" is not registered.'),void(n&&n());this.loadPrefab(t).then((function(t){if(t){var o=w(t);e.loadedWindows.set(i,o),console.log("Window prefab preloaded: "+i)}n&&n()}))}},i}()).WINDOWS_LAYER_NAME="WindowsLayer",f=W))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/WindowType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"fae2cObzRhJlpIBd4EhvEHk","WindowType",void 0);e("WindowType",function(e){return e[e.FULLSCREEN=0]="FULLSCREEN",e[e.MODAL=1]="MODAL",e[e.POPUP=2]="POPUP",e}({}));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});